if(void 0===OGX)var OGX=function(){};OGX.Calendar=function(e){"use strict";var r,d,g,t,i=this,v=e,o={date:null,selectable:!0,swipable:!0,work_date:moment(),view:0,views:[{view:OGX.Calendar.VIEW_MONTH,engine:!1,config:!1},{view:OGX.Calendar.VIEW_WEEK,engine:!1,config:!1},{view:OGX.Calendar.VIEW_DAY,engine:!1,config:!1}],labels:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],format:"YYYY-MM"},u=[],h=moment();function _(){r.children(".ogx_calendar:first").children(".ogx_calendar_head:first").find(".ogx_calendar_head_date:first").html(v.work_date.format("YYYY-MM"))}function l(e){var a=r.children(".ogx_calendar:first").children(".ogx_calendar_head:first").children(".ogx_calendar_head_days:first");a.children(".ogx_calendar_head_current_day").removeClass("ogx_calendar_head_current_day"),e&&a.children(".ogx_calendar_head_day:eq("+v.date.weekday()+")").addClass("ogx_calendar_head_current_day")}function n(){var e=1,a=v.view;-1<v.view-1&&(a--,e++),v.view+1<v.views.length&&e++;for(var n=a;n<a+e;n++)n===v.view?c(n,[0,1,2]):c(n,[1])}function c(e,a){switch(v.views[e].view){case OGX.Calendar.VIEW_MONTH:!function(n,e){var a,r,d,t,i,o,_,l,c,s;a=v.work_date.clone();for(var w=0;w<e.length;w++){(a=v.work_date.clone()).add(e[w]-1,"month"),r=g.children(".ogx_quad_swiper_col:eq("+e[w]+")"),(d=r.children(".ogx_quad_swiper_item:eq("+n+")")).html('<div class="ogx_quad_swiper_item_container"></div>'),d=d.children(".ogx_quad_swiper_item_container:first"),t=a.daysInMonth(),i="",o=a.format("YYYY-MM"),_=moment(o+"-01"),l=_.weekday();for(var f=0;f<l;f++)i+='<div class="ogx_calendar_day ogx_calendar_offset"></div>';for(f=0;f<t;f++)s=o+"-"+m(String(f+1),2,"0"),c="",s===h.format("YYYY-MM-DD")&&(c+=" ogx_calendar_today"),s===v.date.format("YYYY-MM-DD")&&(c+=" ogx_calendar_selected_day"),i+='<div class="ogx_calendar_day'+c+'" data-date="'+s+'"><span class="ogx_calendar_day_label">'+(f+1)+'</span><span class="ogx_calendar_day_content"></span></div>';for(f=0;f<42-l-t;f++)i+='<div class="ogx_calendar_day ogx_calendar_offset"></div>';d.html(i),u[n]&&v.data&&d.children(".ogx_calendar_day[data-date]").each(function(e,a){setTimeout(function(){u[n].render($(a).children(".ogx_calendar_day_content:first"),v.data,$(a).data("date"))},0)})}}(e,a);break;case OGX.Calendar.VIEW_WEEK:!function(n,e){var a,r,d,t,i,o,_,l;a=v.work_date.clone(),t=a.unix(),_=a.weekday(),(l=moment.unix(t-60*_*60*24)).subtract(7,"days");for(var c=0;c<e.length;c++){l.add(7*e[c],"days"),r=g.children(".ogx_quad_swiper_col:eq("+e[c]+")"),(d=r.children(".ogx_quad_swiper_item:eq("+n+")")).html('<div class="ogx_quad_swiper_item_container"></div>'),d=d.children(".ogx_quad_swiper_item_container:first"),i="";for(var s=0;s<7;s++)o="",l.format("MM")!==a.format("MM")&&(o+=" ogx_calendar_offset"),l.format("YYYY-MM-DD")===h.format("YYYY-MM-DD")&&(o+=" ogx_calendar_today_day"),l.format("YYYY-MM-DD")===v.date.format("YYYY-MM-DD")&&(o+=" ogx_calendar_selected_day"),i+='<div class="ogx_calendar_day ogx_calendar_weekday'+o+'" data-date="'+l.format("YYYY-MM-DD")+'"><span class="ogx_calendar_day_label">'+l.format("DD")+'</span><span class="ogx_calendar_day_content"></span></div>',l.add(1,"day");l.subtract(7,"days"),d.html(i),u[n]&&v.data&&d.children(".ogx_calendar_weekday[data-date]").each(function(e,a){setTimeout(function(){u[n].render($(a).children(".ogx_calendar_day_content:first"),v.data,$(a).data("date"))},0)})}}(e,a);break;case OGX.Calendar.VIEW_DAY:!function(n,e){var a,r,d,t,i;(a=v.work_date.clone()).subtract(1,"day");for(var o=0;o<e.length;o++)a.add(e[o],"day"),r=g.children(".ogx_quad_swiper_col:eq("+e[o]+")"),d=r.children(".ogx_quad_swiper_item:eq("+n+")"),t='<div class="ogx_quad_swiper_item_container">',i="",a.format("YYYY-MM-DD")===h.format("YYYY-MM-DD")&&(i+=" ogx_calendar_today_day"),t+='<div class="ogx_calendar_day ogx_calendar_fullday'+i+'" data-date="'+a.format("YYYY-MM-DD")+'"><span class="ogx_calendar_day_label">'+a.format("DD")+'</span><span class="ogx_calendar_day_content"></span></div>',t+="</div>",d.html(t);if(u[n]&&v.data)for(o=0;o<e.length;o++)r=g.children(".ogx_quad_swiper_col:eq("+e[o]+")"),(d=r.children(".ogx_quad_swiper_item:eq("+n+")").children(".ogx_quad_swiper_item_container:first")).children(".ogx_calendar_day[data-date]").each(function(e,a){setTimeout(function(){u[n].render($(a).find(".ogx_calendar_day_content:first"),v.data,$(a).data("date"))},0)})}(e,a),l(!0)}}function s(e,a){for(var n=0;n<a.length;n++)g.children(".ogx_quad_swiper_col:eq("+a[n]+")").children(".ogx_quad_swiper_item:eq("+e+")").children(".ogx_quad_swiper_item_container:first").empty()}function a(){var e,a=v.view,n=1;-1<a-1&&(a--,n++),v.view+1<v.views.length&&n++;for(var r=a;r<a+n;r++){e=g.children(".ogx_quad_swiper_col:eq("+r+")");for(var d=0;d<3;d++)e.children(".ogx_quad_swiper_item:eq("+d+")").children(".ogx_quad_swiper_item_container:first").empty()}}function m(e,a,n){if(e.length===a)return e;for(;e.length<a;)e=n+e;return e}function w(e){v.selectable&&(e?t.el.on("click",".ogx_calendar_day",function(){t.el.find(".ogx_calendar_selected_day").removeClass("ogx_calendar_selected_day"),$(this).addClass("ogx_calendar_selected_day");var e=$(this).data("date");v.date=moment(e),v.work_date=v.date.clone(),r.trigger(OGX.Calendar.SELECT_DATE,e)}):t.el.off("click",".ogx_calendar_day"))}function f(e){e?(r.on(OGX.QuadSwiper.SWIPE_LEFT,function(){switch(v.views[v.view].view){case OGX.Calendar.VIEW_MONTH:var e=Number(v.work_date.format("YYYY")),a=Number(v.work_date.format("MM")),n=moment();12<++a&&(a=1,e++),String(a).length<2&&(a="0"+a),v.work_date=moment(e+"-"+a+"-01"),v.work_date.format("YYYY-MM-DD")===n.format("YYYY-MM-DD")&&(v.work_date=n);break;case OGX.Calendar.VIEW_WEEK:v.work_date.add(7,"days");break;case OGX.Calendar.VIEW_DAY:v.work_date.add(1,"days"),v.date=v.work_date.clone(),l(!0)}-1<v.view-1&&(s(v.view-1,[0,2]),c(v.view-1,[1])),v.view+1<v.views.length&&(s(v.view+1,[0,2]),c(v.view+1,[1])),c(v.view,[0,2]),_()}),r.on(OGX.QuadSwiper.SWIPE_RIGHT,function(){switch(v.views[v.view].view){case OGX.Calendar.VIEW_MONTH:var e=Number(v.work_date.format("YYYY")),a=Number(v.work_date.format("MM")),n=moment();--a<1&&(a=12,e--),a<0&&(a=12),String(a).length<2&&(a="0"+a),v.work_date=moment(e+"-"+a+"-01"),v.work_date.format("YYYY-MM-DD")===n.format("YYYY-MM-DD")&&(v.work_date=n);break;case OGX.Calendar.VIEW_WEEK:v.work_date.subtract(7,"days");break;case OGX.Calendar.VIEW_DAY:v.work_date.subtract(1,"days"),v.date=v.work_date.clone(),l(!0)}-1<v.view-1&&(s(v.view-1,[0,2]),c(v.view-1,[1])),v.view+1<v.views.length&&(s(v.view+1,[0,2]),c(v.view+1,[1])),c(v.view,[0,2]),_()}),r.on(OGX.QuadSwiper.SWIPE_DOWN,function(e,a){var n=v.views[a].view;s(v.view,[0,2]),c(a,[0,2]),-1<a-1&&c(a-1,[1]),l(n===OGX.Calendar.VIEW_DAY),w(n!==OGX.Calendar.VIEW_DAY),v.view=a,r.trigger(OGX.Calendar.VIEW_CHANGE,a)}),r.on(OGX.QuadSwiper.SWIPE_UP,function(e,a){var n=v.views[a].view;s(v.view,[0,2]),c(a,[0,2]),a+1<v.views.length&&c(a+1,[1]),l(n===OGX.Calendar.VIEW_DAY),w(n!==OGX.Calendar.VIEW_DAY),v.view=a,r.trigger(OGX.Calendar.VIEW_CHANGE,a)})):(r.off(OGX.QuadSwiper.SWIPE_LEFT),r.off(OGX.QuadSwiper.SWIPE_RIGHT),r.off(OGX.QuadSwiper.SWIPE_UP),r.off(OGX.QuadSwiper.SWIPE_DOWN))}this.el=null,this.val=function(e){if(void 0===e)return v.date.format("YYYY-MM-DD");moment.isMoment(e)||(v.date=moment(e),v.view_date=v.date.clone()),setTimeout(function(){a(),n()},0)},this.setData=function(e){v.data=e,setTimeout(function(){a(),n()},0)},this.getData=function(){return v.data},this.getView=function(){return v.view},this.setView=function(e){var a=1;e<v.view&&(a=-1);for(var n=Math.abs(v.view-e),r=v.view+a,d=v.view+a;d<n;d++)c(r+=a,[1]);t.row(r)},this.getRenderer=function(){return!!u[v.view]&&u[v.view]},this.destroy=function(){w(!1),f(!1),t.destroy(),function(){for(var e=0;e<u.length;e++)u[e]&&(u[e]._destroy_(),u[e].destroy());u=[]}()},function(){if(void 0!==OGX.QuadSwiper)if("undefined"!=typeof moment){v.date&&!moment.isMoment(v.date)?v.date=moment(v.date):v.date=moment(),function(){for(var e in o)v.hasOwnProperty(e)||(v[e]=o[e]);for(var a='<div class="ogx_calendar"><div class="ogx_calendar_head"><div class="ogx_calendar_head_date">'+v.date.format("YYYY-MM")+'</div><div class="ogx_calendar_head_days">',n=0;n<v.labels.length;n++)a+='<span class="ogx_calendar_head_day">'+v.labels[n]+"</span>";a+='</div></div><div class="ogx_calendar_swiper"></div></div>',$(v.container).html(a),i.el=r=$(v.container),d=r.find(".ogx_calendar_swiper:first"),v.work_date=v.date.clone()}();var e=function(){var e,a,n,r=[];OGX.Calendar.Engines.hasOwnProperty("Engine")||r.push("OGX.Calendar.Engines.Engine");for(var d=0;d<v.views.length;d++)v.views[d].hasOwnProperty("engine")&&v.views[d].engine?OGX.Calendar.Engines.hasOwnProperty(v.views[d].engine)?(e={},v.views[d].hasOwnProperty("config")&&v.views[d].config&&(e=v.views[d].config),u[d]=(a=v.views[d].engine,(n=e).selectable=v.selectable,OGX.Calendar.Engines[a].prototype=Object.create(OGX.Calendar.Engines.Engine.prototype),OGX.Calendar.Engines[a].prototype.constructor=OGX.Calendar.Engines[a],new OGX.Calendar.Engines[a](n))):r.push(v.views[d].engine):u[d]=!1;return r}();if(e.length)for(var a=0;a<e.length;a++)console.log("%c CRITICAL ERROR - "+e[a]+" not found! ","background:#222; color: #FF0000");else t=new OGX.QuadSwiper({container:d,enabled:v.swipable,depth:v.views.length,row:v.view}),f(!0),g=t.el.children(".ogx_quad_swiper:first").children(".ogx_quad_swiper_container:first"),n(),w(!0)}else console.log("%c CRITICAL ERROR - moment.js not found! ","background:#222; color: #FF0000");else console.log("%c CRITICAL ERROR - OGX.QuadSwiper not found! ","background:#222; color: #FF0000")}()},OGX.Calendar.Engines={},OGX.Calendar.Helpers={},OGX.Calendar.VIEW_MONTH="CalendarViewMonth",OGX.Calendar.VIEW_WEEK="CalendarViewWeek",OGX.Calendar.VIEW_DAY="CalendarViewDay",OGX.Calendar.VIEW_CHANGE="CalendarViewChange",OGX.Calendar.MONTH_CHANGE="CalendarMonthChange",OGX.Calendar.DAY_CHANGE="CalendarDayChange",OGX.Calendar.SELECT_DATE="CalendarSelectDate";