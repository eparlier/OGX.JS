if("undefined"==typeof OGX)var OGX=function(){};OGX.prototype.Calendar=function(e){"use strict";function a(){p.children(".ogx_calendar:first").children(".ogx_calendar_head:first").find(".ogx_calendar_head_date:first").html(D.work_date.format("YYYY-MM"))}function n(e){var a=p.children(".ogx_calendar:first").children(".ogx_calendar_head:first").children(".ogx_calendar_head_days:first");a.children(".ogx_calendar_head_current_day").removeClass("ogx_calendar_head_current_day"),e&&a.children(".ogx_calendar_head_day:eq("+D.date.weekday()+")").addClass("ogx_calendar_head_current_day")}function r(){var e=1,a=D.view;D.view-1>-1&&(a--,e++),D.view+1<D.views.length&&e++;for(var n=a;n<a+e;n++)n===D.view?d(n,[0,1,2]):d(n,[1])}function d(e,a){var r=D.views[e].view;switch(r){case OGX.Calendar.VIEW_MONTH:t(e,a);break;case OGX.Calendar.VIEW_WEEK:o(e,a);break;case OGX.Calendar.VIEW_DAY:i(e,a),n(!0)}}function t(e,a){var n,r,d,t,o,i,_,l,s,w;n=D.work_date.clone(),n.subtract(1,"month");for(var f=0;f<a.length;f++){n.add(a[f],"month"),r=y.children(".ogx_quad_swiper_col:eq("+a[f]+")"),d=r.children(".ogx_quad_swiper_item:eq("+e+")"),d.html('<div class="ogx_quad_swiper_item_container"></div>'),d=d.children(".ogx_quad_swiper_item_container:first"),t=n.daysInMonth(),o="",i=n.format("YYYY-MM"),_=moment(i+"-01"),l=_.weekday();for(var u=0;u<l;u++)o+='<div class="ogx_calendar_day ogx_calendar_offset">&nbsp;</div>';for(u=0;u<t;u++)w=i+"-"+c(String(u+1),2,"0"),s="",w===k.format("YYYY-MM-DD")&&(s+=" ogx_calendar_today"),w===D.date.format("YYYY-MM-DD")&&(s+=" ogx_calendar_selected_day"),o+='<div class="ogx_calendar_day'+s+'" data-date="'+w+'"><span class="ogx_calendar_day_label">'+(u+1)+'</span><span class="ogx_calendar_day_content"></span></div>';for(u=0;u<42-l-t;u++)o+='<div class="ogx_calendar_day ogx_calendar_offset">&nbsp;</div>';d.html(o),X[e]&&D.data&&d.children(".ogx_calendar_day[data-date]").each(function(a,n){setTimeout(function(){X[e].render($(n).children(".ogx_calendar_day_content:first"),D.data,$(n).data("date"))},0)})}}function o(e,a){var n,r,d,t,o,i,_,l,c;n=D.work_date.clone(),t=n.unix(),l=n.weekday(),c=moment.unix(t-60*l*60*24),c.subtract(7,"days");for(var s=0;s<a.length;s++){c.add(7*a[s],"days"),r=y.children(".ogx_quad_swiper_col:eq("+a[s]+")"),d=r.children(".ogx_quad_swiper_item:eq("+e+")"),d.html('<div class="ogx_quad_swiper_item_container"></div>'),d=d.children(".ogx_quad_swiper_item_container:first"),o="";for(var w=0;w<7;w++)i="",_=c.format("MM"),_!==n.format("MM")&&(i+=" ogx_calendar_offset"),c.format("YYYY-MM-DD")===k.format("YYYY-MM-DD")&&(i+=" ogx_calendar_today_day"),c.format("YYYY-MM-DD")===D.date.format("YYYY-MM-DD")&&(i+=" ogx_calendar_selected_day"),o+='<div class="ogx_calendar_day ogx_calendar_weekday'+i+'" data-date="'+c.format("YYYY-MM-DD")+'"><span class="ogx_calendar_day_label">'+c.format("DD")+'</span><span class="ogx_calendar_day_content"></span></div>',c.add(1,"day");c.subtract(7,"days"),d.html(o),X[e]&&D.data&&d.children(".ogx_calendar_weekday[data-date]").each(function(a,n){setTimeout(function(){X[e].render($(n).children(".ogx_calendar_day_content:first"),D.data,$(n).data("date"))},0)})}}function i(e,a){var n,r,d,t,o;n=D.work_date.clone(),n.subtract(1,"day");for(var i=0;i<a.length;i++)n.add(a[i],"day"),r=y.children(".ogx_quad_swiper_col:eq("+a[i]+")"),d=r.children(".ogx_quad_swiper_item:eq("+e+")"),t='<div class="ogx_quad_swiper_item_container">',o="",n.format("YYYY-MM-DD")===k.format("YYYY-MM-DD")&&(o+=" ogx_calendar_today_day"),t+='<div class="ogx_calendar_day ogx_calendar_fullday'+o+'" data-date="'+n.format("YYYY-MM-DD")+'"><span class="ogx_calendar_day_label">'+n.format("DD")+'</span><span class="ogx_calendar_day_content"></span></div>',t+="</div>",d.html(t);if(X[e]&&D.data)for(i=0;i<a.length;i++)r=y.children(".ogx_quad_swiper_col:eq("+a[i]+")"),d=r.children(".ogx_quad_swiper_item:eq("+e+")").children(".ogx_quad_swiper_item_container:first"),d.children(".ogx_calendar_day[data-date]").each(function(a,n){setTimeout(function(){X[e].render($(n).find(".ogx_calendar_day_content:first"),D.data,$(n).data("date"))},0)})}function _(e,a){for(var n=0;n<a.length;n++)y.children(".ogx_quad_swiper_col:eq("+a[n]+")").children(".ogx_quad_swiper_item:eq("+e+")").children(".ogx_quad_swiper_item_container:first").empty()}function l(){var e=D.view,a=1;e-1>-1&&(e--,a++),D.view+1<D.views.length&&a++;for(var n,r=e;r<e+a;r++){n=y.children(".ogx_quad_swiper_col:eq("+r+")");for(var d=0;d<3;d++)n.children(".ogx_quad_swiper_item:eq("+d+")").children(".ogx_quad_swiper_item_container:first").empty()}}function c(e,a,n){if(e.length===a)return e;for(;e.length<a;)e=n+e;return e}function s(e){e?x.el.on("click",".ogx_calendar_day",function(){x.el.find(".ogx_calendar_selected_day").removeClass("ogx_calendar_selected_day"),$(this).addClass("ogx_calendar_selected_day");var e=$(this).data("date");D.date=moment(e),D.work_date=D.date.clone(),p.trigger(OGX.Calendar.SELECT_DATE,e)}):x.el.off("click",".ogx_calendar_day")}function w(e){e?(p.on(OGX.QuadSwiper.SWIPE_LEFT,function(){var e=D.views[D.view].view;switch(e){case OGX.Calendar.VIEW_MONTH:var r=Number(D.work_date.format("YYYY")),t=Number(D.work_date.format("MM")),o=moment();t++,t>12&&(t=1,r++),String(t).length<2?t="0"+t:null,D.work_date=moment(r+"-"+t+"-01"),D.work_date.format("YYYY-MM-DD")===o.format("YYYY-MM-DD")&&(D.work_date=o);break;case OGX.Calendar.VIEW_WEEK:D.work_date.add(7,"days");break;case OGX.Calendar.VIEW_DAY:D.work_date.add(1,"days"),D.date=D.work_date.clone(),n(!0)}D.view-1>-1&&(_(D.view-1,[0,2]),d(D.view-1,[1])),D.view+1<D.views.length&&(_(D.view+1,[0,2]),d(D.view+1,[1])),d(D.view,[0,2]),a()}),p.on(OGX.QuadSwiper.SWIPE_RIGHT,function(){var e=D.views[D.view].view;switch(e){case OGX.Calendar.VIEW_MONTH:var r=Number(D.work_date.format("YYYY")),t=Number(D.work_date.format("MM")),o=moment();t--,t<1&&(t=12,r--),t<0?t=12:null,String(t).length<2?t="0"+t:null,D.work_date=moment(r+"-"+t+"-01"),D.work_date.format("YYYY-MM-DD")===o.format("YYYY-MM-DD")&&(D.work_date=o);break;case OGX.Calendar.VIEW_WEEK:D.work_date.subtract(7,"days");break;case OGX.Calendar.VIEW_DAY:D.work_date.subtract(1,"days"),D.date=D.work_date.clone(),n(!0)}D.view-1>-1&&(_(D.view-1,[0,2]),d(D.view-1,[1])),D.view+1<D.views.length&&(_(D.view+1,[0,2]),d(D.view+1,[1])),d(D.view,[0,2]),a()}),p.on(OGX.QuadSwiper.SWIPE_DOWN,function(e,a){var r=D.views[a].view;_(D.view,[0,2]),d(a,[0,2]),a-1>-1&&d(a-1,[1]),n(r===OGX.Calendar.VIEW_DAY),s(r!==OGX.Calendar.VIEW_DAY),D.view=a,p.trigger(OGX.Calendar.VIEW_CHANGE,a)}),p.on(OGX.QuadSwiper.SWIPE_UP,function(e,a){var r=D.views[a].view;_(D.view,[0,2]),d(a,[0,2]),a+1<D.views.length&&d(a+1,[1]),n(r===OGX.Calendar.VIEW_DAY),s(r!==OGX.Calendar.VIEW_DAY),D.view=a,p.trigger(OGX.Calendar.VIEW_CHANGE,a)})):(p.off(OGX.QuadSwiper.SWIPE_LEFT),p.off(OGX.QuadSwiper.SWIPE_RIGHT),p.off(OGX.QuadSwiper.SWIPE_UP),p.off(OGX.QuadSwiper.SWIPE_DOWN))}function f(){var e=[];OGX.hasOwnProperty("CalendarBaseRenderer")||e.push("CalendarBaseRenderer");for(var a,n=0;n<D.views.length;n++)D.views[n].hasOwnProperty("engine")&&D.views[n].engine?OGX.hasOwnProperty(D.views[n].engine)?(a=null,D.views[n].hasOwnProperty("config")&&D.views[n].config&&(a=D.views[n].config),X[n]=u(D.views[n].engine,a)):e.push(D.views[n].engine):X[n]=!1;return e}function u(e,a){var n=function(){};n.prototype.CalendarBaseRenderer=OGX.prototype.CalendarBaseRenderer,n.prototype[e]=OGX.prototype[e];var r=new n;return r.CalendarBaseRenderer(),r[e](a),r}function v(){for(var e=0;e<X.length;e++)X[e]&&(X[e].__destroy(),X[e].destroy());X=[]}function g(){x=new OGX.QuadSwiper({container:O,depth:D.views.length,row:D.view}),D.swipable&&w(!0),y=x.el.children(".ogx_quad_swiper:first").children(".ogx_quad_swiper_container:first")}function h(){switch(D.mode){case OGX.Calendar.MODE_MOBILE:C="touchstart",M="touchend";break;case OGX.Calendar.MODE_DESKTOP:C="mousedown",M="mouseup"}}function m(){for(var e in G)D.hasOwnProperty(e)||(D[e]=G[e]);for(var a='<div class="ogx_calendar"><div class="ogx_calendar_head"><div class="ogx_calendar_head_date">'+D.date.format("YYYY-MM")+'</div><div class="ogx_calendar_head_days">',n=0;n<D.labels.length;n++)a+='<span class="ogx_calendar_head_day">'+D.labels[n]+"</span>";a+='</div></div><div class="ogx_calendar_swiper"></div></div>',$(D.container).html(a),E.el=p=$(D.container),O=p.find(".ogx_calendar_swiper:first"),D.work_date=D.date.clone()}function Y(){if("undefined"==typeof OGX.QuadSwiper)return void console.log("%c CRITICAL ERROR - OGX.QuadSwiper not found! ","background:#222; color: #FF0000");if("undefined"==typeof moment)return void console.log("%c CRITICAL ERROR - moment.js not found! ","background:#222; color: #FF0000");D.date&&!moment.isMoment(D.date)?D.date=moment(D.date):D.date=moment(),m();var e=f();if(e.length)for(var a=0;a<e.length;a++)console.log("%c CRITICAL ERROR - OGX."+e[a]+" not found! ","background:#222; color: #FF0000");else h(),g(),r(),D.selectable&&s(!0)}var p,O,y,x,M,C,E=this,D=e,G={date:null,work_date:moment(),mode:OGX.Calendar.MODE_MOBILE,view:0,views:[{view:OGX.Calendar.VIEW_MONTH,engine:!1,config:!1},{view:OGX.Calendar.VIEW_WEEK,engine:!1,config:!1},{view:OGX.Calendar.VIEW_DAY,engine:!1,config:!1}],labels:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],format:"YYYY-MM",selectable:!0,swipable:!0},X=[],k=moment();this.el=null,this.val=function(e){return"undefined"==typeof e?D.date.format("YYYY-MM-DD"):(moment.isMoment(e)||(D.date=moment(e),D.view_date=D.date.clone()),void setTimeout(function(){l(),r()},0))},this.setData=function(e){D.data=e,setTimeout(function(){l(),r()},0)},this.getData=function(){return D.data},this.getView=function(){return D.view},this.setView=function(e){var a=1;e<D.view&&(a=-1);for(var n=Math.abs(D.view-e),r=D.view+a,t=D.view+a;t<n;t++)r+=a,d(r,[1]);x.row(r)},this.getRenderer=function(){return!!X[D.view]&&X[D.view]},this.destroy=function(){D.selectable&&s(!1),D.swipable&&w(!1),x.destroy(),v()},Y()},OGX.Calendar=function(e){"use strict";return new OGX.prototype.Calendar(e)},OGX.Calendar.Renderer={},OGX.Calendar.VIEW_MONTH="CalendarViewMonth",OGX.Calendar.VIEW_WEEK="CalendarViewWeek",OGX.Calendar.VIEW_DAY="CalendarViewDay",OGX.Calendar.VIEW_CHANGE="CalendarViewChange",OGX.Calendar.MODE_MOBILE="CalendarModeMobile",OGX.Calendar.MODE_DESKTOP="CalendarModeDesktop",OGX.Calendar.MONTH_CHANGE="CalendarMonthChange",OGX.Calendar.DAY_CHANGE="CalendarDayChange",OGX.Calendar.SELECT_DATE="CalendarSelectDate";