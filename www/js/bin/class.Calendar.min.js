if(void 0===OGX)var OGX=function(){};OGX.Calendar=function(e){"use strict";var r,d,v,t,o=this,g=e,i={date:null,work_date:moment(),mode:OGX.Calendar.MODE_MOBILE,view:0,views:[{view:OGX.Calendar.VIEW_MONTH,engine:!1,config:!1},{view:OGX.Calendar.VIEW_WEEK,engine:!1,config:!1},{view:OGX.Calendar.VIEW_DAY,engine:!1,config:!1}],labels:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],format:"YYYY-MM",selectable:!0,swipable:!0},u=[],h=moment();function _(){r.children(".ogx_calendar:first").children(".ogx_calendar_head:first").find(".ogx_calendar_head_date:first").html(g.work_date.format("YYYY-MM"))}function l(e){var a=r.children(".ogx_calendar:first").children(".ogx_calendar_head:first").children(".ogx_calendar_head_days:first");a.children(".ogx_calendar_head_current_day").removeClass("ogx_calendar_head_current_day"),e&&a.children(".ogx_calendar_head_day:eq("+g.date.weekday()+")").addClass("ogx_calendar_head_current_day")}function n(){var e=1,a=g.view;-1<g.view-1&&(a--,e++),g.view+1<g.views.length&&e++;for(var n=a;n<a+e;n++)n===g.view?c(n,[0,1,2]):c(n,[1])}function c(e,a){switch(g.views[e].view){case OGX.Calendar.VIEW_MONTH:!function(n,e){var a,r,d,t,o,i,_,l,c,s;(a=g.work_date.clone()).subtract(1,"month");for(var w=0;w<e.length;w++){a.add(e[w],"month"),r=v.children(".ogx_quad_swiper_col:eq("+e[w]+")"),(d=r.children(".ogx_quad_swiper_item:eq("+n+")")).html('<div class="ogx_quad_swiper_item_container"></div>'),d=d.children(".ogx_quad_swiper_item_container:first"),t=a.daysInMonth(),o="",i=a.format("YYYY-MM"),_=moment(i+"-01"),l=_.weekday();for(var f=0;f<l;f++)o+='<div class="ogx_calendar_day ogx_calendar_offset">&nbsp;</div>';for(f=0;f<t;f++)s=i+"-"+m(String(f+1),2,"0"),c="",s===h.format("YYYY-MM-DD")&&(c+=" ogx_calendar_today"),s===g.date.format("YYYY-MM-DD")&&(c+=" ogx_calendar_selected_day"),o+='<div class="ogx_calendar_day'+c+'" data-date="'+s+'"><span class="ogx_calendar_day_label">'+(f+1)+'</span><span class="ogx_calendar_day_content"></span></div>';for(f=0;f<42-l-t;f++)o+='<div class="ogx_calendar_day ogx_calendar_offset">&nbsp;</div>';d.html(o),u[n]&&g.data&&d.children(".ogx_calendar_day[data-date]").each(function(e,a){setTimeout(function(){u[n].render($(a).children(".ogx_calendar_day_content:first"),g.data,$(a).data("date"))},0)})}}(e,a);break;case OGX.Calendar.VIEW_WEEK:!function(n,e){var a,r,d,t,o,i,_,l;a=g.work_date.clone(),t=a.unix(),_=a.weekday(),(l=moment.unix(t-60*_*60*24)).subtract(7,"days");for(var c=0;c<e.length;c++){l.add(7*e[c],"days"),r=v.children(".ogx_quad_swiper_col:eq("+e[c]+")"),(d=r.children(".ogx_quad_swiper_item:eq("+n+")")).html('<div class="ogx_quad_swiper_item_container"></div>'),d=d.children(".ogx_quad_swiper_item_container:first"),o="";for(var s=0;s<7;s++)i="",l.format("MM")!==a.format("MM")&&(i+=" ogx_calendar_offset"),l.format("YYYY-MM-DD")===h.format("YYYY-MM-DD")&&(i+=" ogx_calendar_today_day"),l.format("YYYY-MM-DD")===g.date.format("YYYY-MM-DD")&&(i+=" ogx_calendar_selected_day"),o+='<div class="ogx_calendar_day ogx_calendar_weekday'+i+'" data-date="'+l.format("YYYY-MM-DD")+'"><span class="ogx_calendar_day_label">'+l.format("DD")+'</span><span class="ogx_calendar_day_content"></span></div>',l.add(1,"day");l.subtract(7,"days"),d.html(o),u[n]&&g.data&&d.children(".ogx_calendar_weekday[data-date]").each(function(e,a){setTimeout(function(){u[n].render($(a).children(".ogx_calendar_day_content:first"),g.data,$(a).data("date"))},0)})}}(e,a);break;case OGX.Calendar.VIEW_DAY:!function(n,e){var a,r,d,t,o;(a=g.work_date.clone()).subtract(1,"day");for(var i=0;i<e.length;i++)a.add(e[i],"day"),r=v.children(".ogx_quad_swiper_col:eq("+e[i]+")"),d=r.children(".ogx_quad_swiper_item:eq("+n+")"),t='<div class="ogx_quad_swiper_item_container">',o="",a.format("YYYY-MM-DD")===h.format("YYYY-MM-DD")&&(o+=" ogx_calendar_today_day"),t+='<div class="ogx_calendar_day ogx_calendar_fullday'+o+'" data-date="'+a.format("YYYY-MM-DD")+'"><span class="ogx_calendar_day_label">'+a.format("DD")+'</span><span class="ogx_calendar_day_content"></span></div>',t+="</div>",d.html(t);if(u[n]&&g.data)for(i=0;i<e.length;i++)r=v.children(".ogx_quad_swiper_col:eq("+e[i]+")"),(d=r.children(".ogx_quad_swiper_item:eq("+n+")").children(".ogx_quad_swiper_item_container:first")).children(".ogx_calendar_day[data-date]").each(function(e,a){setTimeout(function(){u[n].render($(a).find(".ogx_calendar_day_content:first"),g.data,$(a).data("date"))},0)})}(e,a),l(!0)}}function s(e,a){for(var n=0;n<a.length;n++)v.children(".ogx_quad_swiper_col:eq("+a[n]+")").children(".ogx_quad_swiper_item:eq("+e+")").children(".ogx_quad_swiper_item_container:first").empty()}function a(){var e,a=g.view,n=1;-1<a-1&&(a--,n++),g.view+1<g.views.length&&n++;for(var r=a;r<a+n;r++){e=v.children(".ogx_quad_swiper_col:eq("+r+")");for(var d=0;d<3;d++)e.children(".ogx_quad_swiper_item:eq("+d+")").children(".ogx_quad_swiper_item_container:first").empty()}}function m(e,a,n){if(e.length===a)return e;for(;e.length<a;)e=n+e;return e}function w(e){e?t.el.on("click",".ogx_calendar_day",function(e){if(e.preventDefault(),e.stopImmediatePropagation(),!$(this).hasClass("ogx_calendar_offset")){t.el.find(".ogx_calendar_selected_day").removeClass("ogx_calendar_selected_day"),$(this).addClass("ogx_calendar_selected_day");var a=$(this).data("date");g.date=moment(a),g.work_date=g.date.clone(),r.trigger(OGX.Calendar.SELECT_DATE,a)}}):t.el.off("click",".ogx_calendar_day")}function f(e){e?(r.on(OGX.QuadSwiper.SWIPE_LEFT,function(){switch(g.views[g.view].view){case OGX.Calendar.VIEW_MONTH:var e=Number(g.work_date.format("YYYY")),a=Number(g.work_date.format("MM")),n=moment();12<++a&&(a=1,e++),String(a).length<2&&(a="0"+a),g.work_date=moment(e+"-"+a+"-01"),g.work_date.format("YYYY-MM-DD")===n.format("YYYY-MM-DD")&&(g.work_date=n);break;case OGX.Calendar.VIEW_WEEK:g.work_date.add(7,"days");break;case OGX.Calendar.VIEW_DAY:g.work_date.add(1,"days"),g.date=g.work_date.clone(),l(!0)}-1<g.view-1&&(s(g.view-1,[0,2]),c(g.view-1,[1])),g.view+1<g.views.length&&(s(g.view+1,[0,2]),c(g.view+1,[1])),c(g.view,[0,2]),_()}),r.on(OGX.QuadSwiper.SWIPE_RIGHT,function(){switch(g.views[g.view].view){case OGX.Calendar.VIEW_MONTH:var e=Number(g.work_date.format("YYYY")),a=Number(g.work_date.format("MM")),n=moment();--a<1&&(a=12,e--),a<0&&(a=12),String(a).length<2&&(a="0"+a),g.work_date=moment(e+"-"+a+"-01"),g.work_date.format("YYYY-MM-DD")===n.format("YYYY-MM-DD")&&(g.work_date=n);break;case OGX.Calendar.VIEW_WEEK:g.work_date.subtract(7,"days");break;case OGX.Calendar.VIEW_DAY:g.work_date.subtract(1,"days"),g.date=g.work_date.clone(),l(!0)}-1<g.view-1&&(s(g.view-1,[0,2]),c(g.view-1,[1])),g.view+1<g.views.length&&(s(g.view+1,[0,2]),c(g.view+1,[1])),c(g.view,[0,2]),_()}),r.on(OGX.QuadSwiper.SWIPE_DOWN,function(e,a){var n=g.views[a].view;s(g.view,[0,2]),c(a,[0,2]),-1<a-1&&c(a-1,[1]),l(n===OGX.Calendar.VIEW_DAY),w(n!==OGX.Calendar.VIEW_DAY),g.view=a,r.trigger(OGX.Calendar.VIEW_CHANGE,a)}),r.on(OGX.QuadSwiper.SWIPE_UP,function(e,a){var n=g.views[a].view;s(g.view,[0,2]),c(a,[0,2]),a+1<g.views.length&&c(a+1,[1]),l(n===OGX.Calendar.VIEW_DAY),w(n!==OGX.Calendar.VIEW_DAY),g.view=a,r.trigger(OGX.Calendar.VIEW_CHANGE,a)})):(r.off(OGX.QuadSwiper.SWIPE_LEFT),r.off(OGX.QuadSwiper.SWIPE_RIGHT),r.off(OGX.QuadSwiper.SWIPE_UP),r.off(OGX.QuadSwiper.SWIPE_DOWN))}function Y(e,a){var n=function(){};n.prototype.CalendarBaseRenderer=OGX.prototype.CalendarBaseRenderer,n.prototype[e]=OGX.prototype[e];var r=new n;return r.CalendarBaseRenderer(),r[e](a),r}this.el=null,this.val=function(e){if(void 0===e)return g.date.format("YYYY-MM-DD");moment.isMoment(e)||(g.date=moment(e),g.view_date=g.date.clone()),setTimeout(function(){a(),n()},0)},this.setData=function(e){g.data=e,setTimeout(function(){a(),n()},0)},this.getData=function(){return g.data},this.getView=function(){return g.view},this.setView=function(e){var a=1;e<g.view&&(a=-1);for(var n=Math.abs(g.view-e),r=g.view+a,d=g.view+a;d<n;d++)c(r+=a,[1]);t.row(r)},this.getRenderer=function(){return!!u[g.view]&&u[g.view]},this.destroy=function(){g.selectable&&w(!1),g.swipable&&f(!1),t.destroy(),function(){for(var e=0;e<u.length;e++)u[e]&&(u[e].__destroy(),u[e].destroy());u=[]}()},function(){if(void 0!==OGX.QuadSwiper)if("undefined"!=typeof moment){g.date&&!moment.isMoment(g.date)?g.date=moment(g.date):g.date=moment(),function(){for(var e in i)g.hasOwnProperty(e)||(g[e]=i[e]);for(var a='<div class="ogx_calendar"><div class="ogx_calendar_head"><div class="ogx_calendar_head_date">'+g.date.format("YYYY-MM")+'</div><div class="ogx_calendar_head_days">',n=0;n<g.labels.length;n++)a+='<span class="ogx_calendar_head_day">'+g.labels[n]+"</span>";a+='</div></div><div class="ogx_calendar_swiper"></div></div>',$(g.container).html(a),o.el=r=$(g.container),d=r.find(".ogx_calendar_swiper:first"),g.work_date=g.date.clone()}();var e=function(){var e,a=[];OGX.hasOwnProperty("CalendarBaseRenderer")||a.push("CalendarBaseRenderer");for(var n=0;n<g.views.length;n++)g.views[n].hasOwnProperty("engine")&&g.views[n].engine?OGX.hasOwnProperty(g.views[n].engine)?(e=null,g.views[n].hasOwnProperty("config")&&g.views[n].config&&(e=g.views[n].config),u[n]=Y(g.views[n].engine,e)):a.push(g.views[n].engine):u[n]=!1;return a}();if(e.length)for(var a=0;a<e.length;a++)console.log("%c CRITICAL ERROR - OGX."+e[a]+" not found! ","background:#222; color: #FF0000");else!function(){switch(g.mode){case OGX.Calendar.MODE_MOBILE:"touchstart","touchend";break;case OGX.Calendar.MODE_DESKTOP:"mousedown","mouseup"}}(),t=new OGX.QuadSwiper({container:d,depth:g.views.length,row:g.view}),g.swipable&&f(!0),v=t.el.children(".ogx_quad_swiper:first").children(".ogx_quad_swiper_container:first"),n(),g.selectable&&w(!0)}else console.log("%c CRITICAL ERROR - moment.js not found! ","background:#222; color: #FF0000");else console.log("%c CRITICAL ERROR - OGX.QuadSwiper not found! ","background:#222; color: #FF0000")}()},OGX.Calendar.Renderer={},OGX.Calendar.VIEW_MONTH="CalendarViewMonth",OGX.Calendar.VIEW_WEEK="CalendarViewWeek",OGX.Calendar.VIEW_DAY="CalendarViewDay",OGX.Calendar.VIEW_CHANGE="CalendarViewChange",OGX.Calendar.MODE_MOBILE="CalendarModeMobile",OGX.Calendar.MODE_DESKTOP="CalendarModeDesktop",OGX.Calendar.MONTH_CHANGE="CalendarMonthChange",OGX.Calendar.DAY_CHANGE="CalendarDayChange",OGX.Calendar.SELECT_DATE="CalendarSelectDate";