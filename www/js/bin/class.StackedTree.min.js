if(void 0===OGX)var OGX=function(){};OGX.StackedTree=function(e){"use strict";var a,r,i=this,s={scope:["public"],speed:200,data:[],enabled:!0,template:"{{$label}}",chromeos:!1},o=e,n="mousedown",c=(new Date).getTime()+""+Math.round(1e3*Math.random()),d=[],l=[0],_=0,v=!1,h='{{calc ($items && $items.length)?$__css="ogx_stacked_tree_door":$__css=""}}';function g(e){e?(a.on(n,".ogx_stacked_tree_level_prev",function(e){m(--_,!0),l.pop(),i.el.trigger(OGX.StackedTree.BACK)}),a.on(OGX.DynamicList.SELECT,function(e,t){e.stopImmediatePropagation(),v=t;var a=d[_].getList(),s=$(a.getSelection(!0)[0]).index();a.resetSelection(),t.hasOwnProperty("items")&&t.items.length&&function(e){if(!e.hasOwnProperty("scope"))return!0;for(var t=0;t<o.scope.length;t++)if(-1!==e.scope.indexOf(o.scope[t]))return!0;return!1}(t)?(l.push(s),f(++_,t.items),i.el.trigger(OGX.StackedTree.ENTER,t),setTimeout(function(){m(_)},0)):i.el.trigger(OGX.StackedTree.SELECT,t)})):(a.off(n,".ogx_stacked_tree_level_prev"),a.off(OGX.DynamicList.SELECT))}function f(e,t){r.removeClass("ogx_stacked_tree_anim").css("width",100*(e+1)+"%"),r.width();var a='<div class="ogx_stacked_tree_level" data-level="'+e+'">';0<e&&(a+='<div class="ogx_stacked_tree_item ogx_stacked_tree_level_prev">'+OGX.Templater.templatize(v,o.template)+"</div>"),a+='<div class="ogx_stacked_tree_level_list"></div></div>',r.append(a);var s=r.children('.ogx_stacked_tree_level[data-level="'+e+'"]').children(".ogx_stacked_tree_level_list");r.children(".ogx_stacked_tree_level").css("flex-basis",Math.floor(100/(e+1)*100)/100+"%"),function(e,t,a){d[e]&&d[e].destroy();var s=new OGX.ScrollList({container:t,mode:"single",display:{html:h+o.template,css:{bind:"__css",add:"ogx_stacked_tree_item"}},list:a});d[e]=s}(e,s[0],t)}function m(e,t){r.addClass("ogx_stacked_tree_anim"),void 0!==t&&t&&(g(!1),r.on("transitionend",function(){r.off("transitionend"),r.removeClass("ogx_stacked_tree_anim").css("width",100*(e+1)+"%"),d[e+1].destroy(),d.splice(e+1,1),r.children('.ogx_stacked_tree_level[data-level="'+(e+1)+'"]').remove(),r.children(".ogx_stacked_tree_level").css("flex-basis",Math.floor(100/(e+1)*100)/100+"%"),a=r.width(),g(!(v=!1))}));var a=r.width();r.css("transform","translateX("+e*Math.round(a/l.length)*-1+"px)")}this._NAME_=OGX.StackedTree.NAME,this.el=null,this.enable=function(){o.enabled||g(o.enabled=!0)},this.disable=function(){o.enabled&&g(o.enabled=!1)},this.setTree=function(e){if(e.length){var t=e.slice();return o.data={items:t},!0}return!1},this.setScope=function(e){o.scope=e,v=!(l=[_=0])},this.destroy=function(){for(var e=0;e<d.length;e++)d[e]&&d[e].destroy();g(!1)},function(){if(void 0!==OGX.ScrollList){for(var e in s)o.hasOwnProperty(e)||(o[e]=s[e]);if(void 0===window.ontouchstart||o.chromeos||(n="touchstart"),i.el=a=$(o.container),a.attr("data-ogx-id",c),a.addClass("ogx_stacked_tree"),o.data.length){var t=o.data.slice();o.data={items:t}}}else console.log("%c CRITICAL ERROR - OGX.ScrollList not found! ","background:#222; color: #FF0000")}(),a.html('<div class="ogx_stacked_tree_container" style="width:100%"></div>'),r=a.children(".ogx_stacked_tree_container:first"),f(l[0],o.data.items),o.enabled&&g(!0)},OGX.StackedTree.NAME="OgxStackedTree",OGX.StackedTree.BACK="StackedTreeBack",OGX.StackedTree.ENTER="StackedTreeEnter",OGX.StackedTree.SELECT="StackedTreeSelect";