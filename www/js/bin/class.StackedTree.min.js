if(void 0===OGX)var OGX=function(){};OGX.StackedTree=function(e){"use strict";var s,l,d,_,f,t=this,a={scopes:["public"],speed:200,enabled:!0,mode:OGX.StackedTree.MODE_MOBILE},h=e,n="mousedown";function i(e){e?(s.on(n,".ogx_stacked_tree_item",function(){var e=$(this).data("path").split("_"),t=p(e);d=t.label,r(e)?s.trigger(OGX.StackedTree.CHANGE,t):s.trigger(OGX.StackedTree.SELECT,t)}),s.on(n,".ogx_stacked_tree_back",function(){var e=p($(this).data("path").split("_"));g(parseInt($(this).data("lv"))),s.trigger(OGX.StackedTree.CHANGE,e)})):(s.off(n,".ogx_stacked_tree_item"),s.off(n,".ogx_stacked_tree_back"))}function p(e){var t=h.data,s=e.slice();for(s.shift();0<s.length;)t.hasOwnProperty("items")&&(t=t.items[s[0]]),s.shift();return t}function r(e){var t,s;t=1===e.length?h.data:p(e);var a,n=1===(a=_=e).length?0:a.length-1;if(t&&t.hasOwnProperty("items")){0===l.find(".ogx_stacked_tree_level"+n+":first").length&&l.append('<div class="ogx_stacked_tree_level ogx_stacked_tree_level'+n+'" data-lv="'+n+'"></div>'),(s=l.find(".ogx_stacked_tree_level"+n+":first")).empty(),s.css("left",n*f+"px");var i,r="<ul>",c=e.slice();c=c.join("_"),0<n&&(r+='<li data-path="'+c+'" data-lv="'+(n-1)+'" class="ogx_stacked_tree_back"><span class="ogx_stacked_tree_item_label">'+d+"</span></li>");for(var o=0;o<t.items.length;o++)k(t.items[o])&&(i="",(!t.items[o].hasOwnProperty("items")||t.items[o].hasOwnProperty("items")&&0===t.items[o].length)&&(i=" ogx_stacked_tree_end"),r+='<li data-path="'+(c+"_"+o)+'" class="ogx_stacked_tree_item'+i+'"><span class="ogx_stacked_tree_item_label">'+t.items[o].label+"</span></li>");return r+="</ul>",s.html(r),g(n),!0}return!1}function g(e){l.off("transitionend"),l.css("transition","all ."+h.speed/100+"s"),l.css("transform","translateX("+e*f*-1+"px)")}function k(e){if(e.hasOwnProperty("scopes"))for(var t=0;t<e.scopes.length;t++)if(-1!==h.scopes.indexOf(e.scopes[t]))return!0;return!1}this.el=null,this.refresh=function(){f=s.innerWidth(),r(_)},this.setScopes=function(e){h.scopes=e,r([0])},this.setPath=function(e){r(_=e)},this.enable=function(){h.enabled||i(h.enabled=!0)},this.disable=function(){h.enabled&&i(h.enabled=!1)},this.destroy=function(){i(!1)},function(){for(var e in a)h.hasOwnProperty(e)||(h[e]=a[e]);var t=h.data.slice();h.data={items:t}}(),(s=$(h.container)).addClass("ogx_stacked_tree"),s.html('<div class="ogx_stacked_tree_container"></div>'),l=s.find(".ogx_stacked_tree_container:first"),t.el=s,f=s.innerWidth(),r([0]),h.enabled&&i(!0)},OGX.StackedTree.CHANGE="stackedTreeChange",OGX.StackedTree.SELECT="stackedTreeSelect";