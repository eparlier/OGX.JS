if(void 0===OGX)var OGX=function(){};OGX.NestedList=function(e){"use strict";var l,t=this,i={core:!1,scopes:["public"],set_heights_timeout:0,action_timeout:30,enabled:!0,template:'<div class="ogx_nested_list_item"><div class="ogx_nested_list_item_head {{$css}}"><span class="ogx_nested_list_item_title">{{$title}}</span></div><div class="ogx_nested_list_item_body"><div class="ogx_nested_list_item_content">{{$body}}</div></div></div>',display:null,key:null,list:new OGX.List,list_mode:OGX.DynamicList.SELECT_MODE_SINGLE},d=e,n=[],o=new OGX.List,_="nested-list-"+(new Date).getTime()+Math.round(1e3*Math.random()),s="mousedown",r=!1;function a(e){e?l.on(s,".ogx_nested_list_item .ogx_nested_list_item_head",function(e){if(!r){r=!0;var t=$(this),i=t.next(),s=t.parent(0),n=i.outerHeight(),o=s.index();l.on("transitionend",function(){l.off("transitionend"),s.hasClass("ogx_nested_list_item_body_anim_in")?l.trigger(OGX.NestedList.OPENED,d.list[o]):l.trigger(OGX.NestedList.CLOSED,d.list[o]),r=!1}),t.hasClass("ogx_nested_list_item_head_closed")?(t.addClass("ogx_nested_list_item_head_open").removeClass("ogx_nested_list_item_head_closed"),c(o,n),l.trigger(OGX.NestedList.OPEN,d.list[o])):(t.removeClass("ogx_nested_list_item_head_open").addClass("ogx_nested_list_item_head_closed"),c(o,-1*n),l.trigger(OGX.NestedList.CLOSE,d.list[o]))}}):l.off(s,".ogx_nested_list_item_head")}function c(s,n){var o,d;l.children(".ogx_nested_list_item").each(function(e,t){var i;s<e&&(d=$(t),i=(i=(i=d.css("transform")).replace(/(matrix|\(|\))/g,"")).split(",").pop(),o=Number(i),d.css("transform","translateY("+(o+n)+"px)"))})}function g(){l.empty(),l.addClass("ogx_nested_list_prep");for(var e,t="",i=!1,s=0;s<d.list.length;s++)d.list[s].hasOwnProperty("items")&&(i=!0),t+=h(d.list[s],s);if(t+='<div class="ogx_nested_list_item ogx_nested_list_end"></div>',l.html(t),o.length)for(s=0;s<o.length;s++)o[s].view.container=(e=o[s].index,'.ogx_nested_list[data-ogx="'+_+'"] .ogx_nested_list_item:eq('+e+") .ogx_nested_list_item_body:first .ogx_nested_list_item_content:first"),d.core.addToStage(o[s].view);i&&m(0,d.list.length),setTimeout(function(){u(),function(){for(var e,t,i=0,s=0;s<d.list.length;s++)e=l.children(".ogx_nested_list_item:eq("+s+")"),t=e.children(".ogx_nested_list_item_head:first"),d.list[s].open?(i+=Number(e.children(".ogx_nested_list_item_body:first").data("height")),c(e.index(),i)):t.addClass("ogx_nested_list_item_head_closed").removeClass("ogx_nested_list_item_head_open")}(),f(),l.removeClass("ogx_nested_list_prep"),l.trigger(OGX.NestedList.READY)},d.set_heights_timeout)}function h(e,t){if(e.css="ogx_nested_list_item_head_open",e.hasOwnProperty("items"))e.body="";else if(e.hasOwnProperty("view")&&d.core){o.push({index:t,view:e.view});var i=new OGX.DisplayObject(e.view);e.view.hasOwnProperty("data")?e.body=i.html(e.view.data):e.body=i.html()}return OGX.Templater.templatize(e,d.template)}function m(e,t){for(var i,s=e;s<t;s++)d.list[s].hasOwnProperty("items")&&(i=l.children(".ogx_nested_list_item:eq("+s+")").children(".ogx_nested_list_item_body:first").children(".ogx_nested_list_item_content:first"),n[s]=new OGX.DynamicList({container:i[0],display:d.display,key:d.key,swipe:d.swipe,reorder:d.reorder,mode:d.list_mode,list:d.list[s].items}))}function f(){for(var e=0;e<d.list.length;e++)p(d.list[e])?l.children(".ogx_nested_list_item:eq("+e+")").removeClass("ogx_nested_list_item_hidden"):l.children(".ogx_nested_list_item:eq("+e+")").addClass("ogx_nested_list_item_hidden")}function u(){var i,s;l.children(".ogx_nested_list_item").each(function(e,t){i=(i=$(t)).children(".ogx_nested_list_item_body:first"),s=i.outerHeight(!0),i.attr("data-height",s)})}function p(e){if(e.hasOwnProperty("scopes"))for(var t=0;t<e.scopes.length;t++)if(-1!==d.scopes.indexOf(e.scopes[t]))return!0;return!1}this._NAME_=OGX.NestedList.NAME,this.el=null,this.setScopes=function(e){d.scopes=e,f()},this.getScopes=function(){return d.scopes},this.updateItem=function(e,t){l.children(".ogx_nested_list_item:eq("+e+")").children(".ogx_nested_list_item_body:first").children(".ogx_nested_list_item_content:first").html(t),u()},this.updateHeight=function(e){var t=$(this).outerHeight(!0);l.find(".ogx_nested_list_item_body:eq("+e+")").attr("height",t+"px")},this.setData=function(e){d.list=e,setTimeout(g,0)},this.addData=function(e){for(var t="",i=0;i<e.length;i++)t+=h(e[i],d.list.length);if(l.append(t),e.length&&e[0].hasOwnProperty("items")){var s=d.list.length;d.list=d.list.concat(e),m(s,d.list.length),u()}},this.getData=function(){return d.list},this.getView=function(e){var t=o.find("index",e,1);if(t){var i=d.core.getCurrentStage();return d.core.getView(i,t.view.container)}},this.enable=function(){d.enabled||a(d.enabled=!0)},this.disable=function(){d.enabled&&a(d.enabled=!1)},this.resetListSelection=function(){if(n.length)for(var e=0;e<n.length;e++)n[e].resetSelection()},this.destroy=function(){d.enabled&&a(!0),function(){if(n.length){for(var e=0;e<n.length;e++)n[e].destroy();n=[]}}(),function(){if(o.length){for(var e=0;e<o.length;e++)d.core.removeFromStage(o[e].view.container);o=new OGX.List}}()},void 0!==OGX.DisplayObject?void 0!==OGX.Templater?(function(){for(var e in i)d.hasOwnProperty(e)||(d[e]=i[e]);void 0!==window.ontouchstart&&(s="touchstart"),t.el=l=$(d.container),l.addClass("ogx_nested_list"),l.attr("data-ogx",_)}(),d.mode!==OGX.NestedList.MODE_DYNAMIC||void 0!==OGX.DynamicList?(setTimeout(g,0),d.enabled&&a(!0)):console.log("%c CRITICAL ERROR - OGX.DynamicList not found! ","background:#222; color: #FF0000")):console.log("%c CRITICAL ERROR - OGX.Templater not found! ","background:#222; color: #FF0000"):console.log("%c CRITICAL ERROR - OGX.DisplayObject not found! ","background:#222; color: #FF0000")},OGX.NestedList.NAME="OgxNestedList",OGX.NestedList.OPEN="NestedListOpen",OGX.NestedList.CLOSE="NestedListClose",OGX.NestedList.OPENED="NestedListOpened",OGX.NestedList.CLOSED="NestedListClosed",OGX.NestedList.READY="NestedListReady";