if(void 0===OGX)var OGX=function(){};OGX.NestedList=function(t){"use strict";var n,e=this,s={scopes:["public"],set_heights_timeout:0,action_timeout:30,enabled:!0,template:'<div class="ogx_nested_list_item"><div class="ogx_nested_list_item_head {{$css}}"><span class="ogx_nested_list_item_title">{{$title}}</span></div><div class="ogx_nested_list_item_body"><span class="ogx_nested_list_item_content">{{$body}}</span></div></div>',display:null,key:null,list_mode:OGX.DynamicList.SELECT_MODE_SINGLE},d=t,a=[],i="mousedown";function o(t){t?n.on(i,".ogx_nested_list_item_head",function(t){var e=$(this).next(),s=$(this).parent(0).index();if(e.removeClass("ogx_nested_list_item_body_anim_in"),e.removeClass("ogx_nested_list_item_body_anim_out"),$(this).hasClass("ogx_nested_list_item_head_closed")){var i=e.data("height");e.addClass("ogx_nested_list_item_body_anim_in"),setTimeout(function(){e.css("max-height",i)},d.action_timeout),$(this).removeClass("ogx_nested_list_item_head_closed"),$(this).addClass("ogx_nested_list_item_head_open"),n.trigger(OGX.NestedList.OPEN,d.data[s])}else{i=e.height();e.data("height",i+"px"),e.addClass("ogx_nested_list_item_body_anim_out"),setTimeout(function(){e.css("max-height","0px")},d.action_timeout),$(this).addClass("ogx_nested_list_item_head_closed"),$(this).removeClass("ogx_nested_list_item_head_open"),n.trigger(OGX.NestedList.CLOSE,d.data[s])}e.on("transitionend",function(){e.off("transitionend"),e.hasClass("ogx_nested_list_item_body_anim_in")?n.trigger(OGX.NestedList.OPENED,d.data[s]):n.trigger(OGX.NestedList.CLOSED,d.data[s])})}):n.off(i,".ogx_nested_list_item_head")}function _(){n.empty(),n.css({position:"absolute",top:-1e4,visibility:"hidden",display:"block"});for(var t="",e=!1,s=0;s<d.data.length;s++)d.data[s].css="ogx_nested_list_item_head_open",d.data[s].hasOwnProperty("items")&&(e=!(d.data[s].body="")),t+=OGX.Templater.templatize(d.data[s],d.template);n.html(t),e&&l(0,d.data.length),setTimeout(function(){c(),function(){for(var t,e=0;e<d.data.length;e++)d.data[e].open||((t=n.children(".ogx_nested_list_item:eq("+e+")").children(".ogx_nested_list_item_head:first")).addClass("ogx_nested_list_item_head_closed"),t.next().css("max-height","0px"))}(),h(),n.css({position:"static",visibility:"visible"}),n.trigger(OGX.NestedList.READY)},d.set_heights_timeout)}function l(t,e){for(var s,i=t;i<e;i++)d.data[i].hasOwnProperty("items")&&(s=n.children(".ogx_nested_list_item:eq("+i+")").children(".ogx_nested_list_item_body:first").children(".ogx_nested_list_item_content:first"),a[i]=new OGX.DynamicList({container:s[0],display:d.display,key:d.key,mode:d.list_mode,list:d.data[i].items}))}function h(){for(var t=0;t<d.data.length;t++)r(d.data[t])?n.children(".ogx_nested_list_item:eq("+t+")").removeClass("ogx_nested_list_item_hidden"):n.children(".ogx_nested_list_item:eq("+t+")").addClass("ogx_nested_list_item_hidden")}function c(){n.find(".ogx_nested_list_item_body").each(function(t,e){var s=$(this).outerHeight(!0);$(this).data("height",s+"px"),$(this).parent(0).children(".ogx_nested_list_item_head:first").hasClass("ogx_nested_list_item_head_closed")?$(this).css("max-height","0px"):s&&$(this).css("max-height",s+"px")})}function r(t){if(t.hasOwnProperty("scopes"))for(var e=0;e<t.scopes.length;e++)if(-1!==d.scopes.indexOf(t.scopes[e]))return!0;return!1}this._NAME_=OGX.NestedList.NAME,this.el=null,this.setScopes=function(t){d.scopes=t,h()},this.getScopes=function(){return d.scopes},this.updateItem=function(t,e){n.find(".ogx_nested_list_item_content:nth-child("+(t+1)+")").html(e),c()},this.updateHeight=function(t){var e=$(this).outerHeight(!0);n.find(".ogx_nested_list_item_content:eq("+t+")").data("height",e+"px")},this.setData=function(t){d.data=t,_()},this.addData=function(t){for(var e="",s=0;s<t.length;s++)t[s].css="ogx_nested_list_item_head_open",t[s].hasOwnProperty("items")&&(t[s].body=""),e+=OGX.Templater.templatize(t[s],d.template);if(n.append(e),t.length&&t[0].hasOwnProperty("items")){var i=d.data.length;d.data=d.data.concat(t),l(i,d.data.length),c()}},this.getData=function(){return d.data},this.enable=function(){d.enabled||o(d.enabled=!0)},this.disable=function(){d.enabled&&o(d.enabled=!1)},this.resetListSelection=function(){if(a.length)for(var t=0;t<a.length;t++)a[t].resetSelection()},this.destroy=function(){d.enabled&&o(!0),function(){for(var t=0;t<a.length;t++)a[t].destroy();a=[]}()},void 0!==OGX.Templater?(function(){for(var t in s)d.hasOwnProperty(t)||(d[t]=s[t]);void 0!==window.ontouchstart&&(i="touchstart"),e.el=n=$(d.container),n.addClass("ogx_nested_list")}(),d.mode!==OGX.NestedList.MODE_DYNAMIC||void 0!==OGX.DynamicList?(_(),d.enabled&&o(!0)):console.log("%c CRITICAL ERROR - OGX.DynamicList not found! ","background:#222; color: #FF0000")):console.log("%c CRITICAL ERROR - OGX.Templater not found! ","background:#222; color: #FF0000")},OGX.NestedList.NAME="OgxNestedList",OGX.NestedList.OPEN="NestedListOpen",OGX.NestedList.CLOSE="NestedListClose",OGX.NestedList.OPENED="NestedListOpened",OGX.NestedList.CLOSED="NestedListClosed",OGX.NestedList.READY="NestedListReady";