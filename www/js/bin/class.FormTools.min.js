if(void 0===OGX)var OGX=function(){};OGX.FormTools=function(){"use strict";var e={multiline:!1,input_cb:!1,change_cb:!1,val:null,changing:!1,wait:1500,intv:null,prop:null},r={},o={};function l(t){return $(t).serializeArray().map(function(t){return this[t.name]=t.value,this}.bind({}))[0]}this.bindForm=function(n,a,i){void 0===a&&(a=!1),r.hasOwnProperty(n)||(r[n]=a,$(n).on("submit",function(t){t.preventDefault(),t.stopImmediatePropagation();var e={obj:l(n),el:$(n)[0]};a?a(e,i):$(n).trigger("change",e)}))},this.unbindForm=function(t){r.hasOwnProperty(t)&&($(document).off("submit",t),delete r[t])},this.bindField=function(n,t,a){if(!r.hasOwnProperty(n)){var i=function(t,e){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n]);return e}(e,t);i.prop=$(n).attr("name"),r[n]=i,$(n).on("input",function(){if(i.input_cb){var t={value:null,obj:{},el:null};t.el=$(n)[0],t.value=$(this).val(),t.obj[r[n].prop]=$(this).val(),i.input_cb(t,a)}r[n].intv||(r[n].intv=setInterval(function(){!function(t,e){var n=$(t).val(),a=r[t];a.val!==n&&(a.val=n,a.changing=(new Date).getTime());if(a.changing&&(new Date).getTime()>a.wait+a.changing&&(clearInterval(a.intv),a.intv=!1,a.change_cb)){var i={value:null,obj:{},el:null};i.el=$(t)[0],i.value=a.val,i.obj[a.prop]=a.val,a.change_cb(i,e)}}(n,a)},300))}),i.multiline||$(n).on("keypress",function(t){if(13===t.which)if(t.preventDefault(),t.stopImmediatePropagation(),r[n].intv&&(clearInterval(r[n].intv),r[n].intv=null),i.change_cb){var e={value:null,obj:{},el:null};e.el=$(n)[0],e.value=$(this).val(),e.obj[r[n].prop]=$(this).val(),i.change_cb(e,a)}else $(n).trigger("change",$(this).val())})}},this.unbindField=function(t){r.hasOwnProperty(t)&&($(t).off("input"),r[t].multiline||$(t).off("keypress"),r[t].intv&&clearInterval(r[t].intv),delete r[t])},this.restrictField=function(n,t){var e={allowed:/^[a-z0-9\\!\\.\\?\\#\\@\\$\\-\\:\\(\\)\\/_,;%'"â€™ ]$/gi,forbidden:!1,paste:!0,autocomplete:!0,multiline:!0,max:2500};if(void 0===t&&(t={}),t.hasOwnProperty("forbidden")&&(e.allowed=!1),!o.hasOwnProperty(n)){if(void 0===t)t=e;else for(var a in e)t.hasOwnProperty(a)||(t[a]=e[a]);var i=$(n);i.attr("pattern")&&(t.allowed=i.attr("pattern").replace(/{[0-9,]+}/,"")),o[n]=t,o[n].keys=[],t.autocomplete?t.hasOwnProperty("allowed")&&t.allowed&&(t.allowed=new RegExp(t.allowed.toString().replace("$/gi","+$").replace("/^","^"),"gi")):o[n].keys.push(229),-1!==["input","texarea"].indexOf(i.get(0).tagName.toLowerCase())?o[n].content="val":o[n].content="html",o[n].multiline||o[n].keys.push(13),i.on("textInput keydown",function(t){if("textInput"===t.type){var e=t.originalEvent.data;if(o[n].allowed){if(!e.match(o[n].allowed))return t.preventDefault(),t.stopImmediatePropagation(),!1}else if(o[n].forbidden&&e.match(o[n].forbidden))return t.preventDefault(),t.stopImmediatePropagation(),!1}if("keydown"===t.type){if(-1!==o[n].keys.indexOf(t.which))return t.preventDefault(),t.stopImmediatePropagation(),!1;if($(this)[o[n].content]().length>=o[n].max&&8!==t.which)return t.preventDefault(),t.stopImmediatePropagation(),!1}}),o[n].paste||i.on("paste",function(t){t.preventDefault(),t.stopImmediatePropagation()})}},this.unrestrictField=function(t){if(o.hasOwnProperty(t)){var e=$(t);e.off("textInput keydown"),o[t].paste||e.off("paste"),delete o[t]}},this.formToObj=function(t){return l(t)},this.populateForm=function(t,n){var a;$(t).find("input").each(function(t,e){a=$(e).attr("name"),n.hasOwnProperty(a)&&$(e).val(n[a])})},this.validateForm=function(t){var n,a,i,e=$(t),r={},o=!0;return e.find("input").each(function(t,e){n=$(e),e.hasAttribute("required")&&e.hasAttribute("pattern")&&"submit"!==n.attr("type")&&(a=n.attr("pattern"),i=n.val(),a&&((a=new RegExp(a,"g")).test(i)||(r[n.attr("name")]=!1,o=!1)))}),!!o||r}},OGX.FormTools=new OGX.FormTools;