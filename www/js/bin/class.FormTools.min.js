if("undefined"==typeof OGX)var OGX=function(){};OGX.prototype.FormTools=function(){"use strict";function t(t){return $(t).serializeArray().map(function(t){return this[t.name]=t.value,this}.bind({}))[0]}function n(t,n){var e=$(t).val(),i=a[t];if(i.val!==e&&(i.val=e,i.changing=(new Date).getTime()),i.changing&&(new Date).getTime()>i.wait+i.changing&&(clearInterval(i.intv),i.intv=!1,i.change_cb)){var o={value:null,obj:{},el:null};o.el=$(t)[0],o.value=i.val,o.obj[i.prop]=i.val,i.change_cb(o,n)}}function e(t,n){for(var e in t)n.hasOwnProperty(e)||(n[e]=t[e]);return n}var i={multiline:!1,input_cb:!1,change_cb:!1,val:null,changing:!1,wait:1500,intv:null,prop:null},a={},o={};this.bindForm=function(n,e,i){"undefined"==typeof e&&(e=!1),a.hasOwnProperty(n)||(a[n]=e,$(n).on("submit",function(a){a.preventDefault(),a.stopImmediatePropagation();var o={obj:t(n),el:$(n)[0]};e?e(o,i):$(n).trigger("change",o)}))},this.unbindForm=function(t){a.hasOwnProperty(t)&&($(document).off("submit",t),delete a[t])},this.bindField=function(t,o,r){if(!a.hasOwnProperty(t)){var l=e(i,o);l.prop=$(t).attr("name"),a[t]=l,$(t).on("input",function(){if(l.input_cb){var e={value:null,obj:{},el:null};e.el=$(t)[0],e.value=$(this).val(),e.obj[a[t].prop]=$(this).val(),l.input_cb(e,r)}a[t].intv||(a[t].intv=setInterval(function(){n(t,r)},300))}),l.multiline||$(t).on("keypress",function(n){if(13===n.which)if(n.preventDefault(),n.stopImmediatePropagation(),a[t].intv&&(clearInterval(a[t].intv),a[t].intv=null),l.change_cb){var e={value:null,obj:{},el:null};e.el=$(t)[0],e.value=$(this).val(),e.obj[a[t].prop]=$(this).val(),l.change_cb(e,r)}else $(t).trigger("change",$(this).val())})}},this.unbindField=function(t){a.hasOwnProperty(t)&&($(t).off("input"),a[t].multiline||$(t).off("keypress"),a[t].intv&&clearInterval(a[t].intv),delete a[t])},this.restrictField=function(t,n){var e={allowed:/^[a-z0-9\\!\\.\\?\\#\\@\\$\\-\\:\\(\\)\\\/_,;%'" ]$/gi,multiline:!0,max:2500};if(!o.hasOwnProperty(t)){if("undefined"==typeof n)n=e;else for(var i in e)n.hasOwnProperty(i)||(n[i]=e[i]);o[t]=n,o[t].keys=[8],["input","texarea"].indexOf($(t).get(0).tagName.toLowerCase())!==-1?o[t].content="val":o[t].content="html",o[t].multiline&&o[t].keys.push(13),$(t).on("keydown",function(n){return n.originalEvent.key.match(o[t].allowed)||o[t].keys.indexOf(n.originalEvent.which)!==-1?$(this)[o[t].content]().length>=o[t].max?(n.preventDefault(),n.stopImmediatePropagation(),!1):void 0:(n.preventDefault(),n.stopImmediatePropagation(),!1)}),$(t).on("paste",function(t){t.preventDefault(),t.stopImmediatePropagation()})}},this.unrestrictField=function(t){o.hasOwnProperty(t)&&(delete o[t],$(t).off("keydown"),$(t).off("paste"))},this.formToObj=function(n){return t(n)},this.validateForm=function(t){var n,e,i,a=$(t),o={},r=!0;return a.find("input").each(function(t,a){n=$(a),a.hasAttribute("required")&&a.hasAttribute("pattern")&&"submit"!==n.attr("type")&&(e=n.attr("pattern"),i=n.val(),e&&(e=new RegExp(e,"g"),e.test(i)||(o[n.attr("name")]=!1,r=!1)))}),!!r||o}},OGX.FormTools=new OGX.prototype.FormTools;