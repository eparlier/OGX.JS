if(void 0===OGX)var OGX=function(){};OGX.Calendar.Helpers.DataHelper=function(){},OGX.Calendar.Helpers.DataHelper.getDay=function(r,e){"use strict";var a,n,t,i,u,l={},c=r.weekday();for(t in e.calendar.recurring)if((a=t.split("_"))[0]=moment(a[0]+" 00:00:00").unix(),a[1]=moment(a[1]+" 23:59:59").unix(),(n=r.unix())>=a[0]&&n<=a[1]&&e.calendar.recurring[t].hasOwnProperty(c))for(i in e.calendar.recurring[t][c]){l.hasOwnProperty(i)||(l[i]=[]);for(var d=0;d<e.calendar.recurring[t][c][i].length;d++)(u=e.calendar.recurring[t][c][i][d]).calendar={type:"recurring",weekday:c},l[i].push(u)}var p=r.format("YYYY-MM-DD");if(e.calendar.unique.hasOwnProperty(p))for(i in e.calendar.unique[p]){l.hasOwnProperty(i)||(l[i]=[]);for(d=0;d<e.calendar.unique[p][i].length;d++)(u=e.calendar.unique[p][i][d]).calendar={type:"unique",date:p},l[i].push(u)}return l},OGX.Calendar.Helpers.DataHelper.getAptTotal=function(r,e){"use strict";var a,n,t,i,u=[],l=r.weekday();for(t in e.calendar.recurring)if((a=t.split("_"))[0]=moment(a[0]+" 00:00:00").unix(),a[1]=moment(a[1]+" 23:59:59").unix(),(n=r.unix())>=a[0]&&n<=a[1]&&e.calendar.recurring[t].hasOwnProperty(l))for(i in e.calendar.recurring[t][l])u=u.concat(e.calendar.recurring[t][l][i]);var c=r.format("YYYY-MM-DD");if(e.calendar.unique.hasOwnProperty(c))for(i in e.calendar.unique[c])u=u.concat(e.calendar.unique[c][i]);return u.length},OGX.Calendar.Helpers.DataHelper.genId=function(){"use strict";for(var r=Math.floor((new Date).getTime()/1e3).toString(16);r.length<24;)r+=Math.floor(10*Math.random()).toString();return r},OGX.Calendar.Helpers.DataHelper.addUniqueApt=function(r,e){"use strict";return r.calenda.unique.hasOwnProperty(e.date)||(r.calenda.unique[e.date]={}),r.calenda.unique[e.date].hasOwnProperty(e.start)||(r.calenda.unique[e.date][e.start]=[]),e._id=OGX.Calendar.Helpers.DataHelper.genId(),r.calenda.unique[e.date][e.start].push(e),!0},OGX.Calendar.Helpers.DataHelper.removeUniqueApt=function(r,e){"use strict";return OGX.Calendar.Helpers.DataHelper.removeUniqueAptById(r,e._id)},OGX.Calendar.Helpers.DataHelper.removeUniqueAptById=function(r,e){"use strict";for(var a in r.calendar.unique)for(var n in r.calendar.recurring[a])for(var t=0;t<r.calendar.recurring[a][n].length;t++)if(r.calendar.recurring[a][n][t]._id===e)return r.calendar.recurring[a][n].splice(t,1),!0;return!1},OGX.Calendar.Helpers.DataHelper.updateUniqueApt=function(r,e){"use strict";var a=e._id;return!!OGX.Calendar.Helpers.DataHelper.removeUniqueAptById(r,a)&&OGX.Calendar.Helpers.DataHelper.addUniqueApt(r,e)},OGX.Calendar.Helpers.DataHelper.addRecurringApt=function(r,e){"use strict";for(var a in r.calendar.recurring)return r.calendar.recurring[a].hasOwnProperty(e.weekday)||(r.calendar.recurring[a][String(e.weekday)]={}),r.calendar.recurring[a][String(e.weekday)].hasOwnProperty(e.start)||(r.calendar.recurring[a][String(e.weekday)][e.start]=[]),r.calendar.recurring[a][String(e.weekday)][e.start].push(e),!0;return!1},OGX.Calendar.Helpers.DataHelper.updateRecurringApt=function(r,e){"use strict";var a=e._id;return!!OGX.Calendar.Helpers.DataHelper.removeRecurringAptById(r,a)&&OGX.Calendar.Helpers.DataHelper.addRecurringApt(r,e)},OGX.Calendar.Helpers.DataHelper.removeRecurringApt=function(r,e){"use strict";return OGX.Calendar.Helpers.DataHelper.removeRecurringAptById(r,e._id)},OGX.Calendar.Helpers.DataHelper.removeRecurringAptById=function(r,e){"use strict";for(var a in r.calendar.recurring)for(var n in r.calendar.recurring[a])for(var t in r.calendar.recurring[a][n])for(var i=0;i<r.calendar.recurring[a][n][t].length;i++)if(r.calendar.recurring[a][n][t][i]._id===e._id)return r.calendar.recurring[a][n][t].splice(i,1),!0;return!1};