if(void 0===OGX)var OGX=function(){};OGX.Roulette=function(t){"use strict";var s,c,o,u,l,r,n,d,e,i,h,a,p=this,g=t,f={force_coef:10,time_coef:.1,min_force_pitch:2,value:0,enabled:!0,name:!1,display:!1,key:"value",mode:OGX.Roulette.MODE_REWIND,list:new OGX.List},v={template:!1,html:'<span class="ogx_roulette_block_label">{{$label}}</span>',css:!1},m="object",b="mousedown",x="mouseup",O="mousemove",_=0,y=0;function R(t){return y+t>g.list.length-1?g.list[0]:y+t<0?g.list[g.list.length-1]:g.list[y+t]}function G(t){t?s.on(b,X):s.off(b,X)}function X(t){t.preventDefault(),t.stopImmediatePropagation(),t=N(t),(new Date).getTime(),l=t.pageY,n=t.pageY,w(!0),G(!1),E(!0),k(!0)}function w(t){t?$("body").on(x,D):$("body").off(x,D)}function D(t){var e,n;t.preventDefault(),t.stopImmediatePropagation(),t=N(t),k(!1),E(!1),w(!1),G(!0),(new Date).getTime(),r=t.pageY,e=Math.abs(r-l),u<e&&(e=u),d=l<r?1:-1,n=A(c);var i=Math.round(n/u)*u,a=Math.round(i/u%g.list.length);if(a=a<=0?Math.abs(a):g.list.length-a,y!==a){switch(y=a,m){case"string":g.value=g.list[y];break;case"object":g.value=g.list[y][g.key]}p.el.children('input[name="'+g.name+'"]').val(g.value),p.el.children('input[name="'+g.name+'"]').trigger("change"),p.el.trigger(OGX.Roulette.CHANGE,g.value)}c.css({transition:"all 0.2s ease-out",transform:"translate3D(0px, "+i+"px, 0px)"})}function E(t){t?i=setInterval(C,50):(clearInterval(i),a=0),t?$(document).on(O,M):$(document).off(O,M)}function M(t){t.preventDefault(),t.stopImmediatePropagation(),t=N(t),a=t}function C(){var t,e;a&&(t=(e=a.pageY>n?1:-1)!==d?0:a.pageY-n,n=a.pageY,d=e,c.css({transition:"none",transform:"translate3D(0px, "+(A(c)+t)+"px, 0px)"}))}function k(t){t?e=setInterval(I,10):clearInterval(e)}function I(){var t,e,n;(t=Math.floor((c.position().top+u*d)/(u*g.list.length)*-1))!==_&&(0===c.children('.ogx_roulette_stripe[data-id="'+t+'"]').length&&((e=h.clone()).css("top",t*(u*g.list.length)+"px"),e.attr("data-id",t),c.append(e)),c.children(".ogx_roulette_stripe").each(function(t,e){n=c.position().top+$(e).position().top,(Math.ceil(n+u*g.list.length)<-u||u<n)&&$(e).remove()}),_=t)}function T(){k(!1),c.off("transitionend",T)}function j(){for(var t="",e='<div class="ogx_roulette_stripes">',n=0;n<2;n++){e+='<div class="ogx_roulette_stripe" style="top:'+n*(g.list.length*u)+'px;" data-id="'+n+'">';for(var i=0;i<g.list.length;i++){switch(m){case"string":t=OGX.Templater.templatize({label:g.list[i]},g.display.html());break;case"object":t=g.display.html(g.list[i])}e+='<div class="ogx_roulette_block '+g.display.css(g.list[i])+'" style="width:'+o+"px; height:"+u+"px; line-height:"+u+'px;">'+t+"</div>"}e+="</div>"}if(e+="</div>",g.name)switch(m){case"string":e+='<input type="hidden" name="'+g.name+'" value="'+g.list[y]+'">';break;case"object":e+='<input type="hidden" name="'+g.name+'" value="'+g.list[y][g.key]+'">'}s.html(e),c=s.children(".ogx_roulette_stripes:first"),c.children(".ogx_roulette_stripe:first"),h=(h=c.children(".ogx_roulette_stripe:last")).detach();var a=y*u*-1;c.css({transition:"none",transform:"translate3D(0px, "+a+"px, 0px)"})}function A(t){var e=0;return"none"!==t.css("transform")&&(e=Number(t.css("transform").split(",")[5].split(")")[0])),e}function N(t){return t.hasOwnProperty("originalEvent")&&void 0!==t.originalEvent.changedTouches?t.originalEvent.changedTouches[0]:t}function L(t){switch(m){case"string":return{index:g.list.indexOf(t)};case"object":return g.list.findIndex(g.key,t)}}this._NAME_=OGX.Roulette.NAME,this.el=null,this.val=function(t,e){if(void 0!==t){var n=L(t).index;-1<n&&function(t,e){void 0===e&&(e=!0);c.off("transitionend",T),k(!1),d=-1;var n=A(c),i=Math.round(n/u)*u,a=n-i,s=Math.round(i/u%g.list.length);s=s<=0?Math.abs(s):g.list.length-s;var o=s-t;g.mode===OGX.Roulette.MODE_CLOSEST&&o>g.list.length/2&&(o=-1*(g.list.length-s+t));var l=n+o*u-a,r=20*Math.round(Math.abs(o*u)*g.time_coef);k(!0),c.on("transitionend",T),c.css({transition:"all "+r+"ms ease-out",transform:"translate3D(0px, "+l+"px, 0px)"}),y=t}(n)}else switch(m){case"string":return g.list[y];case"object":return g.list[y][g.key]}},this.loopval=function(t,e){var n=y,i=L(e).index;-1<i&&(y=i);var a=n-i,s=g.time_coef*Math.abs(a+t*g.list.length);k(!0),c.css({transition:"all "+s+"s ease-out",transform:"translate3D(0px, "+(A(c)+(a*u-g.list.length*u*t))+"px, 0px)"}),c.on("transitionend",T)},this.next=function(t){var e,n=R(1);switch(d=1,m){case"string":e=n;break;case"object":e=n[g.key]}this.val(e),g.name&&(this.el.children('input[name="'+g.name+'"]').val(e),this.el.children('input[name="'+g.name+'"]').trigger("change")),void 0!==t&&t&&this.el.trigger(OGX.Roulette.CHANGE,e)},this.prev=function(t){var e,n=R(-1);switch(m){case"string":e=n;break;case"object":e=n[g.key]}this.val(e),g.name&&(this.el.children('input[name="'+g.name+'"]').val(e),this.el.children('input[name="'+g.name+'"]').trigger("change")),void 0!==t&&t&&this.el.trigger(OGX.Roulette.CHANGE,e)},this.setData=function(t,e){g.value=e,g.list=t,y=void 0===e?0:L(e).index,setTimeout(j,0)},this.enable=function(){g.enabled||(g.enabled=!0,s.removeClass("ogx_roulette_disabled"),G(!0))},this.disable=function(){g.enabled&&(g.enabled=!1,s.addClass("ogx_roulette_disabled"),G(!1))},this.destroy=function(){w(!1),G(!1),E(!1),k(!1)},void 0!==OGX.List?void 0!==OGX.Templater?void 0!==OGX.DisplayObject?(function(){for(var t in f)g.hasOwnProperty(t)||(g[t]=f[t]);0<g.list.length&&!g.list.hasOwnProperty("insert")&&(g.list=new OGX.List(g.list)),"string"==typeof g.list[0]&&(m="string"),1===g.list.length&&(g.list[1]=g.list[0]),g.display?g.display=new OGX.DisplayObject(g.display):g.display=new OGX.DisplayObject(v),(s=p.el=$(g.container)).addClass("ogx_roulette"),o=s.width(),u=s.height(),y=L(g.value).index,void 0!==window.ontouchstart&&(b="touchstart",O="touchmove",x="touchend"),g.enabled||s.addClass("ogx_roulette_disabled")}(),j(),g.enabled&&G(!0)):console.log("%c CRITICAL ERROR - OGX.DisplayObject not found! ","background:#222; color: #FF0000"):console.log("%c CRITICAL ERROR - OGX.Templater not found! ","background:#222; color: #FF0000"):console.log("%c CRITICAL ERROR - OGX.List not found! ","background:#222; color: #FF0000")},OGX.Roulette.NAME="OgxRoulette",OGX.Roulette.CHANGE="RouletteChange",OGX.Roulette.MODE_REWIND="RouletteModeRewind",OGX.Roulette.MODE_CLOSEST="RouetteModeClosest";