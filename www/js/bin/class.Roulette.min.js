if(void 0===OGX)var OGX=function(){};OGX.Roulette=function(t){"use strict";var l,o,r,c,p,d,i,u,h,g,e,n,f,a,m=this,v=t,s={force_coef:10,time_coef:.1,min_force_pitch:2,value:0,enabled:!0,name:!1,display:!1,key:"value",list:new OGX.List},b={template:!1,html:'<span class="ogx_roulette_block_label">{{$label}}</span>',css:!1},x="object",_="mousedown",y="mouseup",O="mousemove",G=0;function w(t){return G+t>v.list.length-1?v.list[0]:G+t<0?v.list[v.list.length-1]:v.list[G+t]}function X(t){t?l.on(_,R):l.off(_,R)}function R(t){t.preventDefault(),t.stopImmediatePropagation(),t=N(t),u=(new Date).getTime(),p=t.pageY,i=t.pageY,k(!0),X(!1),T(!0),E(!0)}function k(t){t?$("body").on(y,M):$("body").off(y,M)}function M(t){var e,i,n,a,s;if(t.preventDefault(),t.stopImmediatePropagation(),t=N(t),E(!1),T(!1),k(!1),X(!0),h=(new Date).getTime(),d=t.pageY,e=Math.abs(d-p),c<e&&(e=c),g=p<d?1:-1,i=e/(h-u)*v.force_coef,n=A(o),e=Math.round(n/c)*g*c-n*g,Math.round(i*v.time_coef*100)/100,s=Math.abs(Math.ceil((n+e*g)/(c*v.list.length))),a=Math.abs((Math.abs(n+e*g)-s*c*v.list.length)/c),G!==a){if(G=a,v.name){switch(x){case"string":m.el.children('input[name="'+v.name+'"]').val(v.list[G]);break;case"object":m.el.children('input[name="'+v.name+'"]').val(v.list[G][v.key])}m.el.children('input[name="'+v.name+'"]').trigger("change")}m.el.trigger(OGX.Roulette.CHANGE,v.list[a].value)}o.css({transition:"all 0.2s ease-out",transform:"translate3D(0px, "+(n+e*g)+"px, 0px)"})}function T(t){t?n=setInterval(D,50):(clearInterval(n),a=0),t?$(document).on(O,C):$(document).off(O,C)}function C(t){t.preventDefault(),t.stopImmediatePropagation(),t=N(t),a=t}function D(){var t,e;a&&(t=(e=a.pageY>i?1:-1)!==g?0:a.pageY-i,i=a.pageY,g=e,o.css({transition:"none",transform:"translate3D(0px, "+(A(o)+t)+"px, 0px)"}))}function E(t){t?e=setInterval(I,10):clearInterval(e)}function I(){var t,e,i;(t=Math.floor((o.position().top+c*g)/(c*v.list.length)*-1))!==G&&(0===o.children('.ogx_roulette_stripe[data-id="'+t+'"]').length&&((e=f.clone()).css("top",t*(c*v.list.length)+"px"),e.attr("data-id",t),o.append(e)),o.children(".ogx_roulette_stripe").each(function(t,e){i=o.position().top+$(e).position().top,(Math.ceil(i+c*v.list.length)<-c||c<i)&&$(e).remove()}),G=t)}function j(){for(var t="",e="",i='<div class="ogx_roulette_stripes">',n=0;n<2;n++){i+='<div class="ogx_roulette_stripe" style="top:'+n*(v.list.length*c)+'px;" data-id="'+n+'">';for(var a=0;a<v.list.length;a++){switch(x){case"string":dps=OGX.Templater.templatize({label:v.list[a]},v.display.html);break;case"object":v.display.template?"object"==typeof v.display.template&&(t=OGX.Templater.templatize(v.list[a],OGX.Templater.getTemplate(v.list[a][v.display.template.bind]))):v.display.html&&(t=OGX.Templater.templatize(v.list[a],v.display.html)),v.display.css&&(e="object"==typeof v.display.css?v.list[a][v.display.css.bind]:v.display.css)}i+='<div class="ogx_roulette_block '+e+'" style="width:'+r+"px; height:"+c+"px; line-height:"+c+'px;">'+t+"</div>"}i+="</div>"}if(i+="</div>",v.name)switch(x){case"string":i+='<input type="hidden" name="'+v.name+'" value="'+v.list[G]+'">';break;case"object":i+='<input type="hidden" name="'+v.name+'" value="'+v.list[G][v.key]+'">'}l.html(i),o=l.children(".ogx_roulette_stripes:first"),o.children(".ogx_roulette_stripe:first"),f=(f=o.children(".ogx_roulette_stripe:last")).detach();var s=G*c*-1;o.css({transition:"none",transform:"translate3D(0px, "+s+"px, 0px)"})}function A(t){var e=0;return"none"!==t.css("transform")&&(e=Number(t.css("transform").split(",")[5].split(")")[0])),e}function N(t){return t.hasOwnProperty("originalEvent")&&void 0!==t.originalEvent.changedTouches?t.originalEvent.changedTouches[0]:t}function P(t){switch(x){case"string":return{index:v.list.indexOf(t)};case"object":return v.list.findIndex(v.key,t)}}this._NAME_=OGX.Roulette.NAME,this.el=null,this.val=function(t,e){if(void 0!==t){var i=G,n=P(t).index;-1<n&&(G=n),void 0===e&&(e=!0);var a=i-n,s=v.time_coef*Math.abs(a);e?o.css({transition:"all "+s+"s ease-out",transform:"translate3D(0px, "+(A(o)+a*c)+"px, 0px)"}):o.css({transition:"all 0s ease-out",transform:"translate3D(0px, "+(A(o)+a*c)+"px, 0px)"})}else switch(x){case"string":return v.list[G];case"object":return v.list[G][v.key]}},this.loopval=function(t,e){var i=G,n=P(e).index;-1<n&&(G=n);var a=i-n;g=-1;var s=v.time_coef*Math.abs(a+t*v.list.length);E(!0),o.css({transition:"all "+s+"s ease-out",transform:"translate3D(0px, "+(A(o)+(a*c-v.list.length*c*t))+"px, 0px)"}),o.on("transitionend",function t(){E(!1);o.off("transitionend",t)})},this.next=function(){var t,e=w(1);switch(x){case"string":t=e;break;case"object":t=e[v.key]}this.val(t),v.name&&(this.el.children('input[name="'+v.name+'"]').val(t),this.el.children('input[name="'+v.name+'"]').trigger("change")),this.el.trigger(OGX.Roulette.CHANGE,e)},this.prev=function(){var t,e=w(-1);switch(x){case"string":t=e;break;case"object":t=e[v.key]}this.val(t),v.name&&(this.el.children('input[name="'+v.name+'"]').val(t),this.el.children('input[name="'+v.name+'"]').trigger("change")),this.el.trigger(OGX.Roulette.CHANGE,e)},this.setData=function(t){v.list=t,G=0,setTimeout(j,0)},this.enable=function(){v.enabled||(v.enabled=!0,l.removeClass("ogx_roulette_disabled"),X(!0))},this.disable=function(){v.enabled&&(v.enabled=!1,l.addClass("ogx_roulette_disabled"),X(!1))},this.destroy=function(){k(!1),X(!1),T(!1),E(!1)},void 0!==OGX.List?void 0!==OGX.Templater?(function(){for(var t in s)v.hasOwnProperty(t)||(v[t]=s[t]);if(0<v.list.length&&!v.list.hasOwnProperty("insert")&&(v.list=new OGX.List(v.list)),"string"==typeof v.list[0]&&(x="string"),1===v.list.length&&(v.list[1]=v.list[0]),v.display)for(var t in b)v.display.hasOwnProperty(t)||(v[t]=b[t]);else v.display=b;(l=m.el=$(v.container)).addClass("ogx_roulette"),r=l.width(),c=l.height(),G=P(v.value).index,void 0!==window.ontouchstart&&(_="touchstart",O="touchmove",y="touchend"),v.enabled||l.addClass("ogx_roulette_disabled")}(),j(),v.enabled&&X(!0)):console.log("%c CRITICAL ERROR - OGX.Templater not found! ","background:#222; color: #FF0000"):console.log("%c CRITICAL ERROR - OGX.List not found! ","background:#222; color: #FF0000")},OGX.Roulette.NAME="OgxRoulette",OGX.Roulette.CHANGE="RouletteChange";