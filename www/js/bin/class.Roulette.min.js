if(void 0===OGX)var OGX=function(){};OGX.Roulette=function(t){"use strict";var s,l,o,r,c,d,n,u,e,i,h,a,p=this,g=t,f={force_coef:10,time_coef:.1,min_force_pitch:2,value:0,enabled:!0,name:!1,display:!1,key:"value",list:new OGX.List},v={template:!1,html:'<span class="ogx_roulette_block_label">{{$label}}</span>',css:!1},m="object",b="mousedown",x="mouseup",_="mousemove",O=0,y=0;function G(t){return y+t>g.list.length-1?g.list[0]:y+t<0?g.list[g.list.length-1]:g.list[y+t]}function w(t){t?s.on(b,R):s.off(b,R)}function R(t){t.preventDefault(),t.stopImmediatePropagation(),t=L(t),(new Date).getTime(),c=t.pageY,n=t.pageY,X(!0),w(!1),C(!0),I(!0)}function X(t){t?$("body").on(x,k):$("body").off(x,k)}function k(t){var e,n,i,a,s;if(t.preventDefault(),t.stopImmediatePropagation(),t=L(t),I(!1),C(!1),X(!1),w(!0),(new Date).getTime(),d=t.pageY,e=Math.abs(d-c),r<e&&(e=r),u=c<d?1:-1,n=N(l),e=Math.round(n/r)*u*r-n*u,a=Math.abs(Math.ceil((n+e*u)/(r*g.list.length))),i=Math.abs((Math.abs(n+e*u)-a*r*g.list.length)/r),y!==i){switch(y=i,m){case"string":s=g.list[i];break;case"object":s=g.list[i][g.key]}p.el.children('input[name="'+g.name+'"]').val(s),p.el.children('input[name="'+g.name+'"]').trigger("change"),p.el.trigger(OGX.Roulette.CHANGE,s)}j(i)}function C(t){t?i=setInterval(D,50):(clearInterval(i),a=0),t?$(document).on(_,M):$(document).off(_,M)}function M(t){t.preventDefault(),t.stopImmediatePropagation(),t=L(t),a=t}function D(){var t,e;a&&(t=(e=a.pageY>n?1:-1)!==u?0:a.pageY-n,n=a.pageY,u=e,l.css({transition:"none",transform:"translate3D(0px, "+(N(l)+t)+"px, 0px)"}))}function I(t){t?e=setInterval(E,10):clearInterval(e)}function E(){var t,e,n;(t=Math.floor((l.position().top+r*u)/(r*g.list.length)*-1))!==O&&(0===l.children('.ogx_roulette_stripe[data-id="'+t+'"]').length&&((e=h.clone()).css("top",t*(r*g.list.length)+"px"),e.attr("data-id",t),l.append(e)),l.children(".ogx_roulette_stripe").each(function(t,e){n=l.position().top+$(e).position().top,(Math.ceil(n+r*g.list.length)<-r||r<n)&&$(e).remove()}),O=t)}function j(t,e){void 0===e&&(e=!0),u=-1;var n=N(l),i=(Math.abs(n%(g.list.length*r)/r)-t)*r*-1,a=20*Math.round(Math.abs(i)*g.time_coef);l.css({transition:"all "+a+"ms ease-out",transform:"translate3D(0px, "+(n+i*u)+"px, 0px)"}),y=t}function T(){I(!1),l.off("transitionend",T)}function A(){for(var t="",e='<div class="ogx_roulette_stripes">',n=0;n<2;n++){e+='<div class="ogx_roulette_stripe" style="top:'+n*(g.list.length*r)+'px;" data-id="'+n+'">';for(var i=0;i<g.list.length;i++){switch(m){case"string":t=OGX.Templater.templatize({label:g.list[i]},g.display.html());break;case"object":t=g.display.html(g.list[i])}e+='<div class="ogx_roulette_block '+g.display.css(g.list[i])+'" style="width:'+o+"px; height:"+r+"px; line-height:"+r+'px;">'+t+"</div>"}e+="</div>"}if(e+="</div>",g.name)switch(m){case"string":e+='<input type="hidden" name="'+g.name+'" value="'+g.list[y]+'">';break;case"object":e+='<input type="hidden" name="'+g.name+'" value="'+g.list[y][g.key]+'">'}s.html(e),l=s.children(".ogx_roulette_stripes:first"),l.children(".ogx_roulette_stripe:first"),h=(h=l.children(".ogx_roulette_stripe:last")).detach();var a=y*r*-1;l.css({transition:"none",transform:"translate3D(0px, "+a+"px, 0px)"})}function N(t){var e=0;return"none"!==t.css("transform")&&(e=Number(t.css("transform").split(",")[5].split(")")[0])),e}function L(t){return t.hasOwnProperty("originalEvent")&&void 0!==t.originalEvent.changedTouches?t.originalEvent.changedTouches[0]:t}function F(t){switch(m){case"string":return{index:g.list.indexOf(t)};case"object":return g.list.findIndex(g.key,t)}}this._NAME_=OGX.Roulette.NAME,this.el=null,this.val=function(t,e){if(void 0!==t){var n=F(t).index;-1<n&&j(n)}else switch(m){case"string":return g.list[y];case"object":return g.list[y][g.key]}},this.loopval=function(t,e){var n=y,i=F(e).index;-1<i&&(y=i);var a=n-i;u=-1;var s=g.time_coef*Math.abs(a+t*g.list.length);I(!0),l.css({transition:"all "+s+"s ease-out",transform:"translate3D(0px, "+(N(l)+(a*r-g.list.length*r*t))+"px, 0px)"}),l.on("transitionend",T)},this.next=function(t){var e,n=G(1);switch(m){case"string":e=n;break;case"object":e=n[g.key]}this.val(e),g.name&&(this.el.children('input[name="'+g.name+'"]').val(e),this.el.children('input[name="'+g.name+'"]').trigger("change")),void 0!==t&&t&&this.el.trigger(OGX.Roulette.CHANGE,e)},this.prev=function(t){var e,n=G(-1);switch(m){case"string":e=n;break;case"object":e=n[g.key]}this.val(e),g.name&&(this.el.children('input[name="'+g.name+'"]').val(e),this.el.children('input[name="'+g.name+'"]').trigger("change")),void 0!==t&&t&&this.el.trigger(OGX.Roulette.CHANGE,e)},this.setData=function(t,e){g.value=e,g.list=t,y=void 0===e?0:F(e).index,setTimeout(A,0)},this.enable=function(){g.enabled||(g.enabled=!0,s.removeClass("ogx_roulette_disabled"),w(!0))},this.disable=function(){g.enabled&&(g.enabled=!1,s.addClass("ogx_roulette_disabled"),w(!1))},this.destroy=function(){X(!1),w(!1),C(!1),I(!1)},void 0!==OGX.List?void 0!==OGX.Templater?void 0!==OGX.DisplayObject?(function(){for(var t in f)g.hasOwnProperty(t)||(g[t]=f[t]);0<g.list.length&&!g.list.hasOwnProperty("insert")&&(g.list=new OGX.List(g.list)),"string"==typeof g.list[0]&&(m="string"),1===g.list.length&&(g.list[1]=g.list[0]),g.display?g.display=new OGX.DisplayObject(g.display):g.display=new OGX.DisplayObject(v),(s=p.el=$(g.container)).addClass("ogx_roulette"),o=s.width(),r=s.height(),y=F(g.value).index,void 0!==window.ontouchstart&&(b="touchstart",_="touchmove",x="touchend"),g.enabled||s.addClass("ogx_roulette_disabled")}(),A(),g.enabled&&w(!0)):console.log("%c CRITICAL ERROR - OGX.DisplayObject not found! ","background:#222; color: #FF0000"):console.log("%c CRITICAL ERROR - OGX.Templater not found! ","background:#222; color: #FF0000"):console.log("%c CRITICAL ERROR - OGX.List not found! ","background:#222; color: #FF0000")},OGX.Roulette.NAME="OgxRoulette",OGX.Roulette.CHANGE="RouletteChange";