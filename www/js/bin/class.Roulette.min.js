if(void 0===OGX)var OGX=function(){};OGX.Roulette=function(t){"use strict";var s,l,o,r,c,u,n,d,p,h,e,i,g,a,f=this,m=t,v={force_coef:10,time_coef:.1,min_force_pitch:2,value:0,enabled:!0,name:!1,display:!1,key:"value",list:new OGX.List},b={template:!1,html:'<span class="ogx_roulette_block_label">{{$label}}</span>',css:!1},x="object",_="mousedown",O="mouseup",y="mousemove",G=0;function w(t){return G+t>m.list.length-1?m.list[0]:G+t<0?m.list[m.list.length-1]:m.list[G+t]}function R(t){t?s.on(_,X):s.off(_,X)}function X(t){t.preventDefault(),t.stopImmediatePropagation(),t=N(t),d=(new Date).getTime(),c=t.pageY,n=t.pageY,k(!0),R(!1),C(!0),E(!0)}function k(t){t?$("body").on(O,D):$("body").off(O,D)}function D(t){var e,n,i,a,s;if(t.preventDefault(),t.stopImmediatePropagation(),t=N(t),E(!1),C(!1),k(!1),R(!0),p=(new Date).getTime(),u=t.pageY,e=Math.abs(u-c),r<e&&(e=r),h=c<u?1:-1,n=e/(p-d)*m.force_coef,i=A(l),e=Math.round(i/r)*h*r-i*h,Math.round(n*m.time_coef*100)/100,s=Math.abs(Math.ceil((i+e*h)/(r*m.list.length))),a=Math.abs((Math.abs(i+e*h)-s*r*m.list.length)/r),G!==a){if(G=a,m.name){switch(x){case"string":f.el.children('input[name="'+m.name+'"]').val(m.list[G]);break;case"object":f.el.children('input[name="'+m.name+'"]').val(m.list[G][m.key])}f.el.children('input[name="'+m.name+'"]').trigger("change")}f.el.trigger(OGX.Roulette.CHANGE,m.list[a].value)}l.css({transition:"all 0.2s ease-out",transform:"translate3D(0px, "+(i+e*h)+"px, 0px)"})}function C(t){t?i=setInterval(M,50):(clearInterval(i),a=0),t?$(document).on(y,I):$(document).off(y,I)}function I(t){t.preventDefault(),t.stopImmediatePropagation(),t=N(t),a=t}function M(){var t,e;a&&(t=(e=a.pageY>n?1:-1)!==h?0:a.pageY-n,n=a.pageY,h=e,l.css({transition:"none",transform:"translate3D(0px, "+(A(l)+t)+"px, 0px)"}))}function E(t){t?e=setInterval(j,10):clearInterval(e)}function j(){var t,e,n;(t=Math.floor((l.position().top+r*h)/(r*m.list.length)*-1))!==G&&(0===l.children('.ogx_roulette_stripe[data-id="'+t+'"]').length&&((e=g.clone()).css("top",t*(r*m.list.length)+"px"),e.attr("data-id",t),l.append(e)),l.children(".ogx_roulette_stripe").each(function(t,e){n=l.position().top+$(e).position().top,(Math.ceil(n+r*m.list.length)<-r||r<n)&&$(e).remove()}),G=t)}function T(){for(var t="",e='<div class="ogx_roulette_stripes">',n=0;n<2;n++){e+='<div class="ogx_roulette_stripe" style="top:'+n*(m.list.length*r)+'px;" data-id="'+n+'">';for(var i=0;i<m.list.length;i++){switch(x){case"string":dps=OGX.Templater.templatize({label:m.list[i]},m.display.html);break;case"object":t=m.display.html(m.list[i])}e+='<div class="ogx_roulette_block '+m.display.css(m.list[i])+'" style="width:'+o+"px; height:"+r+"px; line-height:"+r+'px;">'+t+"</div>"}e+="</div>"}if(e+="</div>",m.name)switch(x){case"string":e+='<input type="hidden" name="'+m.name+'" value="'+m.list[G]+'">';break;case"object":e+='<input type="hidden" name="'+m.name+'" value="'+m.list[G][m.key]+'">'}s.html(e),l=s.children(".ogx_roulette_stripes:first"),l.children(".ogx_roulette_stripe:first"),g=(g=l.children(".ogx_roulette_stripe:last")).detach();var a=G*r*-1;l.css({transition:"none",transform:"translate3D(0px, "+a+"px, 0px)"})}function A(t){var e=0;return"none"!==t.css("transform")&&(e=Number(t.css("transform").split(",")[5].split(")")[0])),e}function N(t){return t.hasOwnProperty("originalEvent")&&void 0!==t.originalEvent.changedTouches?t.originalEvent.changedTouches[0]:t}function L(t){switch(x){case"string":return{index:m.list.indexOf(t)};case"object":return m.list.findIndex(m.key,t)}}this._NAME_=OGX.Roulette.NAME,this.el=null,this.val=function(t,e){if(void 0!==t){var n=G,i=L(t).index;-1<i&&(G=i),void 0===e&&(e=!0);var a=n-i,s=m.time_coef*Math.abs(a);e?l.css({transition:"all "+s+"s ease-out",transform:"translate3D(0px, "+(A(l)+a*r)+"px, 0px)"}):l.css({transition:"all 0s ease-out",transform:"translate3D(0px, "+(A(l)+a*r)+"px, 0px)"})}else switch(x){case"string":return m.list[G];case"object":return m.list[G][m.key]}},this.loopval=function(t,e){var n=G,i=L(e).index;-1<i&&(G=i);var a=n-i;h=-1;var s=m.time_coef*Math.abs(a+t*m.list.length);E(!0),l.css({transition:"all "+s+"s ease-out",transform:"translate3D(0px, "+(A(l)+(a*r-m.list.length*r*t))+"px, 0px)"}),l.on("transitionend",function t(){E(!1);l.off("transitionend",t)})},this.next=function(){var t,e=w(1);switch(x){case"string":t=e;break;case"object":t=e[m.key]}this.val(t),m.name&&(this.el.children('input[name="'+m.name+'"]').val(t),this.el.children('input[name="'+m.name+'"]').trigger("change")),this.el.trigger(OGX.Roulette.CHANGE,t)},this.prev=function(){var t,e=w(-1);switch(x){case"string":t=e;break;case"object":t=e[m.key]}this.val(t),m.name&&(this.el.children('input[name="'+m.name+'"]').val(t),this.el.children('input[name="'+m.name+'"]').trigger("change")),this.el.trigger(OGX.Roulette.CHANGE,t)},this.setData=function(t){m.list=t,G=0,setTimeout(T,0)},this.enable=function(){m.enabled||(m.enabled=!0,s.removeClass("ogx_roulette_disabled"),R(!0))},this.disable=function(){m.enabled&&(m.enabled=!1,s.addClass("ogx_roulette_disabled"),R(!1))},this.destroy=function(){k(!1),R(!1),C(!1),E(!1)},void 0!==OGX.List?void 0!==OGX.Templater?void 0!==OGX.DisplayObject?(function(){for(var t in v)m.hasOwnProperty(t)||(m[t]=v[t]);0<m.list.length&&!m.list.hasOwnProperty("insert")&&(m.list=new OGX.List(m.list)),"string"==typeof m.list[0]&&(x="string"),1===m.list.length&&(m.list[1]=m.list[0]),m.display?m.display=new OGX.DisplayObject(m.display):m.display=new OGX.DisplayObject(b),(s=f.el=$(m.container)).addClass("ogx_roulette"),o=s.width(),r=s.height(),G=L(m.value).index,void 0!==window.ontouchstart&&(_="touchstart",y="touchmove",O="touchend"),m.enabled||s.addClass("ogx_roulette_disabled")}(),T(),m.enabled&&R(!0)):console.log("%c CRITICAL ERROR - OGX.DisplayObject not found! ","background:#222; color: #FF0000"):console.log("%c CRITICAL ERROR - OGX.Templater not found! ","background:#222; color: #FF0000"):console.log("%c CRITICAL ERROR - OGX.List not found! ","background:#222; color: #FF0000")},OGX.Roulette.NAME="OgxRoulette",OGX.Roulette.CHANGE="RouletteChange";