if(void 0===OGX)var OGX=function(){};OGX.Roulette=function(t){"use strict";var s,l,o,r,c,d,n,u,h,p,e,i,g,a,f=this,m=t,v={force_coef:10,time_coef:.1,min_force_pitch:2,value:0,enabled:!0,name:!1,display:!1,key:"value",list:new OGX.List},b={template:!1,html:'<span class="ogx_roulette_block_label">{{$label}}</span>',css:!1},x="object",_="mousedown",O="mouseup",y="mousemove",G=0,w=0;function R(t){return w+t>m.list.length-1?m.list[0]:w+t<0?m.list[m.list.length-1]:m.list[w+t]}function X(t){t?s.on(_,k):s.off(_,k)}function k(t){t.preventDefault(),t.stopImmediatePropagation(),t=F(t),u=(new Date).getTime(),c=t.pageY,n=t.pageY,M(!0),X(!1),D(!0),j(!0)}function M(t){t?$("body").on(O,C):$("body").off(O,C)}function C(t){var e,n,i,a,s,o;if(t.preventDefault(),t.stopImmediatePropagation(),t=F(t),j(!1),D(!1),M(!1),X(!0),h=(new Date).getTime(),d=t.pageY,e=Math.abs(d-c),r<e&&(e=r),p=c<d?1:-1,n=e/(h-u)*m.force_coef,i=L(l),e=Math.round(i/r)*p*r-i*p,Math.round(n*m.time_coef*100)/100,s=Math.abs(Math.ceil((i+e*p)/(r*m.list.length))),a=Math.abs((Math.abs(i+e*p)-s*r*m.list.length)/r),w!==a){switch(w=a,x){case"string":o=m.list[a];break;case"object":o=m.list[a][m.key]}f.el.children('input[name="'+m.name+'"]').val(o),f.el.children('input[name="'+m.name+'"]').trigger("change"),f.el.trigger(OGX.Roulette.CHANGE,o)}l.css({transition:"all 0.2s ease-out",transform:"translate3D(0px, "+(i+e*p)+"px, 0px)"})}function D(t){t?i=setInterval(E,50):(clearInterval(i),a=0),t?$(document).on(y,I):$(document).off(y,I)}function I(t){t.preventDefault(),t.stopImmediatePropagation(),t=F(t),a=t}function E(){var t,e;a&&(t=(e=a.pageY>n?1:-1)!==p?0:a.pageY-n,n=a.pageY,p=e,l.css({transition:"none",transform:"translate3D(0px, "+(L(l)+t)+"px, 0px)"}))}function j(t){t?e=setInterval(T,10):clearInterval(e)}function T(){var t,e,n;(t=Math.floor((l.position().top+r*p)/(r*m.list.length)*-1))!==G&&(0===l.children('.ogx_roulette_stripe[data-id="'+t+'"]').length&&((e=g.clone()).css("top",t*(r*m.list.length)+"px"),e.attr("data-id",t),l.append(e)),l.children(".ogx_roulette_stripe").each(function(t,e){n=l.position().top+$(e).position().top,(Math.ceil(n+r*m.list.length)<-r||r<n)&&$(e).remove()}),G=t)}function A(){j(!1),l.off("transitionend",A)}function N(){for(var t="",e='<div class="ogx_roulette_stripes">',n=0;n<2;n++){e+='<div class="ogx_roulette_stripe" style="top:'+n*(m.list.length*r)+'px;" data-id="'+n+'">';for(var i=0;i<m.list.length;i++){switch(x){case"string":t=OGX.Templater.templatize({label:m.list[i]},m.display.html());break;case"object":t=m.display.html(m.list[i])}e+='<div class="ogx_roulette_block '+m.display.css(m.list[i])+'" style="width:'+o+"px; height:"+r+"px; line-height:"+r+'px;">'+t+"</div>"}e+="</div>"}if(e+="</div>",m.name)switch(x){case"string":e+='<input type="hidden" name="'+m.name+'" value="'+m.list[w]+'">';break;case"object":e+='<input type="hidden" name="'+m.name+'" value="'+m.list[w][m.key]+'">'}s.html(e),l=s.children(".ogx_roulette_stripes:first"),l.children(".ogx_roulette_stripe:first"),g=(g=l.children(".ogx_roulette_stripe:last")).detach();var a=w*r*-1;l.css({transition:"none",transform:"translate3D(0px, "+a+"px, 0px)"})}function L(t){var e=0;return"none"!==t.css("transform")&&(e=Number(t.css("transform").split(",")[5].split(")")[0])),e}function F(t){return t.hasOwnProperty("originalEvent")&&void 0!==t.originalEvent.changedTouches?t.originalEvent.changedTouches[0]:t}function P(t){switch(x){case"string":return{index:m.list.indexOf(t)};case"object":return m.list.findIndex(m.key,t)}}this._NAME_=OGX.Roulette.NAME,this.el=null,this.val=function(t,e){if(void 0!==t){var n=P(t).index;-1<n&&function(t,e){void 0===e&&(e=!0);p=-1;var n=L(l),i=(Math.abs(n%(m.list.length*r)/r)-t)*r*-1,a=20*Math.round(Math.abs(i)*m.time_coef);l.css({transition:"all "+a+"ms ease-out",transform:"translate3D(0px, "+(n+i*p)+"px, 0px)"}),w=t}(n)}else switch(x){case"string":return m.list[w];case"object":return m.list[w][m.key]}},this.loopval=function(t,e){var n=w,i=P(e).index;-1<i&&(w=i);var a=n-i;p=-1;var s=m.time_coef*Math.abs(a+t*m.list.length);j(!0),l.css({transition:"all "+s+"s ease-out",transform:"translate3D(0px, "+(L(l)+(a*r-m.list.length*r*t))+"px, 0px)"}),l.on("transitionend",A)},this.next=function(t){var e,n=R(1);switch(x){case"string":e=n;break;case"object":e=n[m.key]}this.val(e),m.name&&(this.el.children('input[name="'+m.name+'"]').val(e),this.el.children('input[name="'+m.name+'"]').trigger("change")),void 0!==t&&t&&this.el.trigger(OGX.Roulette.CHANGE,e)},this.prev=function(t){var e,n=R(-1);switch(x){case"string":e=n;break;case"object":e=n[m.key]}this.val(e),m.name&&(this.el.children('input[name="'+m.name+'"]').val(e),this.el.children('input[name="'+m.name+'"]').trigger("change")),void 0!==t&&t&&this.el.trigger(OGX.Roulette.CHANGE,e)},this.setData=function(t,e){w=void 0===e?0:P(e).index,m.list=t,setTimeout(N,0)},this.enable=function(){m.enabled||(m.enabled=!0,s.removeClass("ogx_roulette_disabled"),X(!0))},this.disable=function(){m.enabled&&(m.enabled=!1,s.addClass("ogx_roulette_disabled"),X(!1))},this.destroy=function(){M(!1),X(!1),D(!1),j(!1)},void 0!==OGX.List?void 0!==OGX.Templater?void 0!==OGX.DisplayObject?(function(){for(var t in v)m.hasOwnProperty(t)||(m[t]=v[t]);0<m.list.length&&!m.list.hasOwnProperty("insert")&&(m.list=new OGX.List(m.list)),"string"==typeof m.list[0]&&(x="string"),1===m.list.length&&(m.list[1]=m.list[0]),m.display?m.display=new OGX.DisplayObject(m.display):m.display=new OGX.DisplayObject(b),(s=f.el=$(m.container)).addClass("ogx_roulette"),o=s.width(),r=s.height(),w=P(m.value).index,void 0!==window.ontouchstart&&(_="touchstart",y="touchmove",O="touchend"),m.enabled||s.addClass("ogx_roulette_disabled")}(),N(),m.enabled&&X(!0)):console.log("%c CRITICAL ERROR - OGX.DisplayObject not found! ","background:#222; color: #FF0000"):console.log("%c CRITICAL ERROR - OGX.Templater not found! ","background:#222; color: #FF0000"):console.log("%c CRITICAL ERROR - OGX.List not found! ","background:#222; color: #FF0000")},OGX.Roulette.NAME="OgxRoulette",OGX.Roulette.CHANGE="RouletteChange";