if(void 0===OGX)var OGX=function(){};OGX.ViewSwiper=function(e){"use strict";var n,o,r,t,s,i,w,a=this,c=e,v={core:!1,path:"html",views:[],object:"stage",current:0,min_x:100},f=!1,p=!1,h="mousedown",_="mouseup",u="mousemove",d={x:0,y:0},g={x:0,y:0},l=0,x={};function m(e){if(x.hasOwnProperty(e)&&"object"==typeof x[e].object)switch(x[e].object._NAME_){case OGX.Tabs.NAME:x[e].object.el.off(OGX.Tabs.SELECT)}}function b(){if(Math.abs(d.x-g.x)>Math.abs(d.y-g.y))if(t>c.min_x){n.position().left;var e=l+-1*s;if(0<=e&&e<c.views.length)y(i=(l=e)*r*-1,OGX.ViewSwiper.SWIPE,e),function(){for(var e in x)switch(x[e]._NAME_){case OGX.Tabs.NAME:x[e].selectTabAt(c.current)}}()}else if(0<t){var i=l*r*-1+t*s;o.css({transform:"translate3D("+i+"px, 0, 0)"})}}function y(e,i,t){O(!(f=!0)),E(!1),o.addClass("ogx_view_swiper_anim").removeClass("ogx_view_swiper_noanim"),i&&n.trigger(i,t),o.on("transitionend",function(){f=!1,o.off("transitionend"),o.removeClass("ogx_view_swiper_anim"),V(!0)}),o.css({transform:"translate3D("+e+"px, 0, 0)"})}function O(e){e?(S(!0),i=setInterval(b,20)):(S(!1),i&&clearInterval(i))}function V(e){e?n.on(h,function(e){e=G(e),d.x=e.pageX,d.y=e.pageY,s=t=0,o.removeClass("ogx_view_swiper_noanim"),V(!1),O(!0),E(!0)}):n.off(h)}function E(e){e?n.on(_,function(e){var i;f||((i=(i=(i=o.css("transform")).substr(7)).split(","),i=Number(i[4]))!==l*r*-1?y(l*r*-1,OGX.ViewSwiper.RESTORE,l):(O(!1),E(!1),V(!0)))}):n.off(_)}function S(e){e?n.on(u,function(e){e=G(e),g.x=e.pageX,g.y=e.pageY,s=g.x>d.x?1:-1,t=Math.abs(g.x-d.x)}):n.off(u)}function M(e){e?$(window).on("resize",function(){p=!0,clearInterval(w),w=setInterval(X,100),r=Math.floor(n.innerWidth()),n.innerHeight(),o.css("width",Math.round(r*c.views.length)+"px"),o.find(".ogx_view_swiper_view").each(function(e,i){$(i).css("width",r+"px")}),o.addClass("ogx_view_swiper_noanim"),o.css({transform:"translate3D("+r*l*-1+"px, 0, 0)"})}):$(window).off("resize")}function X(){p=!1,clearInterval(w)}function G(e){return e.hasOwnProperty("originalEvent")&&void 0!==e.originalEvent.changedTouches?e.originalEvent.changedTouches[0]:e}this._NAME_=OGX.ViewSwiper.NAME,this.el=null,this.bind=function(e){return function(t){if("object"==typeof t.object)switch((x[t.property]=t).object._NAME_){case OGX.Tabs.NAME:x[t.property].object.el.on(OGX.Tabs.SELECT,function(e,i){console.log("select tab"),a.showView(x[t.property].object.getTabIndex())}),x[t.property].object.el.on(OGX.Tabs.CLOSE,function(e,i){a.removeView(i.index)})}}(e)},this.unbind=function(e){},this.addView=function(e){var i,t=(new Date).getTime()+Math.round(1e3*Math.random());i="object"==typeof e?"":e,n.find(".ogx_view_swiper_views:first").append('<div class="ogx_view ogx_view_swiper_view" style="width:'+r+'px;" data-ogx="'+t+'">'+i+"</div>"),o.css("width",(c.views.length+1)*r+"px"),"object"==typeof e&&c.hasOwnProperty("core")&&c.core&&(e.container='.ogx_view_swiper_view[data-ogx="'+t+'"]',c.core.addView(e)),c.views.push(e),this.showView(c.views.length-1)},this.showView=function(e){if(!f&&0<=e&&e<c.views.length&&!p){var i=e*r*-1;return V(!1),setTimeout(function(){y(i)},0),l=e,!0}return!1},this.getView=function(){return l},this.removeView=function(e){if(0<=e&&e<c.views.length){0<=e-1&&a.showView(e-1);var i=c.views[e];"object"==typeof i&&c.hasOwnProperty("core")&&c.core&&c.core.removeView(i.container),c.views.splice(e,1),o.children(".ogx_view_swiper_view:eq("+e+")").remove(),o.css("width",Math.round(r*c.views.length)+"px")}},this.getPanel=function(e){return void 0===e&&(e=l),n.find(".ogx_view_swiper_views:first").children(".ogx_view_swiper_view:eq("+e+")")[0]},this.destroy=function(){V(!1),E(!1),O(!1),M(!1),function(){for(var e in x)m(e)}(),function(){if(c.core)for(var e=0;e<c.views.length;e++)c.core.removeFromStage(c.views[e].container)}()},function(){for(var e in v)c.hasOwnProperty(e)||(c[e]=v[e]);a.el=n=$(c.container),r=Math.floor(n.innerWidth()),n.innerHeight(),void 0!==window.ontouchstart&&(h="touchstart",u="touchmove",_="touchend")}(),n.html('<div class="ogx_view_swiper_views ogx_hw" style="width:'+Math.round(r*c.views.length)+'px;"></div>'),o=n.find(".ogx_view_swiper_views:first"),function(){for(var e,i,t=[],o=0;o<c.views.length;o++)e=(new Date).getTime()+Math.round(1e3*Math.random()),i="object"==typeof c.views[o]?"":c.views[o],n.find(".ogx_view_swiper_views:first").append('<div class="ogx_view ogx_view_swiper_view" style="width:'+r+'px;" data-ogx="'+e+'">'+i+"</div>"),t.push('.ogx_view_swiper_view[data-ogx="'+e+'"]'),"object"==typeof c.views[o]&&c.hasOwnProperty("core")&&c.core&&(c.views[o].container='.ogx_view_swiper_view[data-ogx="'+e+'"]',c.core.addView(c.views[o]));n.trigger(OGX.ViewSwiper.READY,{containers:t})}(),V(!0),M(!0)},OGX.ViewSwiper.NAME="OgxViewSwiper",OGX.ViewSwiper.READY="ViewSwiperReady",OGX.ViewSwiper.SWIPE="ViewSwiperSwipe",OGX.ViewSwiper.DRAG="ViewSwiperDrag",OGX.ViewSwiper.RESTORE="ViewSwiperRestore";