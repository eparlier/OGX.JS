OGX.Templater=function(){},OGX.Templater.templatize=function(__obj,__template){"use strict";function extract(){reg=new RegExp("{{(((?!(}})).)*)}}","gi");var e=__template.match(reg);if(e)for(var t,a=0;a<e.length;a++)reg=new RegExp("^{{[ ]?([a-z]+) ","gi"),t=e[a].match(reg),t?handleOp(e[a]):handleEcho(e[a])}function handleOp(e){var t=/{{[ ]?([a-z]+)/gi,a=t.exec(e);if(a&&a.length)switch(a[1]){case"loop":handleLoop(e);break;case"calc":handleCalc(e)}}function handleLoop(__op){var html="",reg=/{{[ ]?loop[ ]+((?:\$|@)[a-z0-9_\-\.]+)[ ]+(.*)([ ]+)?}}/gi,match=reg.exec(__op);if(match){var prop=eval("__obj."+match[1].substr(1));if(prop){for(var i=0;i<prop.length;i++)html+=match[2].replace(/\.\$/g,"["+i+"]");html=replace(html),__template=__template.replace(match[0],html)}}}function handleCalc(__op){var html="",s=__op.replace(/{{[ ]?calc/gi,"");s=s.replace(/}/gi,""),s=s.replace(/\@/g,"tmp."),s=s.replace(/\$/g,"__obj.");var r=eval(s);"undefined"!=typeof r&&(__template=__template.replace(__op,""))}function handleEcho(__op){var s=__op.replace(/{|}/gi,"");s=s.replace(/\@/g,"tmp."),s=s.replace(/\$/g,"__obj.");var r=eval(s);"undefined"!=typeof r&&(__template=__template.replace(__op,r))}function replace(__html){var reg=new RegExp("((\\$|@)[a-z0-9_\\-\\[\\]\\.]+)","gi"),match=__html.match(reg),s,r;if(match){for(var i=0;i<match.length;i++)s=match[i].replace(/\$/g,"__obj."),s=s.replace(/\@/g,"tmp."),r=eval(s),"undefined"!=typeof r&&(__html=__html.replace(match[i],r));return __html}return!1}var reg,tmp={};return extract(__template),__template},OGX.Templater.loadTemplates=function(e,t){"use strict";function a(e,t){$("<div></div>").load(e[0].file,function(l){r.templates[e[0].name]=l,$(document).trigger(OGX.Templater.TEMPLATE_LOADED,{name:e[0].name,html:l}),e.splice(0,1),e.length?setTimeout(function(){a(e,t)},0):t?t():$(document).trigger(OGX.Templater.TEMPLATES_LOADED)})}var r=this;this.templates={},"undefined"==typeof t&&(t=!1),setTimeout(function(){a(e,t)},0),this.getTemplate=function(e){return!!this.templates.hasOwnProperty(e)&&this.templates[e]}},OGX.Templater.TEMPLATE_LOADED="Templater_TEMPLATE_LOADED",OGX.Templater.TEMPLATES_LOADED="Templater_TEMPLATES_LOADED";