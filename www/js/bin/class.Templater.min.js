OGX.Templater=function(){},OGX.Templater.templatize=function(__obj,__template){function extract(){reg=new RegExp("{{(((?!(}})).)*)}}","gi");var e=__template.match(reg);if(e)for(var a,t=0;t<e.length;t++)reg=new RegExp("^{{[ ]?([a-z]+) ","gi"),a=e[t].match(reg),a?handleOp(e[t]):handleEcho(e[t])}function handleOp(e){var a=/{{[ ]?([a-z]+)/gi,t=a.exec(e);if(t&&t.length)switch(t[1]){case"loop":handleLoop(e);break;case"calc":handleCalc(e)}}function handleLoop(__op){var html="",reg=/{{[ ]?loop[ ]+((?:\$|@)[a-z0-9_\-]+)[ ]+(.*)([ ]+)?}}/gi,match=reg.exec(__op);if(match){var prop=eval("__obj."+match[1].substr(1));if(prop){for(var i=0;i<prop.length;i++)html+=match[2].replace(/\.\$/g,"["+i+"]");html=replace(html),__template=__template.replace(match[0],html)}}}function handleCalc(__op){var html="",s=__op.replace(/{{[ ]?calc/gi,"");s=s.replace(/}/gi,""),s=s.replace(/\@/g,"tmp."),s=s.replace(/\$/g,"__obj.");var r=eval(s);"undefined"!=typeof r&&(__template=__template.replace(__op,""))}function handleEcho(__op){var s=__op.replace(/{|}/gi,"");s=s.replace(/\@/g,"tmp."),s=s.replace(/\$/g,"__obj.");var r=eval(s);"undefined"!=typeof r&&(__template=__template.replace(__op,r))}function replace(__html){var reg=new RegExp("((\\$|@)[a-z0-9_\\-\\[\\]\\.]+)","gi"),match=__html.match(reg),s,r;if(match){for(var i=0;i<match.length;i++)s=match[i].replace(/\$/g,"__obj."),s=s.replace(/\@/g,"tmp."),r=eval(s),"undefined"!=typeof r&&(__html=__html.replace(match[i],r));return __html}return!1}var reg,tmp={};return extract(__template),__template};