if(void 0===OGX)var OGX=function(){};OGX.Popup=function(o){"use strict";var i,t,n,e,p,s,l,a,r=this,u=o,c={container:!1,width:"80%",height:"80%",top:"center",left:"center",html:!1,template:!1,title:!1,css:"",icon:!1,icons:!1,view:!1,drag:!1,scroll:!1,data:{},buttons:[],anim:OGX.Popup.ANIM_FADE,listen_overlay:!1,zindex:0},d=!1,f="mousedown",g="mouseup",h="mousemove";function x(o){o?r.el.on(f,".ogx_popup_icons_icon",function(o){o.preventDefault(),o.stopImmediatePropagation();var t=u.icons[$(this).index()];t.hasOwnProperty("callback")?t.callback(t):r.el.trigger(OGX.Popup.CLICK_ICON,t)}):r.el.off(f,".ogx_popup_icons_icon")}function v(o){o?r.el.on(f,".ogx_popup_button",function(o){o.preventDefault(),o.stopImmediatePropagation();var t=$(this).index();"object"==typeof u.buttons[t]?u.buttons[t].hasOwnProperty("callback")&&u.buttons[t].callback&&(u.buttons[t].hasOwnProperty("params")?u.buttons[t].callback.apply(null,[u.buttons[t].params]):u.buttons[t].callback()):r.el.trigger(OGX.Popup.CLICK_BUTTON,{index:t,value:u.buttons[t]})}):r.el.off(f,".ogx_popup_button")}function _(o){o?r.el.on(f,".ogx_popup_title",function(o){o.preventDefault(),o.stopImmediatePropagation(),o=O(o),n=o.pageX,e=o.pageY,d=r.el.position().left,t=r.el.position().top,b(!(s=p=0)),$("body").on(h,function(o){o.preventDefault(),o.stopImmediatePropagation(),o=O(o),p=o.pageX-n,s=o.pageY-e}),$("body").on(g,function(o){b(!1),$("body").off(h),$("body").off(g),o=O(o),p=o.pageX-n,s=o.pageY-e})}):r.el.off(f,".ogx_popup_title")}function b(o){o?l||(l=setInterval(m,10)):l&&(clearInterval(l),l=null)}function m(){r.el.css({transform:"translate3D("+(d+p)+"px, "+(t+s)+"px, 0px)"})}function O(o){return o.hasOwnProperty("originalEvent")&&void 0!==o.originalEvent.changedTouches?o.originalEvent.changedTouches[0]:o}function y(){var o=$(u.container).width(),t=$(u.container).height(),n=u.width,e=u.height;return"string"==typeof n&&-1!==n.indexOf("%")&&(n=Number(n.split("%")[0]),n=Math.round(n*o/100)),"string"==typeof e&&-1!==e.indexOf("%")&&(e=Number(e.split("%")[0]),e=Math.round(e*t/100)),{x:Math.round(o/2-n/2),y:Math.round(t/2-e/2),w:n,h:e}}this._NAME_=OGX.Popup.NAME,this.snooze=!1,this.scroll=!1,this.views={},this.anim=null,this.el=null,this.zindex=null,this.ready=!1,this.blur=function(){u.buttons.length&&v(!1),r.snooze=!0},this.focus=function(){u.buttons.length&&v(!0),r.snooze=!1},this.resize=function(o,t){u.width=o,u.height=t;var n=y();r.el.css("width",n.w+"px"),r.el.css("height",n.h+"px"),r.el.css({transform:"translate3D("+n.x+"px, "+n.y+"px, 0px)"})},this.center=function(){var o=y();r.el.css({transform:"translate3D("+o.x+"px, "+o.y+"px, 0px)"})},this.move=function(o,t){null===o&&(o=r.el.position().left),null===t&&(t=r.el.position().top),r.el.css({transform:"translate3D("+o+"px, "+t+"px, 0px)"})},this.updateScroller=function(){a&&a.update()},this.destroy=function(){u.buttons.length&&v(!1),u.drag&&(_(!1),b(!1)),u.icons&&x(!1),u.scroll&&a&&a.destroy()},function(){if(void 0!==OGX.Templater){if(function(){for(var o in c)u.hasOwnProperty(o)||(u[o]=c[o]);i=$(u.container),r.scroll=u.scroll,r.zindex=u.zindex,r.anim=u.anim,void 0!==window.ontouchstart&&(f="touchstart",h="touchmove",g="touchend")}(),function(){var o=y(),t="";u.zindex&&(t="zindex:"+u.zindex+";");var n='<div class="ogx_popup" style="width:'+o.w+"px; height:"+o.h+"px; transform:translate3d("+o.x+"px, "+o.y+"px, 0); "+t+'">';if(n+='<div class="ogx_popup_head">',u.icon&&(n+='<div class="ogx_popup_icon" style="background-image:url(\''+u.icon+"')\"></div>"),u.title&&(n+='<div class="ogx_popup_title">'+u.title+"</div>"),u.icons){n+='<div class="ogx_popup_icons">';for(var e=0;e<u.icons.length;e++)"string"==typeof u.icons[e]?n+='<div class="ogx_popup_icons_icon" style="background-image:url(\''+u.icons[e]+"')\"></div>":n+='<div class="ogx_popup_icons_icon" style="background-image:url(\''+u.icons[e].icon+"')\"></div>";n+="</div>"}if(n="</div>",n+='<div class="ogx_popup_body '+u.css+'">',u.html?n+=u.html:u.template&&(n+=OGX.Templater.templatize(u.data,OGX.Templater.getTemplate(u.template))),n+="</div>",0<u.buttons.length){for(n+='<div class="ogx_popup_buttons">',e=0;e<u.buttons.length;e++)"object"==typeof u.buttons[e]?n+='<span class="ogx_popup_button">'+u.buttons[e].label+"</span>":n+='<span class="ogx_popup_button">'+u.buttons[e]+"</span>";n+="</div>"}n+="</div>",i.prepend(n)}(),r.el=i.find(".ogx_popup:first"),i=r.el.find(".ogx_view:first"),u.scroll){if(void 0===OGX.Scroller)return console.log("%c CRITICAL ERROR - OGX.Scroller not found! ","background:#222; color: #FF0000");var o=r.el.find(".ogx_popup_body:first");a=new OGX.Scroller({container:o[0],init_delay:100,observe:!0,nartual_scroll:u.nartual_scroll}),o.on(OGX.Scroller.READY,function(){o.off(OGX.Scroller.READY),i=a.getContainer(),r.el.trigger(OGX.Popup.READY),r.ready=!0})}else r.ready=!0;u.buttons.length&&v(!0),u.drag&&_(!0),u.icons&&x(!0),u.scroll||(r.ready=!0)}else console.log("%c CRITICAL ERROR - OGX.Templater not found! ","background:#222; color: #FF0000")}()},OGX.Popup.NAME="OgxPopup",OGX.Popup.READY="PopupReady",OGX.Popup.CLICK_BUTTON="PopupClickButton",OGX.Popup.CLICK_ICON="PopupClickIcon",OGX.Popup.NOANIM="PopupNoAnim",OGX.Popup.ANIM_FADE="PopupAnimFade";