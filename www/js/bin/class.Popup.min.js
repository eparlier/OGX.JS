if(void 0===OGX)var OGX=function(){};OGX.Popup=function(t){"use strict";var i,o,n,e,l,p,a,r,s=this,u=t,c={container:!1,width:"80%",height:"80%",top:"center",left:"center",html:!1,template:!1,title:!1,css:"",view:!1,drag:!1,scroll:!1,data:{},buttons:[],anim:OGX.Popup.ANIM_FADE,listen_overlay:!1,zindex:0},d=!1,f="mousedown",h="mouseup",g="mousemove";function x(t){t?s.el.on(f,".ogx_popup_button",function(t){t.preventDefault(),t.stopImmediatePropagation();var o=$(this).index();"object"==typeof u.buttons[o]?u.buttons[o].hasOwnProperty("callback")&&u.buttons[o].callback&&(u.buttons[o].hasOwnProperty("params")?u.buttons[o].callback.apply(null,[u.buttons[o].params]):u.buttons[o].callback()):s.el.trigger(OGX.Popup.CLICK_BUTTON,{index:o,value:u.buttons[o]})}):s.el.off(f,".ogx_popup_button")}function b(t){t?s.el.on(f,".ogx_popup_title",function(t){t.preventDefault(),t.stopImmediatePropagation(),t=O(t),n=t.pageX,e=t.pageY,d=s.el.position().left,o=s.el.position().top,v(!(p=l=0)),$("body").on(g,function(t){t.preventDefault(),t.stopImmediatePropagation(),t=O(t),l=t.pageX-n,p=t.pageY-e}),$("body").on(h,function(t){v(!1),$("body").off(g),$("body").off(h),t=O(t),l=t.pageX-n,p=t.pageY-e})}):s.el.off(f,".ogx_popup_title")}function v(t){t?a||(a=setInterval(m,10)):a&&(clearInterval(a),a=null)}function m(){s.el.css({transform:"translate3D("+(d+l)+"px, "+(o+p)+"px, 0px)"})}function O(t){return t.hasOwnProperty("originalEvent")&&void 0!==t.originalEvent.changedTouches?t.originalEvent.changedTouches[0]:t}function _(){var t=$(u.container).width(),o=$(u.container).height(),n=u.width,e=u.height;return"string"==typeof n&&-1!==n.indexOf("%")&&(n=Number(n.split("%")[0]),n=Math.round(n*t/100)),"string"==typeof e&&-1!==e.indexOf("%")&&(e=Number(e.split("%")[0]),e=Math.round(e*o/100)),{x:Math.round(t/2-n/2),y:Math.round(o/2-e/2),w:n,h:e}}this._NAME_=OGX.Popup.NAME,this.snooze=!1,this.scroll=!1,this.views={},this.anim=null,this.el=null,this.zindex=null,this.ready=!1,this.blur=function(){u.buttons.length&&x(!1),s.snooze=!0},this.focus=function(){u.buttons.length&&x(!0),s.snooze=!1},this.resize=function(t,o){u.width=t,u.height=o;var n=_();s.el.css("width",n.w+"px"),s.el.css("height",n.h+"px"),s.el.css({transform:"translate3D("+n.x+"px, "+n.y+"px, 0px)"})},this.center=function(){var t=_();s.el.css({transform:"translate3D("+t.x+"px, "+t.y+"px, 0px)"})},this.updateScroller=function(){r&&r.update()},this.destroy=function(){u.buttons.length&&x(!1),u.drag&&(b(!1),v(!1)),u.scroll&&r&&r.destroy()},function(){if(void 0!==OGX.Templater){if(function(){for(var t in c)u.hasOwnProperty(t)||(u[t]=c[t]);i=$(u.container),s.scroll=u.scroll,s.zindex=u.zindex,s.anim=u.anim,void 0!==window.ontouchstart&&(f="touchstart",g="touchmove",h="touchend")}(),function(){var t=_(),o="";u.zindex&&(o="zindex:"+u.zindex+";");var n='<div class="ogx_popup" style="width:'+t.w+"px; height:"+t.h+"px; transform:translate3d("+t.x+"px, "+t.y+"px, 0); "+o+'">';if(u.title&&(n+='<div class="ogx_popup_title">'+u.title+"</div>"),n+='<div class="ogx_popup_body '+u.css+'">',u.html?n+=u.html:u.template&&(n+=OGX.Templater.templatize(u.data,OGX.Templater.getTemplate(u.template))),n+="</div>",0<u.buttons.length){n+='<div class="ogx_popup_buttons">';for(var e=0;e<u.buttons.length;e++)"object"==typeof u.buttons[e]?n+='<span class="ogx_popup_button">'+u.buttons[e].label+"</span>":n+='<span class="ogx_popup_button">'+u.buttons[e]+"</span>";n+="</div>"}n+="</div>",i.prepend(n)}(),s.el=i.find(".ogx_popup:first"),i=s.el.find(".ogx_view:first"),u.scroll){if(void 0===OGX.Scroller)return console.log("%c CRITICAL ERROR - OGX.Scroller not found! ","background:#222; color: #FF0000");var t=s.el.find(".ogx_popup_body:first");r=new OGX.Scroller({container:t[0],init_delay:100,observe:!0,nartual_scroll:u.nartual_scroll}),t.on(OGX.Scroller.READY,function(){t.off(OGX.Scroller.READY),i=r.getContainer(),s.el.trigger(OGX.Popup.READY),s.ready=!0})}else s.ready=!0;u.buttons.length&&x(!0),u.drag&&b(!0),u.scroll||(s.ready=!0)}else console.log("%c CRITICAL ERROR - OGX.Templater not found! ","background:#222; color: #FF0000")}()},OGX.Popup.NAME="OgxPopup",OGX.Popup.READY="PopupReady",OGX.Popup.CLICK_BUTTON="PopupClickButton",OGX.Popup.NOANIM="PopupNoAnim",OGX.Popup.ANIM_FADE="PopupAnimFade";