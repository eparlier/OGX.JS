if(void 0===OGX)var OGX=function(){};OGX.GridSwiper=function(t){"use strict";var x,l,o,d,e,a,r,s,i,n,y,p,c=this,g=t,_={enabled:!0,core:!1,map:[],axis:{x:!0,y:!0},loop:!0,start:!1,chromeos:!1},h="mousedown",f="mouseup",u="mousemove",w=!1,m={x:null,y:null},v={x:0,y:0},b={},G={x:0,y:0},S={x:0,y:0},C=(new Date).getTime()+Math.round(1e3*Math.random()),M=[];function O(t){t?x.on(h,X):x.off(h,X)}function X(t){w=!1,s=r=a=e=0,t=Y(t),m.x=t.pageX,m.y=t.pageY,W(!0)}function E(t){t?$("body").on(f,P):$("body").off(f,P)}function P(t){W(!1),I()}function I(t,e){var a,i;void 0===t&&(t=0),void 0===e&&(e=0),!0?(l.off("transitionend"),l.on("transitionend",function(){l.off("transitionend"),l.removeClass("ogx_grid_swiper_anim"),v=R(l);var t={x:null,y:null};t.x=-1*Math.round(v.x/o),t.y=-1*Math.round(v.y/d),G.x!==t.x?(r=G.x>t.x?1:-1,G.x=t.x,S.x=F(G).x,-1===r?(l.children(".ogx_grid_swiper_cell[data-y="+(G.y-1)+"]").attr("data-x",G.x).css("left",G.x*o),l.children(".ogx_grid_swiper_cell[data-y="+(G.y+1)+"]").attr("data-x",G.x).css("left",G.x*o),l.children(".ogx_grid_swiper_cell[data-x="+(G.x-2)+"][data-y="+G.y+"]").attr("data-x",G.x+1).css("left",(G.x+1)*o),x.trigger(OGX.GridSwiper.SWIPE_LEFT,{cell:S,point:G}),H(M=[{x:G.x+1,y:G.y},{x:G.x,y:G.y-1},{x:G.x,y:G.y+1}])):(l.children(".ogx_grid_swiper_cell[data-y="+(G.y-1)+"]").attr("data-x",G.x).css("left",G.x*o),l.children(".ogx_grid_swiper_cell[data-y="+(G.y+1)+"]").attr("data-x",G.x).css("left",G.x*o),l.children(".ogx_grid_swiper_cell[data-x="+(G.x+2)+"][data-y="+G.y+"]").attr("data-x",G.x-1).css("left",(G.x-1)*o),x.trigger(OGX.GridSwiper.SWIPE_RIGHT,{cell:S,point:G}),H(M=[{x:G.x-1,y:G.y},{x:G.x,y:G.y-1},{x:G.x,y:G.y+1}]))):G.y!==t.y&&(s=G.y>t.y?1:-1,G.y=t.y,S.y=F(G).y,-1===s?(l.children(".ogx_grid_swiper_cell[data-x="+(G.x-1)+"]").attr("data-y",G.y).css("top",G.y*d),l.children(".ogx_grid_swiper_cell[data-x="+(G.x+1)+"]").attr("data-y",G.y).css("top",G.y*d),l.children(".ogx_grid_swiper_cell[data-y="+(G.y-2)+"][data-x="+G.x+"]").attr("data-y",G.y+1).css("top",(G.y+1)*d),x.trigger(OGX.GridSwiper.SWIPE_UP,{cell:S,point:G}),H(M=[{x:G.x,y:G.y+1},{x:G.x-1,y:G.y},{x:G.x+1,y:G.y}])):(l.children(".ogx_grid_swiper_cell[data-x="+(G.x-1)+"]").attr("data-y",G.y).css("top",G.y*d),l.children(".ogx_grid_swiper_cell[data-x="+(G.x+1)+"]").attr("data-y",G.y).css("top",G.y*d),l.children(".ogx_grid_swiper_cell[data-y="+(G.y+2)+"][data-x="+G.x+"]").attr("data-y",G.y-1).css("top",(G.y-1)*d),x.trigger(OGX.GridSwiper.SWIPE_DOWN,{cell:S,point:G}),H(M=[{x:G.x,y:G.y-1},{x:G.x-1,y:G.y},{x:G.x+1,y:G.y}]))),w=0})):l.off("transitionend"),l.addClass("ogx_grid_swiper_anim"),v=R(l),a=-1*Math.round((v.x+t)/o)*o*-1,i=-1*Math.round((v.y+e)/d)*d*-1,l.css({transform:"translate3d("+a+"px, "+i+"px, 0px)"})}function W(t){t?(T(!0),x.on(u,N)):(T(!1),x.off(u,N))}function N(t){t=Y(t),s=r=a=e=0,w||(g.axis.x&&Math.abs(t.pageX-m.x)>Math.abs(t.pageY-m.y)?w="x":g.axis.y&&Math.abs(t.pageX-m.x)<Math.abs(t.pageY-m.y)&&(w="y")),w&&(g.axis.x&&"x"===w?(e=Math.abs(t.pageX-m.x),r=0<t.pageX-m.x?1:-1):g.axis.y&&"y"===w&&(a=Math.abs(t.pageY-m.y),s=0<t.pageY-m.y?1:-1))}function T(t){t?p||(p=setInterval(A,10)):p&&(clearInterval(p),p=null)}function A(){if(g.axis.x&&"x"===w&&e&&r&&e<=o){if(!g.loop&&(G.x+-1*r<0||G.x+-1*r>g.map[0].length-1))return;if((i=(G.x+-1*r)%g.map[0].length)<0&&(i=Math.abs(g.map[0].length+i)),!1===g.map[S.y][i])return;y=e*r,l.css({transform:"translate3d("+(-1*G.x*o+y)+"px, "+v.y+"px, 0px)"})}else if(g.axis.y&&"y"===w&&a&&s&&a<=d){if(!g.loop&&(G.y+-1*s<0||G.y+-1*s>g.map.length-1))return;if((n=(G.y+-1*s)%g.map.length)<0&&(n=Math.abs(g.map.length+n)),!1===g.map[n][S.x])return;y=a*s,l.css({transform:"translate3d("+v.x+"px, "+(-1*G.y*d+y)+"px, 0px)"})}}function D(t){t?$(window).on("resize",L):$(window).off("resize",L)}function L(t){o=x.outerWidth(),d=x.outerHeight();var e=G.x*-o,a=G.y*-d;l.css("transform","translate3d("+e+"px, "+a+"px, 0px")}function R(t,e){var a=t.css("transform");return"none"===a?0:(a=(a=(a=a.substr(7)).substr(0,a.length-1)).split(","),{x:Number(a[4]),y:Number(a[5])})}function Y(t){return t.hasOwnProperty("originalEvent")&&void 0!==t.originalEvent.changedTouches?t.originalEvent.changedTouches[0]:t}function F(t){var e={x:0,y:0};return e.x=t.x%g.map[0].length,e.x<0&&(e.x=Math.abs(g.map[0].length+e.x)),e.y=t.y%g.map.length,e.y<0&&(e.y=Math.abs(g.map.length+e.y)),e}function H(t){for(var e,a={x:null,y:null},i=0;i<t.length;i++){if(t[i].y<0||t[i].y>g.map.length-1){if(!g.loop)return!1;a.y=F(t[i]).y}else a.y=t[i].y;if(t[i].x<0||t[i].x>g.map[0].length-1){if(!g.loop)return!1;a.x=F(t[i]).x}else a.x=t[i].x;e=g.map[a.y][a.x],U(t[i],e)}}function U(t,e){var a=!1;switch(typeof e){case"string":l.children('.ogx_grid_swiper_cell[data-x="'+t.x+'"][data-y="'+t.y+'"]').children(".ogx_grid_swiper_cell_content:first").html(e);break;case"function":(a=e(t,F(t),{x:t.x-G.x,y:t.y-G.y},l.children('.ogx_grid_swiper_cell[data-x="'+t.x+'"][data-y="'+t.y+'"]').children(".ogx_grid_swiper_cell_content:first")[0]))&&l.children('.ogx_grid_swiper_cell[data-x="'+t.x+'"][data-y="'+t.y+'"]').children(".ogx_grid_swiper_cell_content:first").html(a);break;case"object":if(!g.core)return!1;e.hasOwnProperty("data")&&"function"==typeof e.data&&(e.data=e.data(t,F(t),{x:t.x-G.x,y:t.y-G.y}));var i='.ogx_grid_swiper[data-ogx-id="'+C+'"] .ogx_grid_swiper[data-x="'+t.x+'"][data-y="'+t.y+'"] .ogx_grid_swiper_cell_content:first';b.hasOwnProperty(t.x+"_"+t.y)&&g.core.removeFromStage(i),g.core.addToStage(i,e),b[t.x+"_"+t.y]=i}}function k(){M=[],g.axis.x&&(M.push({x:g.start.x-1,y:g.start.y}),M.push({x:g.start.x+1,y:g.start.y})),M.push({x:g.start.x,y:g.start.y}),g.axis.y&&(M.push({x:g.start.x,y:g.start.y-1}),M.push({x:g.start.x,y:g.start.y+1})),H(M)}function z(){g.map.length||(g.map=[[]]),g.map.length&&!Array.isArray(g.map[0])&&(g.map=[g.map],g.axis.y=!1),g.start||(g.start={x:null,y:null},g.start.y=Math.floor(g.map.length/2),g.start.x=Math.floor(g.map[0].length/2))}function j(){var t=g.start.x*-o,e=g.start.y*-d,a=g.start.y-1,i=g.start.x,r='<div class="ogx_grid_swiper_container" style="transform:translate3d('+t+"px, "+e+'px, 0px);">',s=-1*t,n=-1*e-d;g.axis.y&&(r+='<div class="ogx_grid_swiper_cell" style="left:'+s+"px; top:"+n+'px;" data-x="'+i+'" data-y="'+a+'"><div class="ogx_grid_swiper_cell_content"></div></div>',r+='<div class="ogx_grid_swiper_cell" style="left:'+s+"px; top:"+(n+2*d)+'px;" data-x="'+i+'" data-y="'+(a+2)+'"><div class="ogx_grid_swiper_cell_content"></div></div>'),r+='<div class="ogx_grid_swiper_cell" style="left:'+s+"px; top:"+(n+d)+'px;" data-x="'+i+'" data-y="'+(a+1)+'"><div class="ogx_grid_swiper_cell_content"></div></div>',g.axis.x&&(r+='<div class="ogx_grid_swiper_cell" style="left:'+(s-o)+"px; top:"+-1*e+'px;" data-x="'+(i-1)+'" data-y="'+g.start.y+'"><div class="ogx_grid_swiper_cell_content"></div></div>',r+='<div class="ogx_grid_swiper_cell" style="left:'+(s+o)+"px; top:"+-1*e+'px;" data-x="'+(i+1)+'" data-y="'+g.start.y+'"><div class="ogx_grid_swiper_cell_content"></div></div>'),r+="</div>",x.html(r),l=x.children(".ogx_grid_swiper_container:first"),G.x=g.start.x,G.y=g.start.y,v.x=t,v.y=e,S.x=g.start.x,S.y=g.start.y}this._NAME_=OGX.GridSwiper.NAME,this.el=null,this.enable=function(){g.enabled||(O(!0),E(!0),g.enabled=!0)},this.disable=function(){g.enabled&&(O(!1),listenMouse(!1),E(!1),T(!1),g.enabled=!1)},this.setMap=function(t,e){g.map=t,void 0!==e&&(g.start=e),z(),j(),k()},this.setMapCell=function(t,e){g.map[t.y]||(g.map[t.y]=[]),g.map[t.y][t.x]=e},this.getMapCell=function(t){return 0<t.y&&g.map.length<t.y&&0<t.x&&g.map[t.y].length<t.x&&g.map[t.y][t.x]},this.getCells=function(){var a,i,r,s,n=[];return l.children(".ogx_grid_swiper_cell").each(function(t,e){a=$(e),i={x:Number(a.attr("data-x")),y:Number(a.attr("data-y"))},r=F(i),s={x:i.x-G.x,y:i.y-G.y},n.push({abs:i,rel:r,offset:s,element:e})}),n},this.getCellContent=function(t){return l.children(".ogx_grid_swiper_cell[data-x="+t.x+"][data-y="+t.y+"]").children(".ogx_grid_swiper_cell_content:first")[0]},this.getCurrentCell=function(){return S},this.renderCellContent=function(t){H([t])},this.setTopCell=function(t){this.setOffsetCell({x:0,y:-1},t)},this.setBottomCell=function(t){this.setOffsetCell({x:0,y:1},t)},this.setLeftCell=function(t){this.setOffsetCell({x:-1,y:0},t)},this.setRightCell=function(t){this.setOffsetCell({x:1,y:0},t)},this.setOffsetCell=function(t,e){var a={x:t.x+G.x,y:t.y+G.y};this.setMapCell(a,e)},this.getOffsetCell=function(t){var e={x:t.x+G.x,y:t.y+G.y};return this.getMapCell(e)},this.getOffsetCellContent=function(t){var e={x:t.x+G.x,y:t.y+G.y};return this.getCellContent(e)},this.swipeRight=function(){I(-o)},this.swipeLeft=function(){I(o)},this.swipeUp=function(){I(0,-d)},this.swipeDown=function(){I(0,d)},this.destroy=function(){if(this.disable(),D(!1),g.core)for(var t in b)g.core.removeFromStage(b[t])},function(){for(var t in _)g.hasOwnProperty(t)||(g[t]=_[t]);void 0===window.ontouchstart||g.chromeos||(h="touchstart",u="touchmove",f="touchend"),c.el=x=$(g.container),x.addClass("ogx_grid_swiper"),x.attr("data-ogx-id",C),o=x.outerWidth(),d=x.outerHeight()}(),z(),j(),k(),g.enabled&&(O(!0),E(!0)),D(!0)},OGX.GridSwiper.NAME="OgxGridSwiper",OGX.GridSwiper.SWIPE_LEFT="GridSwiperSwipeLeft",OGX.GridSwiper.SWIPE_RIGHT="GridSwiperSwipeRight",OGX.GridSwiper.SWIPE_UP="GridSwiperSwipeUp",OGX.GridSwiper.SWIPE_DOWN="GridSwiperSwipeDown";