if(void 0===OGX)var OGX=function(){};OGX.GridSwiper=function(t){"use strict";var l,o,d,y,a,e,r,i,n,s,x,p,c=this,g=t,_={enabled:!0,core:!1,map:[],loop:!0,depth:{x:0,y:0},start:!1,chromeos:!1},h="mousedown",f="mouseup",u="mousemove",w=!1,m={x:null,y:null},v={x:0,y:0},G={x:0,y:0},b={x:0,y:0},S=(new Date).getTime()+Math.round(1e3*Math.random());function M(t){t?l.on(h,O):l.off(h,O)}function O(t){w=!1,i=r=e=a=0,t=Y(t),m.x=t.pageX,m.y=t.pageY,P(!0)}function X(t){t?$("body").on(f,E):$("body").off(f,E)}function E(t){var a;(P(!1),w)&&(!0?o.on("transitionend",function(){var t;o.off("transitionend"),o.removeClass("ogx_grid_swiper_anim"),"x"===w?(v=A(o),t=-1*Math.round(v.x/d),G.x!==t&&(G.x=t,b.x=G.x%g.map[0].length,b.x<0&&(b.x=Math.abs(g.map[0].length+b.x)),-1===r?(o.children(".ogx_grid_swiper_cell[data-y="+(G.y-1)+"]").attr("data-x",G.x).css("left",G.x*d),o.children(".ogx_grid_swiper_cell[data-y="+(G.y+1)+"]").attr("data-x",G.x).css("left",G.x*d),o.children(".ogx_grid_swiper_cell[data-x="+(G.x-2)+"][data-y="+G.y+"]").attr("data-x",G.x+1).css("left",(G.x+1)*d),l.trigger(OGX.GridSwiper.SWIPE_LEFT,{cell:b,point:G}),D([{x:G.x+1,y:G.y},{x:G.x,y:G.y-1},{x:G.x,y:G.y+1}])):(o.children(".ogx_grid_swiper_cell[data-y="+(G.y-1)+"]").attr("data-x",G.x).css("left",G.x*d),o.children(".ogx_grid_swiper_cell[data-y="+(G.y+1)+"]").attr("data-x",G.x).css("left",G.x*d),o.children(".ogx_grid_swiper_cell[data-x="+(G.x+2)+"][data-y="+G.y+"]").attr("data-x",G.x-1).css("left",(G.x-1)*d),l.trigger(OGX.GridSwiper.SWIPE_RIGHT,{cell:b,point:G}),D([{x:G.x-1,y:G.y},{x:G.x,y:G.y-1},{x:G.x,y:G.y+1}])))):"y"===w&&(v=A(o),t=-1*Math.round(v.y/y),G.y!==t&&(G.y=t,b.y=G.y%g.map.length,b.y<0&&(b.y=Math.abs(g.map.length+b.y)),-1===i?(o.children(".ogx_grid_swiper_cell[data-x="+(G.x-1)+"]").attr("data-y",G.y).css("top",G.y*y),o.children(".ogx_grid_swiper_cell[data-x="+(G.x+1)+"]").attr("data-y",G.y).css("top",G.y*y),o.children(".ogx_grid_swiper_cell[data-y="+(G.y-2)+"][data-x="+G.x+"]").attr("data-y",G.y+1).css("top",(G.y+1)*y),l.trigger(OGX.GridSwiper.SWIPE_UP,{cell:b,point:G}),D([{x:G.x,y:G.y+1},{x:G.x-1,y:G.y},{x:G.x+1,y:G.y}])):(o.children(".ogx_grid_swiper_cell[data-x="+(G.x-1)+"]").attr("data-y",G.y).css("top",G.y*y),o.children(".ogx_grid_swiper_cell[data-x="+(G.x+1)+"]").attr("data-y",G.y).css("top",G.y*y),o.children(".ogx_grid_swiper_cell[data-y="+(G.y+2)+"][data-x="+G.x+"]").attr("data-y",G.y-1).css("top",(G.y-1)*y),l.trigger(OGX.GridSwiper.SWIPE_DOWN,{cell:b,point:G}),D([{x:G.x,y:G.y-1},{x:G.x-1,y:G.y},{x:G.x+1,y:G.y}])))),w=0}):o.off("transitionend"),o.addClass("ogx_grid_swiper_anim"),"x"===w?(v=A(o),a=-1*Math.round(v.x/d)*d*-1,o.css({transform:"translate3d("+a+"px, "+v.y+"px, 0px)"})):(v=A(o),a=-1*Math.round(v.y/y)*y*-1,o.css({transform:"translate3d("+v.x+"px, "+a+"px, 0px)"})))}function P(t){t?(W(!0),l.on(u,I)):(W(!1),l.off(u,I))}function I(t){t=Y(t),i=r=e=a=0,w||(Math.abs(t.pageX-m.x)>Math.abs(t.pageY-m.y)?w="x":Math.abs(t.pageX-m.x)<Math.abs(t.pageY-m.y)&&(w="y")),w&&("x"===w?(a=Math.abs(t.pageX-m.x),r=0<t.pageX-m.x?1:-1):"y"===w&&(e=Math.abs(t.pageY-m.y),i=0<t.pageY-m.y?1:-1))}function W(t){t?p||(p=setInterval(C,10)):p&&(clearInterval(p),p=null)}function C(){if("x"===w&&a&&r&&a<=d){if(!g.loop&&(G.x+-1*r<0||G.x+-1*r>g.map[0].length-1))return;if((n=(G.x+-1*r)%g.map[0].length)<0&&(n=Math.abs(g.map[0].length+n)),!1===g.map[b.y][n])return;x=a*r,o.css({transform:"translate3d("+(-1*G.x*d+x)+"px, "+v.y+"px, 0px)"})}else if("y"===w&&e&&i&&e<=y){if(!g.loop&&(G.y+-1*i<0||G.y+-1*i>g.map.length-1))return;if((s=(G.y+-1*i)%g.map.length)<0&&(s=Math.abs(g.map.length+s)),!1===g.map[s][b.x])return;x=e*i,o.css({transform:"translate3d("+v.x+"px, "+(-1*G.y*y+x)+"px, 0px)"})}}function T(t){t?$(window).on("resize",N):$(window).off("resize",N)}function N(t){d=l.outerWidth(),y=l.outerHeight();var a=G.x*-d,e=G.y*-y;o.css("transform","translate3d("+a+"px, "+e+"px, 0px")}function A(t,a){var e=t.css("transform");return"none"===e?0:(e=(e=(e=e.substr(7)).substr(0,e.length-1)).split(","),{x:Number(e[4]),y:Number(e[5])})}function Y(t){return t.hasOwnProperty("originalEvent")&&void 0!==t.originalEvent.changedTouches?t.originalEvent.changedTouches[0]:t}function D(t){for(var a,e,r={x:null,y:null},i=0;i<t.length;i++){if(t[i].y<0||t[i].y>g.map.length-1){if(!g.loop)return!1;r.y=t[i].y%g.map.length,r.y<0&&(r.y=Math.abs(g.map.length+r.y))}else r.y=t[i].y;if(t[i].x<0||t[i].x>g.map[0].length-1){if(!g.loop)return!1;r.x=t[i].x%g.map[0].length,r.x<0&&(r.x=Math.abs(g.map[0].length+r.x))}else r.x=t[i].x;switch(typeof(a=g.map[r.y][r.x])){case"string":o.children('.ogx_grid_swiper_cell[data-x="'+t[i].x+'"][data-y="'+t[i].y+'"]').children(".ogx_grid_swiper_cell_content:first").html(a);break;case"function":(e=a(r,t[i]))&&o.children('.ogx_grid_swiper_cell[data-x="'+t[i].x+'"][data-y="'+t[i].y+'"]').children(".ogx_grid_swiper_cell_content:first").html(e);break;case"object":if(!g.core)return!1;a.hasOwnProperty("data")&&"function"==typeof a.data&&(a.data=a.data(r)),g.core.addToStage('.ogx_grid_swiper[data-ogx-id="'+S+'"] .ogx_grid_swiper[data-x="'+t[i].x+'"][data-y="'+t[i].y+'"] .ogx_grid_swiper_cell_content:first',a)}}}this._NAME_=OGX.GridSwiper.NAME,this.el=null,this.enable=function(){g.enabled||(M(!0),X(!0),g.enabled=!0)},this.disable=function(){g.enabled&&(M(!1),listenMouse(!1),X(!1),W(!1),g.enabled=!1)},this.setContent=function(t,a){g.map[t.y]||(g.map[t.y]=[]),g.map[t.y][t.x]=a},this.getContent=function(t){return 0<t.y&&g.map.length<t.y&&0<t.x&&g.map[t.y].length<t.x&&g.map[t.y][t.x]},this.getCell=function(){return b},this.getCellContent=function(t){return o.children(".ogx_grid_swiper_cell[data-x="+__pt.x+"][data-y="+__pt.y+"] .ogx_grid_swiper_cell_content:first")[0]},this.destroy=function(){this.disable(),T(!1)},function(){for(var t in _)g.hasOwnProperty(t)||(g[t]=_[t]);void 0===window.ontouchstart||g.chromeos||(h="touchstart",u="touchmove",f="touchend"),c.el=l=$(g.container),l.addClass("ogx_grid_swiper"),l.attr("data-ogx-id",S),d=l.outerWidth(),y=l.outerHeight()}(),g.map.length||(g.map=[[]]),g.map.length&&!Array.isArray(g.map[0])&&(g.map=[g.map]),g.start||(g.start={x:null,y:null},g.start.y=Math.floor(g.map.length/2),g.start.x=Math.floor(g.map[0].length/2)),function(){for(var t=g.start.x*-d,a=g.start.y*-y,e=g.start.y-1,r=g.start.x,i='<div class="ogx_grid_swiper_container" style="transform:translate3d('+t+"px, "+a+'px, 0px);">',n=-1*t,s=-1*a-y,x=0;x<3;x++)i+='<div class="ogx_grid_swiper_cell" style="left:'+n+"px; top:"+s+'px;" data-x="'+r+'" data-y="'+e+'"><div class="ogx_grid_swiper_cell_content"></div></div>',s+=y,e++;i+='<div class="ogx_grid_swiper_cell" style="left:'+(n-d)+"px; top:"+-1*a+'px;" data-x="'+(r-1)+'" data-y="'+g.start.y+'"><div class="ogx_grid_swiper_cell_content"></div></div>',i+='<div class="ogx_grid_swiper_cell" style="left:'+(n+d)+"px; top:"+-1*a+'px;" data-x="'+(r+1)+'" data-y="'+g.start.y+'"><div class="ogx_grid_swiper_cell_content"></div></div>',i+="</div>",l.html(i),o=l.children(".ogx_grid_swiper_container:first"),G.x=g.start.x,G.y=g.start.y,v.x=t,v.y=a,b.x=g.start.x,b.y=g.start.y}(),D([{x:g.start.x,y:g.start.y-1},{x:g.start.x,y:g.start.y},{x:g.start.x,y:g.start.y+1},{x:g.start.x-1,y:g.start.y},{x:g.start.x+1,y:g.start.y}]),g.enabled&&(M(!0),X(!0)),T(!0)},OGX.GridSwiper.NAME="OgxGridSwiper",OGX.GridSwiper.SWIPE_LEFT="GridSwiperSwipeLeft",OGX.GridSwiper.SWIPE_RIGHT="GridSwiperSwipeRight",OGX.GridSwiper.SWIPE_UP="GridSwiperSwipeUp",OGX.GridSwiper.SWIPE_DOWN="GridSwiperSwipeDown";