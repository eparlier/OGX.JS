if("undefined"==typeof OGX){var OGX=function(){};OGX.View=function(){}}OGX.prototype.App=function(){"use strict";function createStage(e){$("body").append('<div class="ogx_stage ogx_hw"></div>'),e.container=$("body").find(".ogx_stage:last")[0];var s=function(){};s.prototype.BaseStage=OGX.prototype.BaseStage,s.prototype[e.name]=OGX.prototype[e.name];var t=new s;return t.BaseStage(e),t[e.name](),t}function blurStage(e){if(!stages.hasOwnProperty(e))return!1;for(var s in stages[e].windows)stages[e].windows[s].hasOwnProperty("blur")&&stages[e].windows[s].blur();for(var s in stages[e].popups)stages[e].popups[s].hasOwnProperty("blur")&&stages[e].popups[s].blur();for(var s in stages[e].views)stages[e].views[s].hasOwnProperty("blur")&&stages[e].views[s].blur()}function focusStage(){if(!stages.hasOwnProperty(__name))return!1;for(var e in stages[__name].windows)stages[__name].windows[e].hasOwnProperty("focus")&&stages[__name].windows[e].focus();for(var e in stages[__name].popups)stages[__name].popups[e].hasOwnProperty("focus")&&stages[__name].popups[e].focus();for(var e in stages[__name].views)stages[__name].views[e].hasOwnProperty("focus")&&stages[__name].views[e].focus()}function attachWindow(e,s){var t=stages[stage].windows[e];"undefined"!=typeof s&&s?(stages[stage].stage.el.append('<div id="ogx_temp" style="display:none;">'+t.el+"</div>"),t.el=stages[stage].stage.el.find("#ogx_temp").find(".ogx_window:first")):(stages[stage].stage.el.append(t.el),t.el=stages[stage].stage.el.find(".ogx_window:last")),t.attached=!0}function detachWindow(e,s){var t=stages[stage].windows[e];t.el=t.el.detach(),s&&stages[stage].stage.el.find("#ogx_temp").remove(),t.attached=!1}function killWindow(e){listenWindow(!1,e);for(var s in stages[stage].windows[e].views)destroyView(stages[stage].windows[e].views[s]);stages[stage].windows[e].views={},stages[stage].windows[e].el.remove(),stages[stage].windows[e].destroy(),delete stages[stage].windows[e]}function animWindow(e,s){var t={opac:1,tX:0,tY:0},a=stages[stage].stage.el.width(),o=stages[stage].stage.el.height(),n=stages[stage].windows[e],i=n.el.outerWidth(),r=n.el.outerHeight(),g=n.el.find(".ogx_window_main_icon:first"),p=n.getTiming();switch(s.way&&("undefined"==typeof n.zindex&&(n.el.css("z-index",winZ),winZ++),s.hasOwnProperty("fade")&&s.fade&&n.el.css("opacity",0)),s.way?(placeWindow(e,s.anim,!0),p=p.in,g.removeClass("ogx_window_main_icon_left ogx_window_main_icon_right ogx_window_main_icon_top")):(p=p.out,s.hasOwnProperty("fade")&&s.fade&&(t.opac=0)),s.anim){case OGX.Window.ANIM_NONE:break;case OGX.Window.ANIM_TOP:s.way?(t.tY=0,g.addClass("ogx_window_main_icon_top")):t.tY=-r;break;case OGX.Window.ANIM_BOTTOM:s.way?(t.tY=o-r,g.addClass("ogx_window_main_icon_bottom")):t.tY=o;break;case OGX.Window.ANIM_RIGHT:s.way?(t.tX=a-i,g.addClass("ogx_window_main_icon_right")):t.tX=a;break;case OGX.Window.ANIM_LEFT:s.way?(t.tX=0,g.addClass("ogx_window_main_icon_left")):t.tX=-i}"undefined"!=typeof s.anim_params&&(s.anim_params.hasOwnProperty("left")&&(t.tX=a-getSize("width",s.anim_params.left)),s.anim_params.hasOwnProperty("top")&&(t.tY=getSize("height",s.anim_params.top)),s.anim_params.hasOwnProperty("right")&&(t.tX=getSize("width",s.anim_params.right)));var w=100;s.way||(w=0),setTimeout(function(){n.el.on("transitionend",function(){n.el.off("transitionend"),s.way?n.el.removeClass("ogx_window_anim_in"):n.el.removeClass("ogx_window_anim_out"),s.hasOwnProperty("cb")&&s.cb&&(s.hasOwnProperty("params")&&s.params?s.cb.apply(that,[s.params]):s.cb()),s.way?(n.status=OGX.Window.OPENED,stages[stage].stage.el.trigger(OGX.Window.OPENED,e),that.focusWindow(e)):(n.status=OGX.Window.CLOSED,stages[stage].stage.el.trigger(OGX.Window.CLOSED,e),s.remove&&that.removeWindow(e))}),s.way?(n.status=OGX.Window.OPEN,stages[stage].stage.el.trigger(OGX.Window.OPEN,e)):(that.blurWindow(e),n.status=OGX.Window.CLOSE,stages[stage].stage.el.trigger(OGX.Window.CLOSE,e)),n.el.css({transform:"translate3D("+t.tX+"px, "+t.tY+"px, 0px)",opacity:t.opac,transition:"all "+p+"ms",visibility:"visible"})},w)}function placeWindow(e,s,t){var a=stages[stage].stage.el.width(),o=stages[stage].stage.el.height(),n=stages[stage].windows[e],i=n.el.outerHeight(),r=n.el.outerWidth();switch(n.el.css("transition","none"),s){case OGX.Window.ANIM_NONE:t&&n.el.css({transform:"translate3D(0px, 0px, 0px)"});break;case OGX.Window.ANIM_TOP:t&&n.el.css({transform:"translate3D(0px, -"+i+"px, 0px)"});break;case OGX.Window.ANIM_BOTTOM:t&&n.el.css({transform:"translate3D(0px, "+o+"px, 0px)"});break;case OGX.Window.ANIM_RIGHT:t&&n.el.css({transform:"translate3D("+a+"px, 0px, 0px)"});break;case OGX.Window.ANIM_LEFT:t&&(a=n.el.outerWidth(),n.el.css({transform:"translate3D("+-r+"px, 0px, 0px)"}))}t||n.el.css("visibility","hidden")}function listenWindow(e,s){e?stages[stage].windows[s].el.on("click",".ogx_window_back",function(){that.hideWindow({name:s})}):stages[stage].windows[s].el.off("click",".ogx_window_back")}function listenPopupAnim(e,s){stages[stage].popups.hasOwnProperty(s)&&stages[stage].popups[s].el&&(e?stages[stage].popups[s].el.on("transitionend",function(){listenPopupAnim(!1),killPopup(s)}):stages[stage].popups[s].el.off("transitionend"))}function killPopup(e){if(stages[stage].popups.hasOwnProperty(e)){for(var s in stages[stage].popups[e].views)stages[stage].popups[e].views[s].destroyInternal(),stages[stage].popups[e].views[s].hasOwnProperty("destroy")&&stages[stage].popups[e].views[s].destroy(),delete stages[stage].popups[e].views[s];stages[stage].popups[e].destroy(),stages[stage].popups[e].el.remove(),delete stages[stage].popups[e]}}function listenOverlay(e){e?stages[stage].overlay.el.on("touchstart",function(e){e.preventDefault(),e.stopImmediatePropagation(),stages[stage].stage.el.trigger(OGX.App.OVERLAY_REMOVE),that.removeOverlay(),stages[stage].popup&&that.removePopup()}):stages[stage].overlay.el.off("touchstart")}function createView(e){var s=function(){};s.prototype.BaseView=OGX.prototype.BaseView,s.prototype[e.name]=OGX.View.prototype[e.name];var t=new s;return e.hasOwnProperty("template")&&(e.html=OGX.Templater.getTemplate(e.template),e.hasOwnProperty("data")&&"{}"!==JSON.stringify(e.data)&&(e.html=OGX.Templater.templatize(e.data,e.html))),t.BaseView(e),t[e.name](),setTimeout(function(){t.constructor(e.data)},50),t}function destroyView(e){e.destroyInternal(),e.hasOwnProperty("destroy")&&e.destroy()}function handleRoute(e,s,t,a){url=window.location.hash.substr(1);var o={};if("undefined"==typeof t&&(t=!1),"undefined"==typeof a&&(a=!1),a)for(var n in e.data)a[n]=e.data[n];else o.data=e.data;if(e.route.views[s].hasOwnProperty("controller")){var i=e.route.views[s].controller;stages[stage].controllers[i]=new OGX.Controllers.prototype[i]}t||a?(t&&(o.html=t),a&&(o=merge(o,a,!0))):(e.route.views[s].hasOwnProperty("html")&&(o.html=e.route.views[s].html),e.route.views[s].hasOwnProperty("template")&&(o.template=e.route.views[s].template),e.route.views[s].hasOwnProperty("data")&&(o.data=e.route.views[s].data),e.route.views[s].hasOwnProperty("scroll")&&e.route.views[s].scroll&&(o.scroll=!0)),o.container=s,o.name=e.route.views[s].name,that.addToStage(o)}function findRoute(e){var s;for(var t in config.routing)if(s=e.match("^"+t+"$"),s&&s.length){s.shift();for(var a={},o=0;o<s.length;o++)a[config.routing[t].properties[o]]=s[o];return{route:config.routing[t],data:a}}return!1}function addToHist(e){var s={url:e};history.pushState(s,"title"+1e3*Math.random(),"index.html#"+e)}function writeFile(e,s,t){window.resolveLocalFileSystemURL(cordova.file.dataDirectory,function(a){a.getFile(e,{create:!0},function(e){e.createWriter(function(e){var a=new Blob([s],{type:"text/plain"});e.write(a),"undefined"!=typeof t&&t()})})})}function readFile(e){file=e,window.resolveLocalFileSystemURL(cordova.file.dataDirectory+e,gotFile,onFail)}function gotFile(e){e.file(function(e){var s=new FileReader;s.onloadend=function(e){},s.readAsText(e)})}function onFail(e){$(document).trigger("LOAD_ERROR",e.code)}function listenResize(e){e?window.addEventListener("resize",onResize):window.removeEventListener("resize",onResize)}function onResize(){var e,s,t,a,o,n;for(var i in stages)e=stages[i].stage.el.width(),s=stages[i].stage.el.height(),stages[i].popup&&stages[i].popup.hasOwnProperty("el")&&stages[i].popup.el&&(o=stages[i].popup.width,n=stages[i].popup.height,"string"==typeof o&&o.indexOf("%")!==-1&&(o=Number(o.split("%")[0]),o=Math.round(o*e/100),stages[i].popup.el.width(o)),"string"==typeof n&&n.indexOf("%")!==-1&&(n=Number(n.split("%")[0]),n=Math.round(n*s/100)),t=Math.round(e/2-o/2),a=Math.round(s/2-n/2),stages[i].popup.el.css("top",a+"px"),stages[i].popup.el.css("left",t+"px"))}function getSize(e,s){var t;return s.indexOf("%")!==-1?(t=s.split("%"),t=parseInt(t[0]),t=Math.round(t*stages[stage].stage.el[e]()/100)):(t=s.split("px"),t=parseInt(t[0])),t}function checkScope(e){for(var s=0;s<e.length;s++)if(config.scopes.indexOf(e[s])!==-1)return!0;return!1}function merge(e,s,t){for(var a in s)t?e.hasOwnProperty(a)&&(e[a]=s[a]):e.hasOwnProperty(a)||(e[a]=s[a]);return e}function initPopState(){$(document).on("backbutton",function(e){e.preventDefault(),e.stopImmediatePropagation();var s=!1;for(var t in stages[stage].windows)that.hideWindow({name:t,remove:!0}),s=!0;for(var t in stages[stage].popups)that.removePopup(t,OGX.Popup.NOANIM),s=!0;that.removeOverlay(),s||($(document).trigger(OGX.App.NAV_BACK),navigator.app.backHistory())}),$(window).on("popstate",function(e){null!==e.originalEvent.state?that.goto(e.originalEvent.state.url,!1):url!==config.stages[stage].home&&that.goto(config.stages[stage].home,!1)})}function initStages(){var e;for(var s in config.stages)config.stages.hasOwnProperty(s)&&(e=!1,config.stages[s].hasOwnProperty("html")?e=config.stages[s].html:config.stages[s].hasOwnProperty("template")&&(e=OGX.Templater.getTemplate(config.stages[s].template)),config.stages[s].name=s,config.stages[s].html=e,that.addStage(config.stages[s]))}function initTemplates(){var e,s=[];e=debug?"/html/templates/":"html/templates/";for(var t in config.templates)s.push({name:t,file:e+config.templates[t]});OGX.Templater.loadTemplates(s,onTemplatesLoaded)}function onTemplatesLoaded(){initStages(),that.goto(config.stages[stage].home),$(document).trigger(OGX.App.READY)}function initPreload(){if(config.hasOwnProperty("preload"))for(var e in preload)if(preload[e])switch(typeof preload[e]){case"string":break;case"array":}}function initDefaults(){isWebView=/((iPhone|iPod|iPad).*AppleWebKit(?!.*Version)|; wv)/i.test(navigator.userAgent);for(var a in config_default)config.hasOwnProperty(a)||(config[a]=config_default[a]);config.hasOwnProperty("windows")&&config.windows&&(windows_default=config.windows,config.windows.hasOwnProperty("style")&&(config.windows.style=eval(config.windows.style))),config.hasOwnProperty("popups")&&config.popups&&(popups_default=config.popups,popups_default.hasOwnProperty("anim")&&(popups_default.anim=eval(popups_default.anim))),that.el=$(document)}function loadConfig(){$.getJSON("app.json",function(e){config=e,init()})}function checkModules(){return"undefined"==typeof OGX.Templater?(console.log("%c CRITICAL ERROR - OGX.Templater not found! ","background:#222; color: #FF0000"),!1):"undefined"==typeof OGX.Scroller?(console.log("%c CRITICAL ERROR - OGX.Scroller not found! ","background:#222; color: #FF0000"),!1):"undefined"==typeof OGX.BaseView?(console.log("%c CRITICAL ERROR - OGX.BaseView not found! ","background:#222; color: #FF0000"),!1):"undefined"==typeof OGX.Stage?(console.log("%c CRITICAL ERROR - OGX.BaseStage not found! ","background:#222; color: #FF0000"),!1):"undefined"==typeof OGX.Window?(console.log("%c CRITICAL ERROR - OGX.Window not found! ","background:#222; color: #FF0000"),!1):"undefined"!=typeof OGX.Popup||(console.log("%c CRITICAL ERROR - OGX.Popup not found! ","background:#222; color: #FF0000"),!1)}function init(){initDefaults(),initTemplates(),initPopState(),listenResize(!0)}var that=this,config,config_default={scopes:["public"],overlay_delay:350,observe:!1,auto_exit:!1},windows_default,popups_default,stage=!1,stageShown=!1,stages={},stageNav=!1,isWebView=!1,gfx=new OGX.ResponsiveGraphics({bind:!1}),winZ=1e3,route,waypoints={},url;this.el=null,this.trigger=function(e,s){that.el.trigger(e,s)},this.isWebView=function(){return isWebView},this.bindGfx=function(e,s){gfx.bind(e,s)},this.unbindGfx=function(e){gfx.unbind(e)},this.refreshGfx=function(e){gfx.resize(e)},this.showStageNav=function(){stageNav||(stageNav=new OGX.MobileStageNavigator({}))},this.addStage=function(e){if("undefined"==typeof e)return!1;if(!e.hasOwnProperty("name"))return!1;if(stages.hasOwnProperty(e.name))return!1;var s=createStage(e);stages[e.name]={stage:s,windows:{},popups:{},views:{},controllers:{},overlay:null,snooze:!1},stage=e.name,s.constructor(),s.ux(!0),e.hasOwnProperty("show")||(e.show=!0),e.show&&that.showStage(e.name)},this.removeStage=function(e){},this.useStage=function(e){stage=e},this.snoozeStage=function(e){if(!stages[e].snooze){stages[e].snooze=!0;for(var s in stages[e].stage.views)stages[e].stage.views[s].blur();stages[e].stage.el=stages[e].stage.el.detach()}},this.wakeStage=function(e){if(stages[e].snooze){stages[e].snooze=!0;for(var s in stages[e].stage.views)stages[e].stage.views[s].focus();stages[stageShown].stage.el.appendTo("body"),stages[e].stage.el=$("body").find(".ogx_stage:last")}},this.showStage=function(e,s){if("undefined"==typeof s&&(s=!1),s){var t=$(window).height();switch(s){case OGX.MobileStage.ANIM_SWAP:stages[stageShown].stage.el.on("transitionend",function(){stages[stageShown].stage.el.off("transitionend"),stages[stageShown].stage.el.css("top",-t+"px"),stages[e].stage.el.css("top","0px"),stages[e].stage.el.on("transitionend",function(){stages[e].stage.el.off("transitionend"),stages[e].stage.el.css("transform","scale(1)"),stages[stageShown].stage.el.removeClass("ogx_stage_anim"),stages[stageShown].stage.el.css("display","none"),stageShown=e,that.el.trigger(OGX.MobileStage.STAGE_CHANGE,{old:stageShown,new:e})})}),stages[e].stage.el.addClass("ogx_stage_anim"),stages[stageShown].stage.el.addClass("ogx_stage_anim"),stages[stageShown].stage.el.css("transform","scale(0.9)"),stages[e].stage.el.css("top",t+"px"),stages[e].stage.el.css("display","block"),stages[e].stage.el.css("transform","scale(0.9)"),stages[e].stage.el.addClass("ogx_stage_anim");break;case OGX.MobileStage.ANIM_FLIP:stages[e].stage.el.appendTo("body"),stages[e].stage.el.addClass("ogx_stage_anim_swap"),stages[stageShown].stage.el.addClass("ogx_stage_anim"),stages[stageShown].stage.el.addClass("ogx_stage_anim_flip")}}else stageShown&&stages[stageShown].stage.el.css("display","none"),stages[e].stage.el.css("display","block"),stageShown=e},this.addToStage=function(e){var s;if("undefined"==typeof e)return!1;if(!e.hasOwnProperty("name"))return!1;if(!e.hasOwnProperty("container"))return!1;if("string"!=typeof e.container)return console.log("%c CRITICAL ERROR - container must be a selector for view "+e.name+"! ","background:#222; color: #FF0000"),!1;if(!OGX.View.hasOwnProperty(e.name))return console.log("%c CRITICAL ERROR - OGX.View."+e.name+" not found! ","background:#222; color: #FF0000"),!1;e.hasOwnProperty("add_to_nav")||(e.add_to_nav=!0),OGX.View[e.name].hasOwnProperty("scopes")||(OGX.View[e.name].scopes=["public"]);var t=checkScope(OGX.View[e.name].scopes);return t?(stages[stage].views.hasOwnProperty(e.container)&&that.removeFromStage(e.container),s=createView(e),stages[stage].views[e.container]={view:s,name:e.name},!0):(console.log("%c ERROR  - Bad scope for view "+e.name),!1)},this.removeFromStage=function(e){stages[stage].views.hasOwnProperty(e)&&(destroyView(stages[stage].views[e].view),delete stages[stage].views[e])},this.windowExists=function(e){return stages[stage].windows.hasOwnProperty(e)},this.getWindow=function(e){if("string"==typeof e&&that.windowExists(e))return stages[stage].windows[e];if("object"==typeof e){var s;if(Object.getPrototypeOf(e).hasOwnProperty("BaseView")&&e.config.container.indexOf(".ogx_window")!==-1&&(s=$(e.config.container.split(" ")[0]).data("ogx"),that.windowExists(s)))return stages[stage].windows[s]}return!1},this.addWindow=function(e,s){if(that.windowExists(e))return!1;s="undefined"==typeof s?JSON.parse(JSON.stringify(windows_default)):merge(s,windows_default,!1),s.container=stages[stage].stage.el[0],s.core=this,s.name=e;var t=new OGX.Window(s);return t.snooze=!1,stages[stage].windows[e]=t,s.hasOwnProperty("anim")&&s.anim&&that.showWindow(e,s),t},this.showWindow=function(e,s){var t={anim:OGX.Window.ANIM_NONE,params:!1,fade:!1};if(s="undefined"==typeof s?JSON.parse(JSON.stringify(t)):merge(s,t,!1),stages[stage].windows.hasOwnProperty(e)){var a=stages[stage].windows[e];a.anim=s.anim,s.way=!0,setTimeout(function(){animWindow(e,s)},0),listenWindow(!0,e)}},this.hideWindow=function(e,s){var t={params:!1,fade:!1};return s="undefined"==typeof s?JSON.parse(JSON.stringify(t)):merge(s,t,!1),!!that.windowExists(e)&&(s.hasOwnProperty("anim")||stages[stage].windows[e].anim&&(s.anim=stages[stage].windows[e].anim),listenWindow(!1,e),s.way=0,setTimeout(function(){animWindow(e,s)},0),stages[stage].stage.el.trigger(OGX.Window.CLOSE,e),void stages[stage].stage.el.trigger(OGX.Window.CLOSE+"_"+e,e))},this.swapWindows=function(e,s){var t,a,o,n;return!(!that.windowExists(e)||!that.windowExists(s))&&(t=that.getWindow(e),a=that.getWindow(s),o=t.el.css("z-index"),n=a.el.css("z-index"),t.el.css("z-index",n),a.el.css("z-index",o),!0)},this.snoozeWindow=function(e){stages[stage].windows[e].snooze||(stages[stage].windows[e].snooze=!0,that.blurWindow(e),stages[stage].windows[e].el=stages[stage].windows[e].el.detach())},this.wakeWindow=function(e){stages[stage].windows[e].snooze&&(stages[stage].windows[e].snooze=!1,that.focusWindow(e),stages[stage].windows[e].el=stages[stage].windows[e].el.detach(),stages[stage].windows[e].el.appendTo(stages[stage].stage.el),stages[stage].windows[e].el=stages[stage].stage.el.find(".ogx_window:last"))},this.blurWindow=function(e){for(var s in stages[stage].windows[e].views)stages[stage].windows[e].views[s].blur()},this.focusWindow=function(e){for(var s in stages[stage].windows[e].views)stages[stage].windows[e].views[s].focus()},this.removeWindow=function(e){return!!that.windowExists(e)&&(killWindow(e),!0)},this.addToWindow=function(e,s){if(!s.hasOwnProperty("name"))return!1;s.hasOwnProperty("container")||(s.container='.ogx_window[data-ogx="'+e+'"] .ogx_view'),stages[stage].windows[e].snooze&&that.wakeWindow(e),stages[stage].windows[e].views.hasOwnProperty(s.container)&&that.removeFromWindow(e,s.container),s.hasOwnProperty("data")||(s.data={});var t;stages[stage].windows[e].scroll&&!stages[stage].windows[e].ready?stages[stage].windows[e].el.on(OGX.Window.READY,function(){stages[stage].windows[e].el.off(OGX.Window.READY),t=createView(s),stages[stage].windows[e].views[s.container]=t}):(t=createView(s),stages[stage].windows[e].views[s.container]=t)},this.removeFromWindow=function(e,s){return!!stages[stage].windows[e].views.hasOwnProperty(s)&&(destroyView(stages[stage].windows[e].views[s]),delete stages[stage].windows[e].views[s],!0)},this.getWindowView=function(e,s){return"undefined"==typeof s&&(s='.ogx_window[data-ogx="'+e+'"] .ogx_view'),!!stages[stage].windows[e].views.hasOwnProperty(s)&&stages[stage].windows[e].views[s]},this.addPopup=function(e,s){if(s.container=stages[stage].stage.el,stages[stage].popups.hasOwnProperty(e))return!1;s="undefined"==typeof s?JSON.parse(JSON.stringify(popups_default)):merge(s,popups_default,!1);var t=new OGX.Popup(s);if(s.hasOwnProperty("anim")||(s.anim=OGX.Popup.NOANIM),s.hasOwnProperty("overlay")||(s.overlay=!1),stages[stage].popups[e]=t,s.hasOwnProperty("view")&&s.view){var a;s.view.hasOwnProperty("container")?(a=s.view.container,s.view.container=stages[stage].popups[e].el.find(".ogx_popup_body:first").find(a)[0]):(a=".ogx_popup_body:first",s.view.container=stages[stage].popups[e].el.find(a)[0]),stages[stage].popups[e].views[a]=createView(s.view)}switch(s.anim){case OGX.Popup.ANIM_FADE:setTimeout(function(){stages[stage].popups[e].el.removeClass("ogx_popup_fade_out"),stages[stage].popups[e].el.addClass("ogx_popup_fade_in")},100);break;case OGX.Popup.NOANIM:stages[stage].popups[e].el.css("opacity",1)}return s.overlay&&this.addOverlay(s.listen_overlay,OGX.App.OVERLAY_FADE),!0},this.removePopup=function(e,s){if(stages[stage].popups.hasOwnProperty(e)){stages[stage].popups[e].blur();var t;switch(t="undefined"!=typeof s?s:stages[stage].popups[e].anim){case OGX.Popup.ANIM_FADE:listenPopupAnim(!0,e),stages[stage].popups[e].el.removeClass("ogx_popup_fade_in"),stages[stage].popups[e].el.addClass("ogx_popup_fade_out");break;case OGX.Popup.NOANIM:killPopup(e)}return!0}return!1},this.hidePopup=function(e){stages[stage].popups.hasOwnProperty(e)&&stages[stage].popups[e].el.css("visibility","hidden")},this.showPopup=function(e){stages[stage].popups.hasOwnProperty(e)&&stages[stage].popups[e].el.css("visibility","visible")},this.addToPopup=function(e){if(!e.hasOwnProperty("name"))return!1;!e.hasOwnProperty("container"),stages[stage].popups[e.name].snooze&&that.wakePopup(e.name),stages[stage].popups[e.name].views.hasOwnProperty(e.container)&&that.removeFromPopup(e.name,e.container);var s;return stages[stage].popups[e.name].scroll&&!stages[stage].popups[e.name].ready?stages[stage].popups[e.name].el.on(OGX.Popup.READY,function(){stages[stage].popups[e.name].el.off(OGX.Popup.READY),s=createView(e.view),stages[stage].popups[e.name].views[e.container]=s}):(s=createView(e.view),stages[stage].popups[e.name].views[e.container]=s),!0},this.getPopupView=function(e,s){return"undefined"==typeof s&&(s=".ogx_popup_body:first"),!(!stages[stage].popups.hasOwnProperty(e)||!stages[stage].popups[e].views.hasOwnProperty(s))&&stages[stage].popups[e].views[s]},this.removeFromPopup=function(e,s){return!!stages[stage].popups.hasOwnProperty(e)&&(!!stages[stage].popups[e].views.hasOwnProperty(s)&&(destroyView(stages[stage].popups[e].views[s]),delete stages[stage].popups[e].views[s],!0))},this.wakePopup=function(e){if(!stages[stage].popups.hasOwnProperty(e))return!1;if(stages[stage].popups[e].snooze)for(var s in stages[stage].popups[e].views)stages[stage].popups[e].views[s].focus()},this.centerPopup=function(e){return!!stages[stage].popups.hasOwnProperty(e)&&void stages[stage].popups[e].center()},this.resizePopup=function(e,s,t){return!!stages[stage].popups.hasOwnProperty(e)&&void stages[stage].popups[e].resize(s,t)},this.addOverlay=function(e,s,t){if("undefined"==typeof t&&(t=config.overlay_delay),stages[stage].overlay)stages[stage].stage.el.off("transitionend");else{var a='<div class="ogx_overlay"></div>';stages[stage].stage.el.prepend(a),stages[stage].overlay={el:stages[stage].stage.el.find(".ogx_overlay:first")},e&&listenOverlay(!0)}switch(s){case OGX.App.OVERLAY_FADE:setTimeout(function(){stages[stage].overlay&&stages[stage].overlay.el&&(stages[stage].overlay.el.removeClass("ogx_overlay_fade_out"),stages[stage].overlay.el.addClass("ogx_overlay_fade_in"))},t);break;default:stages[stage].overlay&&stages[stage].overlay.el&&stages[stage].overlay.el.css("opacity",1)}},this.removeOverlay=function(e){if(stages[stage].overlay)if(listenOverlay(!1),"undefined"!=typeof e)switch(e){case OGX.App.OVERLAY_FADE:stages[stage].overlay.el.removeClass("ogx_overlay_fade_in"),stages[stage].overlay.el.addClass("ogx_overlay_fade_out"),stages[stage].overlay.el.css("opacity")>0?stages[stage].overlay.el.on("transitionend",function(){stages[stage].overlay&&stages[stage].overlay.el&&(stages[stage].overlay.el.off("transitionend"),stages[stage].overlay.el.remove(),stages[stage].overlay=null)}):stages[stage].overlay&&stages[stage].overlay.el&&(stages[stage].overlay.el.removeClass("ogx_overlay_fade_in"),stages[stage].overlay.el.removeClass("ogx_overlay_fade_out"),stages[stage].overlay.el.off("transitionend"),stages[stage].overlay.el.remove(),stages[stage].overlay=null)}else stages[stage].overlay&&stages[stage].overlay.el&&(stages[stage].overlay.el.remove(),stages[stage].overlay=null)},this.getOverlay=function(){return!!stages[stage].overlay&&stages[stage].overlay.el},this.getView=function(e,s){return!!(stages.hasOwnProperty(e)&&stages[e].hasOwnProperty("views")&&stages[e].views.hasOwnProperty(s)&&stages[e].views[s])&&stages[e].views[s].view},this.hasView=function(e,s){if(stages.hasOwnProperty(e)&&stages[e].hasOwnProperty("views"))for(var t in stages[e].views)if(stages[e].views[t].view.hasOwnProperty("name")&&stages[e].views[t].view.name===s)return!0;return!1},this.getViewClass=function(e,s){var t=that.getView(e,s);if(t)for(var a in Object.getPrototypeOf(t))if("constructor"!==a&&"BaseView"!==a)return a;return!1},this.goto=function(e,s){"undefined"==typeof s&&(s=!0);var t=findRoute(e);if(t){route=t;route.hasOwnProperty("stage");for(var a in t.route.views)t.route.views[a].hasOwnProperty("waypoint")?(console.log("waypoint"),waypoints.hasOwnProperty(t.route.views[a].waypoint)||(waypoints[t.route.views[a].waypoint]=new OGX.Waypoint.prototype[t.route.waypoint](t.data,html),waypoints[t.route.views[a].waypoint].__name=t.route.views[a].waypoint,waypoints[t.route.views[a].waypoint].__view=a,waypoints[t.route.views[a].waypoint].__url=e)):(handleRoute(t,a,null),s&&addToHist(e))}},this.routed=function(e,s,t){if(waypoints.hasOwnProperty(e.__name)){var a=findRoute(e.__url);a&&(handleRoute(a,e.__view,s,t),delete waypoints[e.__name])}},this.getRoute=function(){return route},this.getUrl=function(){return url},this.readFile=function(e,s){},this.writeFile=function(e,s,t){},checkModules()&&loadConfig()},OGX.App=function(e){"use strict";return new OGX.prototype.App(e)},OGX.App.READY="coreReady",OGX.App.OVERLAY_FADE="coreOverlayFade",OGX.App.OVERLAY_REMOVE="coreOverlayRemove",OGX.App.NAV_BACK="coreNavBack",OGX.App.APP_EXIT="coreAppExit",OGX.App.RESIZE="coreResize",OGX.App.MODE_MOBILE="coreModeMobile",OGX.App.MODE_DESKTOP="coreModeDesktop";