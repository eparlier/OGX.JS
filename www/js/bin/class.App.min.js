if(void 0===OGX)var OGX=function(){};OGX.Stages=function(){},OGX.Views=function(){},OGX.Controllers=function(){},OGX.Overlays={},OGX.App=function(){"use strict";var that=this,config,config_default={scope:["public"],overlay_delay:350,observe:!1,auto_exit:!1,chromeos:!1},windows_default,popups_default,stage=!1,stageShown=!1,stages={},isWebView=!1,isIos=/(iPhone|iPod|iPad)/i.test(navigator.userAgent),locked=!1,gfx=new OGX.ResponsiveGraphics({bind:!1}),winZ=1e3,to_preload=0,preloaded=0,sounds={},jsons={},route,url,page;function createStage(e){e.hasOwnProperty("template")&&(e.html=OGX.Templater.getTemplate(e.template)),e.hasOwnProperty("data")&&"{}"!==JSON.stringify(e.data)&&(e.html=OGX.Templater.templatize(e.data,e.html)),e.hasOwnProperty("use")&&e.use&&(stage=e.name,$("body").append('<div class="ogx_stage" style="display:none">'+e.html+"</div>")),OGX.Stages[e.name].prototype=Object.create(OGX.BaseStage.prototype),OGX.Stages[e.name].prototype.constructor=OGX.Stages[e.name];var s=new OGX.Stages[e.name];return e.el=$("body").children(".ogx_stage:last"),s._construct_(e),setTimeout(function(){s.constructor(e.data),e.hasOwnProperty("use")&&e.use&&s.ux(!0)},0),s}function blurStage(e){if(!stages.hasOwnProperty(e))return!1;for(var s in stages[e].windows)stages[e].windows[s].hasOwnProperty("blur")&&stages[e].windows[s].blur();for(var s in stages[e].popups)stages[e].popups[s].hasOwnProperty("blur")&&stages[e].popups[s].blur();for(var s in stages[e].views)stages[e].views[s].hasOwnProperty("blur")&&stages[e].views[s].blur()}function focusStage(e){if(!stages.hasOwnProperty(e))return!1;for(var s in stages[e].windows)stages[e].windows[s].hasOwnProperty("focus")&&stages[e].windows[s].focus();for(var s in stages[e].popups)stages[e].popups[s].hasOwnProperty("focus")&&stages[e].popups[s].focus();for(var s in stages[e].views)stages[e].views[s].hasOwnProperty("focus")&&stages[e].views[s].focus()}function clearStage(e){var s=!1;for(var t in e!==stage&&(s=stage,app.useStage(e)),clearStageViews(e),stages[e].popups)destroyPopup(t);for(var o in stages[e].windows)destroyWindow(o);for(var a in stages[e].controllers)destroyController(a);s&&app.useStage(s)}function clearStageViews(e){for(var s in stages[e].views)destroyView(s)}function findWindow(e){var s=e.el.parents(".ogx_window");if(s.length)return $(s[0]).data("ogx")}function attachWindow(e,s){var t=stages[stage].windows[e];void 0!==s&&s?(stages[stage].stage.el.append('<div id="ogx_temp" style="display:none;">'+t.el+"</div>"),t.el=stages[stage].stage.el.find("#ogx_temp").find(".ogx_window:first")):(stages[stage].stage.el.append(t.el),t.el=stages[stage].stage.el.find(".ogx_window:last")),t.attached=!0}function detachWindow(e,s){var t=stages[stage].windows[e];t.el=t.el.detach(),s&&stages[stage].stage.el.find("#ogx_temp").remove(),t.attached=!1}function destroyWindow(e){for(var s in listenWindow(!1,e),stages[stage].windows[e].views)destroyWindowView(e,s);stages[stage].windows[e].el.remove(),stages[stage].windows[e].destroy(),delete stages[stage].windows[e]}function animWindow(e,s){var t={opac:1,tX:0,tY:0},o=stages[stage].stage.el.width(),a=stages[stage].stage.el.height(),n=stages[stage].windows[e],i=n.el.outerWidth(),r=n.el.outerHeight(),g=n.el.find(".ogx_window_main_icon:first"),p=n.getTiming();switch(s.way&&(void 0===n.zindex&&(n.el.css("z-index",winZ),winZ++),s.hasOwnProperty("fade")&&s.fade&&n.el.css("opacity",0)),s.way?(placeWindow(e,s.anim,!0),p=p.in,g.removeClass("ogx_window_main_icon_left ogx_window_main_icon_right ogx_window_main_icon_top")):(p=p.out,s.hasOwnProperty("fade")&&s.fade&&(t.opac=0)),s.anim){case OGX.Window.ANIM_NONE:break;case OGX.Window.ANIM_TOP:s.way?(t.tY=0,g.addClass("ogx_window_main_icon_top")):t.tY=-r-10;break;case OGX.Window.ANIM_BOTTOM:s.way?(t.tY=a-r-10,g.addClass("ogx_window_main_icon_bottom")):t.tY=a;break;case OGX.Window.ANIM_RIGHT:s.way?(t.tX=o-i,g.addClass("ogx_window_main_icon_right")):t.tX=o+10;break;case OGX.Window.ANIM_LEFT:s.way?(t.tX=0,g.addClass("ogx_window_main_icon_left")):t.tX=-i-10}void 0!==s.anim_params&&(s.anim_params.hasOwnProperty("left")&&(t.tX=o-getSize("width",s.anim_params.left)),s.anim_params.hasOwnProperty("top")&&(t.tY=getSize("height",s.anim_params.top)),s.anim_params.hasOwnProperty("right")&&(t.tX=getSize("width",s.anim_params.right)));var l=100;s.way||(l=0),setTimeout(function(){n.el.on("transitionend",function(){n.el.off("transitionend"),s.way?(n.isDragable()&&n.enableDrag(),n.el.removeClass("ogx_window_anim_in")):n.el.removeClass("ogx_window_anim_out"),s.hasOwnProperty("cb")&&s.cb&&(s.hasOwnProperty("params")&&s.params?s.cb.apply(that,[s.params]):s.cb()),s.way?(n.status=OGX.Window.OPEN,stages[stage].stage.el.trigger(OGX.Window.OPEN,e),that.focusWindow(e)):(n.status=OGX.Window.CLOSED,stages[stage].stage.el.trigger(OGX.Window.CLOSED,e),s.remove&&that.removeWindow(e))}),s.way?(n.status=OGX.Window.OPENING,stages[stage].stage.el.trigger(OGX.Window.OPENING,e)):(that.blurWindow(e),n.status=OGX.Window.CLOSING,stages[stage].stage.el.trigger(OGX.Window.CLOSING,e)),n.el.css({transform:"translate3D("+t.tX+"px, "+t.tY+"px, 0px)",opacity:t.opac,transition:"all "+p+"ms",visibility:"visible"})},l)}function placeWindow(e,s,t){var o=stages[stage].stage.el.width(),a=stages[stage].stage.el.height(),n=stages[stage].windows[e],i=n.el.outerHeight(),r=n.el.outerWidth();switch(n.el.css("transition","none"),s){case OGX.Window.ANIM_NONE:t&&n.el.css({transform:"translate3D(0px, 0px, 0px)"});break;case OGX.Window.ANIM_TOP:t&&n.el.css({transform:"translate3D(0px, -"+i+"px, 0px)"});break;case OGX.Window.ANIM_BOTTOM:t&&n.el.css({transform:"translate3D(0px, "+a+"px, 0px)"});break;case OGX.Window.ANIM_RIGHT:t&&n.el.css({transform:"translate3D("+o+"px, 0px, 0px)"});break;case OGX.Window.ANIM_LEFT:t&&(o=n.el.outerWidth(),n.el.css({transform:"translate3D("+-r+"px, 0px, 0px)"}))}t||n.el.css("visibility","hidden")}function listenWindow(e,s){e?stages[stage].windows[s].el.on("mousedown",".ogx_window_main_icon_back",function(){that.hideWindow(s)}):stages[stage].windows[s].el.off("mousedown",".ogx_window_main_icon_back")}function destroyWindowView(e,s){void 0===s&&(s='.ogx_window[data-ogx="'+e+'"] .ogx_view'),stages[stage].windows[e].views[s]._destroy_(),stages[stage].windows[e].views[s].destroy(),stages[stage].windows[e].views[s].empty(),delete stages[stage].windows[e].views[s]}function listenPopupAnim(e,s){stages[stage].popups.hasOwnProperty(s)&&stages[stage].popups[s].el&&(e?stages[stage].popups[s].el.on("transitionend",function(){listenPopupAnim(!1),destroyPopup(s)}):stages[stage].popups[s].el.off("transitionend"))}function destroyPopup(e){if(stages[stage].popups.hasOwnProperty(e)){for(var s in stages[stage].popups[e].views)stages[stage].popups[e].views[s]._destroy_(),stages[stage].popups[e].views[s].destroy(),stages[stage].popups[e].views[s].empty(),delete stages[stage].popups[e].views[s];stages[stage].popups[e].destroy(),stages[stage].popups[e].el.remove(),delete stages[stage].popups[e]}}function listenOverlay(e){e?stages[stage].overlay.el.on("touchstart",onTouchOverlay):stages[stage].overlay.el.off("touchstart",onTouchOverlay)}function onTouchOverlay(e){e.preventDefault(),e.stopImmediatePropagation(),stages[stage].stage.el.trigger(OGX.App.OVERLAY_REMOVE),that.removeOverlay(),stages[stage].popup&&that.removePopup()}function removeOverlay(e){if(stages[stage].overlay&&stages[stage].overlay.hasOwnProperty("el")&&stages[stage].overlay.el.length)if(void 0!==e)switch(e){case OGX.App.OVERLAY_FADE:stages[stage].overlay.el.removeClass("ogx_overlay_fade_in"),stages[stage].overlay.el.addClass("ogx_overlay_fade_out"),0<stages[stage].overlay.el.css("opacity")?stages[stage].overlay.el.on("transitionend",function(){stages[stage].overlay&&stages[stage].overlay.el&&(stages[stage].overlay.el.off("transitionend"),stages[stage].overlay.el.remove(),stages[stage].overlay=null)}):(stages[stage].overlay.el.removeClass("ogx_overlay_fade_in"),stages[stage].overlay.el.removeClass("ogx_overlay_fade_out"),stages[stage].overlay.el.off("transitionend"),stages[stage].overlay.el.remove(),stages[stage].overlay=null)}else stages[stage].overlay.el.remove(),stages[stage].overlay=null}function createView(e){var s=new OGX.DisplayObject(e);e.hasOwnProperty("data")||(e.data={}),e.html=s.html(e.data),e.hasOwnProperty("id")||(e.id=e.name+"_"+(new Date).getTime()+Math.round(1e3*Math.random())),OGX.Views[e.name].prototype=Object.create(OGX.BaseView.prototype),OGX.Views[e.name].prototype.constructor=OGX.Views[e.name];var t=new OGX.Views[e.name];t._construct_(e);var o=t.el;e.scroll&&(o=o.children(".ogx_scroller_inner:first")),o.addClass("ogx_view"),e.css&&o.addClass(e.css),o.attr("data-ogx",e.name),"#"===e.id.substr(0,1)?o.attr("id",e.id.substr(1)):o.attr("data-ogx-id",e.id);var a=0;return(e.hasOwnProperty("html")||e.hasOwnProperty("scroll")&&e.scroll)&&(a=config.views.delay),setTimeout(function(){t.constructor(e.data)},a),t}function destroyView(e){stages[stage].views[e]._destroy_(),stages[stage].views[e].destroy(),stages[stage].views[e].empty(),delete stages[stage].views[e]}function createController(e,s,t){OGX.Controllers[e].prototype=Object.create(OGX.BaseController.prototype),OGX.Controllers[e].prototype.constructor=OGX.Controllers[e];var o=new OGX.Controllers[e];return o._construct_(s),o.constructor(t),o.ux(!0),o}function destroyController(e){stages[stage].controllers[e].destroy(),delete stages[stage].controllers[e]}function handleRoute(__route_obj,__data){var stage_target,stage_html,ctrl,ctrl_data,ctrl_views,view_conf,o={data:{}};if(__route_obj.route.hasOwnProperty("controllers"))for(var a in stage_html=!1,__route_obj.route.controllers){if(__route_obj.route.controllers[a].hasOwnProperty("template"))for(var b in __route_obj.route.controllers[a].hasOwnProperty("template"))stage_html=OGX.Templater.getTemplate(__route_obj.route.controllers[a].template[b]),stage_target=b;if(__route_obj.route.controllers[a].hasOwnProperty("html"))for(var b in __route_obj.route.controllers[a].html)stage_html=__route_obj.route.controllers[a].html[b],stage_target=b;for(var b in stage_html&&stages[stage].stage.el.find(stage_target).html(stage_html),ctrl_views={},__route_obj.route.controllers[a].views)view_conf=__route_obj.route.controllers[a].views[b],view_conf.container=b,ctrl_views[b]=createView(view_conf),stages[stage].views[b]=ctrl_views[b];ctrl_data=null,__route_obj.route.controllers[a].hasOwnProperty("data")&&__route_obj.route.controllers[a].data&&(ctrl_data=__route_obj.route.controllers[a].data),ctrl=createController(a,ctrl_views,ctrl_data),stages[stage].controllers[a]=ctrl}else for(var __where in __route_obj.route.views)o=merge(o,__route_obj.route.views[__where],!0),o.data=merge(o.data,__data,!0),"string"==typeof o.data&&0===o.data.indexOf("#")&&(o.data=eval(o.data.substr(1))),o.data=merge(__route_obj.data,o.data,!0),o.container=__where,o.name=__route_obj.route.views[__where].name,stages[stage].views[__where]=createView(o)}function findRoute(e){var s;for(var t in config.routing)if((s=e.match("^"+t+"$"))&&s.length){s.shift();for(var o={},a=0;a<s.length;a++)o[config.routing[t].properties[a]]=s[a];return{route:config.routing[t],data:o}}return!1}function addToHist(e){var s={url:e};history.pushState(s,"title"+(new Date).getTime(),page+"#"+e)}function writeFile(s,t,o){window.resolveLocalFileSystemURL(cordova.file.dataDirectory,function(e){e.getFile(s,{create:!0},function(e){e.createWriter(function(e){var s=new Blob([t],{type:"text/plain"});e.write(s),void 0!==o&&o()})})})}function readFile(e){file=e,window.resolveLocalFileSystemURL(cordova.file.dataDirectory+e,gotFile,onFail)}function gotFile(e){e.file(function(e){var s=new FileReader;s.onloadend=function(e){},s.readAsText(e)})}function onFail(e){$(document).trigger("LOAD_ERROR",e.code)}function listenResize(e){e?window.addEventListener("resize",onResize):window.removeEventListener("resize",onResize)}function onResize(){for(var e in stages)stages[e].popup&&stages[e].popup.hasOwnProperty("el")&&stages[e].popup.el&&(stages[e].popup.centered?stages[e].popup.center():stages[e].popup.autoSize())}function getSize(e,s){var t;return-1!==s.indexOf("%")?(t=s.split("%"),t=parseInt(t[0]),t=Math.round(t*stages[stage].stage.el[e]()/100)):(t=s.split("px"),t=parseInt(t[0])),t}function checkScope(e){for(var s=0;s<e.length;s++)if(-1!==config.scope.indexOf(e[s]))return!0;return!1}function merge(e,s,t){for(var o in s)t?e[o]=s[o]:e.hasOwnProperty(o)||(e[o]=s[o]);return e}function initPopState(){$(document).on("backbutton",function(e){if(e.preventDefault(),e.stopImmediatePropagation(),!locked){var s=!1;for(var t in stages[stage].windows)that.hideWindow(t,{remove:!0}),s=!0;for(var t in stages[stage].popups)that.removePopup(t,OGX.Popup.NOANIM),s=!0;that.removeOverlay(),s||($(document).trigger(OGX.App.NAV_BACK),navigator.app.backHistory())}}),$(window).on("popstate",function(e){if(locked)return e.preventDefault(),e.stopImmediatePropagation(),!1;null!==e.originalEvent.state?that.goto(e.originalEvent.state.url,!1):url!==config.stages[stage].home&&that.goto(config.stages[stage].home,!1)})}function initStages(){var e;for(var s in config.stages)config.stages.hasOwnProperty(s)&&(e=!1,config.stages[s].hasOwnProperty("html")?e=config.stages[s].html:config.stages[s].hasOwnProperty("template")&&(e=OGX.Templater.getTemplate(config.stages[s].template)),config.stages[s].name=s,config.stages[s].html=e,that.addStage(config.stages[s]))}function initPreload(){config.hasOwnProperty("templates")&&(to_preload++,setTimeout(function(){preloadTemplates()},0)),config.hasOwnProperty("preload")&&(config.preload.hasOwnProperty("images")&&(to_preload++,setTimeout(function(){preloadImages(config.preload.images)},0)),config.preload.hasOwnProperty("sounds")&&(to_preload++,setTimeout(function(){preloadSounds(config.preload.sounds)},0)),config.preload.hasOwnProperty("fonts")&&(to_preload++,setTimeout(function(){preloadFonts(config.preload.fonts)},0)),config.preload.hasOwnProperty("json")&&(to_preload++,setTimeout(function(){preloadJSON(config.preload.json)},0))),0===to_preload&&appReady()}function preloadTemplates(){var e=[],s=config.templates.path;for(var t in config.templates.files)e.push({name:t,file:s+config.templates.files[t]});OGX.Templater.loadTemplates(e,onPreloaded)}function preloadImages(e){var s,t=0;if(e.files.length)for(var o=0;o<e.files.length;o++)(s=new Image).onload=function(){++t===e.files.length&&onPreloaded()},s.src=e.path+e.files[o];else onPreloaded()}function preloadSounds(e){var s=0,t=0;for(var o in e.files)t++;if(t)for(o in e.files)sounds[e.files[o]]=new Audio,sounds[e.files[o]].oncanplaythrough=function(){t===++s&&onPreloaded()},sounds[e.files[o]].src=e.path+e.files[o],sounds[e.files[o]].load();else onPreloaded()}function preloadFonts(e){var s='<div class="ogx_font_loader">';if(e.length){for(var t=0;t<e.length;t++)s+='<span class="'+e[t]+'"></span>';s+="</div>",$("body").append(s),onPreloaded()}else onPreloaded()}function preloadJSON(e){var t=e.files.length;if(t)for(var o=0,s=0;s<t;s++)a(e.files[s]);else onPreloaded();function a(s){$.getJSON(e.path+s,function(e){jsons[s]=e,++o===t&&onPreloaded()})}}function onPreloaded(){preloaded++,$(document).trigger(OGX.App.LOADING,{total:to_preload,loaded:preloaded}),preloaded===to_preload&&(initPopState(),listenResize(!0),appReady())}function appReady(){initStages(),that.goto(config.stages[stage].home),$(document).trigger(OGX.App.READY)}function initDefaults(){for(var a in page=window.location.pathname.split("/").slice(-1)[0],isWebView=void 0!==window.ontouchstart,config_default)config.hasOwnProperty(a)||(config[a]=config_default[a]);if(config.hasOwnProperty("windows")&&config.windows&&(windows_default=config.windows,config.windows.hasOwnProperty("style")&&(config.windows.style=eval(config.windows.style))),config.hasOwnProperty("popups")&&config.popups&&(popups_default=config.popups,popups_default.hasOwnProperty("anim")&&(popups_default.anim=eval(popups_default.anim))),config.hasOwnProperty("overlays")&&config.overlays)for(var a in config.overlays)OGX.Overlays[a]=config.overlays[a];that.el=$(document)}function loadConfig(){$.getJSON("app.json",function(e){config=e,init()})}function checkModules(){return void 0===OGX.Templater?(console.log("%c CRITICAL ERROR - OGX.Templater not found! ","background:#222; color: #FF0000"),!1):void 0===OGX.DisplayObject?(console.log("%c CRITICAL ERROR - OGX.DisplayObject not found! ","background:#222; color: #FF0000"),!1):void 0===OGX.Scroller?(console.log("%c CRITICAL ERROR - OGX.Scroller not found! ","background:#222; color: #FF0000"),!1):void 0===OGX.BaseView?(console.log("%c CRITICAL ERROR - OGX.BaseView not found! ","background:#222; color: #FF0000"),!1):void 0===OGX.BaseController?(console.log("%c CRITICAL ERROR - OGX.BaseController not found! ","background:#222; color: #FF0000"),!1):void 0===OGX.BaseStage?(console.log("%c CRITICAL ERROR - OGX.BaseStage not found! ","background:#222; color: #FF0000"),!1):void 0===OGX.Window?(console.log("%c CRITICAL ERROR - OGX.Window not found! ","background:#222; color: #FF0000"),!1):void 0!==OGX.Popup||(console.log("%c CRITICAL ERROR - OGX.Popup not found! ","background:#222; color: #FF0000"),!1)}function init(){initDefaults(),initPreload()}this.isWebView=function(){return isWebView},this.bindGfx=function(e,s){gfx.bind(e,s)},this.unbindGfx=function(e){gfx.unbind(e)},this.refreshGfx=function(e){gfx.resize(e)},this.addStage=function(e){if(void 0===e)return!1;if(!e.hasOwnProperty("name"))return!1;if(stages.hasOwnProperty(e.name))return!1;var s=createStage(e);stages[e.name]={stage:s,windows:{},popups:{},views:{},controllers:{},overlay:null,snooze:!1},e.hasOwnProperty("use")||(e.use=!0),e.use&&that.showStage(e.name)},this.removeStage=function(e){if(!stages.hasOwnProperty(e))return!1;clearStage(e),delete stages[e]},this.useStage=function(e){stage=e},this.getCurrentStage=function(){return stage},this.getStage=function(e){return!!stages.hasOwnProperty(e)&&stages[e]},this.getStages=function(){var e=[];for(var s in e)e.push(s);return e},this.snoozeStage=function(e){if(!stages[e].snooze){for(var s in stages[e].snooze=!0,stages[e].stage.views)stages[e].stage.views[s].blur();stages[e].stage.el=stages[e].stage.el.detach()}},this.wakeStage=function(e){if(stages[e].snooze){for(var s in stages[e].snooze=!0,stages[e].stage.views)stages[e].stage.views[s].focus();stages[stageShown].stage.el.appendTo("body"),stages[e].stage.el=$("body").find(".ogx_stage:last")}},this.showStage=function(e,s){if(void 0===s&&(s=!1),s){var t=$(window).height();switch(s){case OGX.MobileStage.ANIM_SWAP:stages[stageShown].stage.el.on("transitionend",function(){stages[stageShown].stage.el.off("transitionend"),stages[stageShown].stage.el.css("top",-t+"px"),stages[e].stage.el.css("top","0px"),stages[e].stage.el.on("transitionend",function(){stages[e].stage.el.off("transitionend"),stages[e].stage.el.css("transform","scale(1)"),stages[stageShown].stage.el.removeClass("ogx_stage_anim"),stages[stageShown].stage.el.css("display","none"),stageShown=e,that.el.trigger(OGX.MobileStage.STAGE_CHANGE,{old:stageShown,new:e})})}),stages[e].stage.el.addClass("ogx_stage_anim"),stages[stageShown].stage.el.addClass("ogx_stage_anim"),stages[stageShown].stage.el.css("transform","scale(0.9)"),stages[e].stage.el.css("top",t+"px"),stages[e].stage.el.css("display","block"),stages[e].stage.el.css("transform","scale(0.9)"),stages[e].stage.el.addClass("ogx_stage_anim");break;case OGX.MobileStage.ANIM_FLIP:stages[e].stage.el.appendTo("body"),stages[e].stage.el.addClass("ogx_stage_anim_swap"),stages[stageShown].stage.el.addClass("ogx_stage_anim"),stages[stageShown].stage.el.addClass("ogx_stage_anim_flip")}}else stageShown&&stages[stageShown].stage.el.css("display","none"),stages[e].stage.el.css("display","block"),stageShown=e},this.addView=function(e){var s=$(e.container).parents(".ogx_window");if(s.length)return this.addToWindow($(s[0]).data("ogx"),e);var t=$(e.container).parents(".ogx_popup");return t.length?this.addToPopup($(t[0]).data("ogx"),e):this.addToStage(e)},this.findView=function(e){var s=$(e).parents(".ogx_window");if(s.length)return this.getWindowView($(s[0]).data("ogx"),e);var t=$(e).parents(".ogx_popup");return t.length?this.getPopupView($(t[0]).data("ogx"),e):this.getView(e,stage)},this.removeView=function(e){var s=$(e).parents(".ogx_window");if(s.length)return this.removeFromWindow($(s[0]).data("ogx"),e);var t=$(e).parents(".ogx_popup");return t.length?this.removeFromPopup($(t[0]).data("ogx"),e):this.removeFromStage(e)},this.addToStage=function(e){return void 0!==e&&(!!e.hasOwnProperty("name")&&(!!e.hasOwnProperty("container")&&("string"!=typeof e.container?(console.log("%c CRITICAL ERROR - container must be a selector for view "+e.name+"! ","background:#222; color: #FF0000"),!1):OGX.Views.hasOwnProperty(e.name)?(e.hasOwnProperty("history")||(e.history=!0),OGX.Views[e.name].hasOwnProperty("scope")||(OGX.Views[e.name].scope=["public"]),checkScope(OGX.Views[e.name].scope)?(stages[stage].views.hasOwnProperty(e.container)&&that.removeFromStage(e.container),stages[stage].views[e.container]=createView(e),!0):(console.log("%c ERROR  - Bad scope for view "+e.name),!1)):(console.log("%c CRITICAL ERROR - OGX.Views."+e.name+" not found! ","background:#222; color: #FF0000"),!1))))},this.removeFromStage=function(e){stages[stage].views.hasOwnProperty(e)&&destroyView(e)},this.windowExists=function(e){return stages[stage].windows.hasOwnProperty(e)},this.windowOpen=function(e){return!!stages[stage].windows.hasOwnProperty(e)&&stages[stage].windows[e].status===OGX.Window.OPEN},this.getWindow=function(e){return"object"==typeof e&&(e=e._window_()),!("string"!=typeof e||!that.windowExists(e))&&stages[stage].windows[e]},this.getWindows=function(e){if(void 0===e&&(e=!1),e){var s=!1;e instanceof RegExp&&(s=!0)}var t=[];for(var o in stages[stage].windows)e?s?o.match(e)&&t.push(o):-1!==o.indexOf(e)&&t.push(o):t.push(o);return t},this.addWindow=function(__config){if(!__config.hasOwnProperty("name")||this.windowExists(__config.name))return!1;__config=void 0===__config?JSON.parse(JSON.stringify(windows_default)):merge(__config,windows_default,!1),"string"==typeof __config.anim&&-1!==__config.anim.indexOf(".")&&(__config.anim=eval(__config.anim)),__config.container=stages[stage].stage.el[0],__config.core=this;var win=new OGX.Window(__config);return win.snooze=!1,stages[stage].windows[__config.name]=win,__config.hasOwnProperty("view")&&that.addToWindow(__config.name,__config.view),__config.hasOwnProperty("anim")&&__config.anim&&that.showWindow(__config.name,__config),win},this.showWindow=function(e,s){var t={anim:OGX.Window.ANIM_NONE,params:!1,fade:!1};if(s=void 0===s?JSON.parse(JSON.stringify(t)):merge(s,t,!1),stages[stage].windows.hasOwnProperty(e)){var o=stages[stage].windows[e];o.blur&&o.blurred&&that.focusWindow(e),o.anim=s.anim,s.way=!0,setTimeout(function(){animWindow(e,s)},0),listenWindow(!0,e)}},this.hideWindow=function(e,s){"string"!=typeof e&&(e=findWindow(e));var t={params:!1,fade:!1};if(s=void 0===s?JSON.parse(JSON.stringify(t)):merge(s,t,!1),!that.windowExists(e))return!1;that.blurWindow(e),stages[stage].windows[e].isDragable()&&stages[stage].windows[e].disableDrag(),s.hasOwnProperty("anim")||stages[stage].windows[e].anim&&(s.anim=stages[stage].windows[e].anim),listenWindow(!1,e),s.way=0,setTimeout(function(){animWindow(e,s)},0),stages[stage].stage.el.trigger(OGX.Window.CLOSING,e),stages[stage].stage.el.trigger(OGX.Window.CLOSING+"_"+e,e)},this.swapWindows=function(e,s){var t,o,a,n;return!(!that.windowExists(e)||!that.windowExists(s))&&(t=that.getWindow(e),o=that.getWindow(s),a=t.el.css("z-index"),n=o.el.css("z-index"),t.el.css("z-index",n),o.el.css("z-index",a),!0)},this.snoozeWindow=function(e){stages[stage].windows[e].snooze||(stages[stage].windows[e].snooze=!0,that.blurWindow(e),stages[stage].windows[e].el=stages[stage].windows[e].el.detach())},this.wakeWindow=function(e){stages[stage].windows[e].snooze&&(stages[stage].windows[e].snooze=!1,that.focusWindow(e),stages[stage].windows[e].el=stages[stage].windows[e].el.detach(),stages[stage].windows[e].el.appendTo(stages[stage].stage.el),stages[stage].windows[e].el=stages[stage].stage.el.find(".ogx_window:last"))},this.blurWindow=function(e){if(stages[stage].windows[e].blur&&!stages[stage].windows[e].blurred){for(var s in stages[stage].windows[e].views)stages[stage].windows[e].views[s].blur();stages[stage].windows[e].blurred=!0}},this.focusWindow=function(e){if(stages[stage].windows[e].blur&&stages[stage].windows[e].blurred){for(var s in stages[stage].windows[e].views)stages[stage].windows[e].views[s].focus();stages[stage].windows[e].blurred=!1}},this.removeWindow=function(e){return!!that.windowExists(e)&&(destroyWindow(e),!0)},this.removeWindows=function(e){for(var s in e)that.windowExists(s)&&destroyWindow(s);return!0},this.removeAllWindows=function(e){for(var s in void 0===e&&(e=[]),stages[stage].windows)-1!==e.indexOf(s)&&destroyWindow(__window_name)},this.addToWindow=function(e,s){if(!s.hasOwnProperty("name"))return!1;s.hasOwnProperty("container")||(s.container='.ogx_window[data-ogx="'+e+'"] .ogx_view'),stages[stage].windows[e].snooze&&that.wakeWindow(e),stages[stage].windows[e].views.hasOwnProperty(s.container)&&that.removeFromWindow(e,s.container),s.hasOwnProperty("data")||(s.data={}),stages[stage].windows[e].scroll&&!stages[stage].windows[e].ready?stages[stage].windows[e].el.on(OGX.Window.READY,function(){stages[stage].windows[e].el.off(OGX.Window.READY),stages[stage].windows[e].views[s.container]=createView(s),stages[stage].windows[e].views[s.container]._window_(e)}):(stages[stage].windows[e].views[s.container]=createView(s),stages[stage].windows[e].views[s.container]._window_(e))},this.removeFromWindow=function(e,s){return!!stages[stage].windows[e].views.hasOwnProperty(s)&&(destroyWindowView(e,s),!0)},this.getWindowView=function(e,s){return void 0===s&&(s='.ogx_window[data-ogx="'+e+'"] .ogx_view'),!!stages[stage].windows[e].views.hasOwnProperty(s)&&stages[stage].windows[e].views[s]},this.addPopup=function(e){if(!e.hasOwnProperty("name"))return!1;if(stages[stage].popups.hasOwnProperty(e.name))return!1;e.container=stages[stage].stage.el,e.chromeos=config.chromeos,e=void 0===e?JSON.parse(JSON.stringify(popups_default)):merge(e,popups_default,!1);var s,t=new OGX.Popup(e);(e.hasOwnProperty("anim")||(e.anim=OGX.Popup.NOANIM),e.hasOwnProperty("overlay")||(e.overlay=!1),stages[stage].popups[e.name]=t,e.hasOwnProperty("view")&&e.view)&&(e.view.hasOwnProperty("container")?(s=e.view.container,e.view.container=stages[stage].popups[e.name].el.find(".ogx_popup_body:first").find(s)[0]):(s=".ogx_popup_body:first",e.view.container=stages[stage].popups[e.name].el.find(s)[0]),stages[stage].popups[e.name].views[s]=createView(e.view));switch(e.anim){case OGX.Popup.ANIM_FADE:setTimeout(function(){stages[stage].popups[e.name].el.removeClass("ogx_popup_fade_out"),stages[stage].popups[e.name].el.addClass("ogx_popup_fade_in")},100);break;case OGX.Popup.NOANIM:stages[stage].popups[e.name].el.css("opacity",1)}return e.overlay&&this.addOverlay(e.listen_overlay,OGX.App.OVERLAY_FADE),!0},this.removePopup=function(e,s){if(stages[stage].popups.hasOwnProperty(e)){var t;switch(stages[stage].popups[e].blur(),(t=void 0!==s?s:stages[stage].popups[e].anim)||(t=OGX.Popup.NOANIM),t){case OGX.Popup.ANIM_FADE:listenPopupAnim(!0,e),stages[stage].popups[e].el.removeClass("ogx_popup_fade_in"),stages[stage].popups[e].el.addClass("ogx_popup_fade_out");break;case OGX.Popup.NOANIM:destroyPopup(e)}return!0}return!1},this.getPopup=function(e){return!!this.popupExists(e)&&stages[stage].popups[e]},this.popupExists=function(e){return stages[stage].popups.hasOwnProperty(e)},this.getVisiblePopups=function(){var e=[];for(var s in stages[stage].popups)"visible"===stages[stage].popups[s].el.css("visibility")&&e.push(s);return e},this.hidePopup=function(e,s){if(!stages[stage].popups.hasOwnProperty(e))return!1;if(this.snoozePopup(e),void 0===s&&(s=!1),s)switch(s){case OGX.Popup.ANIM_FADE:stages[stage].popups[e].el.on("transitionend",function(){stages[stage].popups[e].el.off("transitionend"),stages[stage].popups[e].el.css("visibility","hidden")}),stages[stage].popups[e].el.removeClass("ogx_popup_fade_in"),stages[stage].popups[e].el.addClass("ogx_popup_fade_out")}else stages[stage].popups[e].el.removeClass("ogx_popup_fade_in"),stages[stage].popups[e].el.removeClass("ogx_popup_fade_out"),stages[stage].popups[e].el.css("visibility","hidden"),stages[stage].popups[e].el.css("opacity",0)},this.showPopup=function(e,s){if(!stages[stage].popups.hasOwnProperty(e))return!1;if(this.wakePopup(e),void 0===s&&(s=!1),s)switch(s){case OGX.Popup.ANIM_FADE:stages[stage].popups[e].el.removeClass("ogx_popup_fade_out"),stages[stage].popups[e].el.addClass("ogx_popup_fade_in"),stages[stage].popups[e].el.css("visibility","visible")}else stages[stage].popups[e].el.removeClass("ogx_popup_fade_in"),stages[stage].popups[e].el.removeClass("ogx_popup_fade_out"),stages[stage].popups[e].el.css("visibility","visible"),stages[stage].popups[e].el.css("opacity",1)},this.bringPopupToFront=function(e){if(!stages[stage].popups.hasOwnProperty(e))return!1;stages[stage].popups[e].bringToFront()},this.addToPopup=function(e,s){return!!stages[stage].popups.hasOwnProperty(e)&&(s.hasOwnProperty("container")||(s.container='.ogx_popup[data-ogx="'+e+'"] .ogx_view'),stages[stage].popups[e].snooze&&that.wakePopup(e),stages[stage].popups[e].views.hasOwnProperty(s.container)&&that.removeFromPopup(e,s.container),!stages[stage].popups[e].scroll||stages[stage].popups[e].tabbed||stages[stage].popups[e].ready?stages[stage].popups[e].views[s.container]=createView(s):stages[stage].popups[e].el.on(OGX.Popup.READY,function(){stages[stage].popups[e].el.off(OGX.Popup.READY),stages[stage].popups[e].views[s.container]=createView(s)}),!0)},this.getPopupView=function(e,s){if(void 0===s&&(s=".ogx_popup_body:first"),stages[stage].popups.hasOwnProperty(e)){if(stages[stage].popups[e].tabbed){var t=stages[stage].popups[e].getCurrent();s=stages[stage].popups[e].getContainers()[t]}if(stages[stage].popups[e].views.hasOwnProperty(s))return stages[stage].popups[e].views[s]}return!1},this.getPopupViews=function(e){var s=[];if(stages[stage].popups.hasOwnProperty(e)&&stages[stage].popups[e].tabbed){for(var t in stages[stage].popups[e].views)s.push(stages[stage].popups[e].views[t]);return s}return!1},this.removeFromPopup=function(e,s){return!!stages[stage].popups.hasOwnProperty(e)&&(!!stages[stage].popups[e].views.hasOwnProperty(s)&&(destroyView(stages[stage].popups[e].views[s]),delete stages[stage].popups[e].views[s],!0))},this.wakePopup=function(e){if(!stages[stage].popups.hasOwnProperty(e))return!1;if(stages[stage].popups[e].snooze){for(var s in stages[stage].popups[e].views)stages[stage].popups[e].views[s].focus();stages[stage].popups[e].snooze=!1}},this.snoozePopup=function(e){if(!stages[stage].popups.hasOwnProperty(e))return!1;if(!stages[stage].popups[e].snooze){for(var s in stages[stage].popups[e].views)stages[stage].popups[e].views[s].blur();stages[stage].popups[e].snooze=!0}},this.centerPopup=function(e){if(!stages[stage].popups.hasOwnProperty(e))return!1;stages[stage].popups[e].center()},this.resizePopup=function(e,s,t){if(!stages[stage].popups.hasOwnProperty(e))return!1;stages[stage].popups[e].resize(s,t)},this.movePopup=function(e,s,t){if(!stages[stage].popups.hasOwnProperty(e))return!1;void 0===s&&(s=null),void 0===t&&(t=null),stages[stage].popups[e].move(s,t)},this.addOverlay=function(e,s,t){if(void 0===e&&(e=!1),void 0===t&&(t=config.overlay_delay),stages[stage].overlay)stages[stage].stage.el.off("transitionend");else{stages[stage].stage.el.prepend('<div class="ogx_overlay"></div>'),stages[stage].overlay={el:stages[stage].stage.el.find(".ogx_overlay:first")},e&&listenOverlay(!0)}switch(s){case OGX.App.OVERLAY_FADE:setTimeout(function(){stages[stage].overlay&&stages[stage].overlay.el&&(stages[stage].overlay.el.removeClass("ogx_overlay_fade_out"),stages[stage].overlay.el.addClass("ogx_overlay_fade_in"))},t);break;default:stages[stage].overlay&&stages[stage].overlay.el&&stages[stage].overlay.el.css("opacity",1)}},this.removeOverlay=function(e){stages[stage].overlay&&(listenOverlay(!1),setTimeout(function(){removeOverlay(e)},0))},this.getOverlay=function(){return!!stages[stage].overlay&&stages[stage].overlay.el},this.getView=function(e,s){return void 0===s&&(s=stage),!!(stages.hasOwnProperty(s)&&stages[s].hasOwnProperty("views")&&stages[s].views.hasOwnProperty(e)&&stages[s].views[e])&&stages[s].views[e]},this.getViewByName=function(e,s,t){void 0===s&&(s=0),void 0===t&&(t=stage);var o=!1;if((!s||1<s)&&(o=[]),t&&stages[t].hasOwnProperty("views"))for(var a in stages[t].views)if(stages[t].views[a].el.data("ogx")===e){if(1===s)return stages[t].views[a];if(o.push(stages[t].views[a]),o.length===s)return o}return o},this.hasView=function(e,s){if(void 0===s&&(s=stage),stages.hasOwnProperty(s)&&stages[s].hasOwnProperty("views"))for(var t in stages[s].views)if(stages[s].views[t].el&&stages[s].views[t].el.data("ogx")===e)return!0;return!1},this.getViewClass=function(e,s){void 0===s&&(s=stage);var t=that.getView(e,s);return!!t&&t.el.data("ogx")},this.lock=function(){locked=!0},this.unlock=function(){locked=!1},this.isLocked=function(){return locked},this.goto=function(e,s,t){clearStageViews(stage),void 0===t&&(t={}),void 0===s&&(s=!0);var o=findRoute(e);o&&(url=e,handleRoute(route=o,t),s&&addToHist(e))},this.getRoute=function(){return route},this.getUrl=function(){return url},this.readFile=function(e,s){},this.writeFile=function(e,s,t){},this.getSound=function(e){if(sounds.hasOwnProperty(e)){if(isIos){var s=new Audio;return s.src=config.preload.sounds.path+e,s}return sounds[e]}return!1},this.getJSON=function(e){return!!jsons.hasOwnProperty(e)&&jsons[e]},checkModules()&&loadConfig()},OGX.App.LOADING="coreLoading",OGX.App.READY="coreReady",OGX.App.OVERLAY_FADE="coreOverlayFade",OGX.App.OVERLAY_REMOVE="coreOverlayRemove",OGX.App.NAV_BACK="coreNavBack",OGX.App.APP_EXIT="coreAppExit",OGX.App.RESIZE="coreResize",OGX.App.MODE_MOBILE="coreModeMobile",OGX.App.MODE_DESKTOP="coreModeDesktop";