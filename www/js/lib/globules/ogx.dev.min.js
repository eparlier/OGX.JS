/* globules.io OGX.JS 1.1.9.1.debug */ 
if(void 0===OGX)var OGX={};if(OGX.Data={},OGX.Data.weld=function(t,r,i,e){void 0===i&&(i=!1),void 0===e&&(e=!1);var a=t;return e&&(a=JSON.parse(JSON.stringify(t))),function t(r,e){for(var a in e)!r.hasOwnProperty(a)||i?r[a]=e[a]:"object"==typeof e[a]&&t(r[a],e[a])}(a,r),a},OGX.Data.merge=function(t,r,e,a,i){for(var s in void 0===e&&(e=!1),void 0===a&&(a=!1),void 0===i&&(i=!1),a&&(t=JSON.parse(JSON.stringify(t))),r)e?i?t.hasOwnProperty(s)&&(t[s]=r[s]):t[s]=r[s]:t.hasOwnProperty(s)||i||(t[s]=r[s]);return t},OGX.Data.props=function(t,r){for(var e in r)if(!t.hasOwnProperty(r[e]))return!1;return!0},OGX.Data.clone=function(t){return JSON.parse(JSON.stringify(t))},OGX.Data.isOML=function(t){for(var r in t)if(-1!==r.indexOf(":"))return!0;return!1},OGX.Data.stringToVal=function(t){var r=-1;return"true"===t&&(r=!0),"false"===t&&(r=!1),-1!==r?r:t.match(/^([0-9]+(\.[0-9]+)){0,1}$/g)?Number(t):t},OGX.Data.pad=function(t,r,e,a){void 0===a&&(a="0"),void 0===e&&(e=-1);for(var i=String(t);i.length<r;)-1===e?i=a+i:i+=a;return i},OGX.Data.addDec=function(t){return parseFloat(Math.round(100*t)/100).toFixed(2)},OGX.Data.isInt=function(t){return Number(t)===t&&t%1==0},OGX.Data.isFloat=function(t){return Number(t)===t&&t%1!=0},void 0===OGX)var OGX={};OGX.Debug=function(){var i=1,s=[1,2,3],n=[null,{label:"Error",color:"#EE1111"},{label:"Warning",color:"#ffdb16"},{label:"Info",color:"#23b438"},{label:"Verbose",color:"#AAAAAA"},{label:"Detail",color:"#999999"}];this.log=function(t){var r=Array.prototype.slice.call(arguments);1===r.length&&(r[1]=r[0],r[0]=1);var e=!1;if("boolean"==typeof s){if(!s)return;e=!0}else Array.isArray(s)&&-1!==s.indexOf(t)&&(e=!0);r.shift();var a=r.join(" ");e&&(console.log.call(null,"%c ["+OGX.Data.pad(i,6,-1,"0")+"] "+OGX.Data.pad(n[t].label,8,1," ")+":","background:#222; color:"+n[t].color+"; padding:6px 3px 6px 3px;",a),i++)},this.level=function(){var t=Array.prototype.slice.call(arguments);if(!t.length)return s;s=1!==t.length||"boolean"!=typeof t[0]?t:t[0]},console.log("%c OGX.JS💞OML v1.1.0","background:#222; color:#DDD; padding:8px 3px 8px 3px;")},OGX.Debug=new OGX.Debug;var debug=OGX.Debug.log;if(void 0===OGX)var OGX={};if(OGX.List=function(){if("undefined"!=typeof moment){var filteringMode="and",filterCount=0,indexes=!1;1===arguments.length&&arguments[0]instanceof Array&&(arguments=arguments[0]);var array=Object.create(Array.prototype);for(var method in array=Array.apply(array,arguments)||array,OGX.List.prototype)OGX.List.prototype.hasOwnProperty(method)&&(array[method]=OGX.List.prototype[method]);return array.insert=function(t,r){return void 0===r?array.push(t):array.splice(r,0,t),indexes&&addToCache(t),!0},array.delete=function(t){var r=this,e=array.splice(t,1);if(e.length){if(indexes){var a=matchesCache(e[0]);a&&setTimeout(function(){r.rebuild(a)},0)}return e[0]}return!1},array.last=function(){if(this.length)return this[this.length-1]},array.findDelete=function(t,r,e){var a=0;void 0===e&&(e=0);for(var i=new OGX.List,s=0;s<this.length;s++)if(this[s][t]===r){if(i.push(this.splice(s,1)[0]),indexes){var n=matchesCache(i.last());n&&this.rebuild(n)}if(a++,0<e&&e===a)return 1===e?i[0]:i;s--}return i},array.findReplace=function(t,r,e,a){var i=0;void 0===a&&(a=0);for(var s=new OGX.List,n=0;n<this.length;n++)if(this[n][t]===r&&(s.push(this[n]),i++,this[n]=e,0<a&&a===i))return 1===a?s[0]:s;return!!s.length&&s},array.findUpdate=function(t,r,e,a,i){var s=0;void 0===a&&(a=!1),void 0===i&&(i=0);for(var n,o=new OGX.List,h=0;h<this.length;h++)if(this[h][t]===r){for(var f in n=!1,e)a?this[h].hasOwnProperty(f)&&(this[h][f]=e[f],n=!0,s++):(this[h][f]=e[f],n=!0,s++);if(n&&(o.push(this[h]),0<i&&i===s))return 1===i?o[0]:o}return!!o.length&&o},array.findIndex=function(t,r){var e=!1;r instanceof RegExp&&(e=!0);for(var a=0;a<this.length;a++)if(e){if(this[a][t].match(r))return{index:a}}else if(this[a][t]===r)return{index:a};return!1},array.find=function(t,r,e){var a=0,i=new OGX.List,s=!1;r instanceof RegExp&&(s=!0),void 0===e&&(e=0);for(var n=0;n<this.length;n++)if(s?this[n][t].match(r)&&(i.push(this[n]),a++):this[n][t]===r&&(i.push(this[n]),a++),0<e&&a===e)return 1===e?i[0]:i;return!!i.length&&i},array.swap=function(t,r){var e=this[t];this[t]=this[r],this[r]=e},array.cache=function(){indexes=indexes||{};var t=[],r=[];if(1<arguments.length){for(var e=0;e<arguments.length;e++)t.push(arguments[e]);t=t.join("|")}else t=arguments[0];indexes.hasOwnProperty(t)||(indexes[t]={});for(var a=0;a<this.length;a++){r=[];for(e=0;e<arguments.length;e++)r.push(this[a][arguments[e]]);r=r.join("|"),indexes[t].hasOwnProperty(r)||(indexes[t][r]=[]),indexes[t][r].push(this[a])}return!0},array.uncache=function(t){if(!indexes)return!1;var r=t;return 1<arguments.length&&(r=arguments.join("|")),!!indexes.hasOwnProperty(r)&&(delete indexes[r],!0)},array.rebuild=function(t){for(var r=0;r<t.length;r++)delete indexes[t[r]],this.cache(t[r])},array.read=function(t,r,e){var a,i,s=arguments;if(!indexes)return!1;if(!s.length)return indexes;if("object"==typeof t){for(var n in e=s[1],a=[],i=[],t)a.push(n),i.push(t[n]);a=a.join("|"),i=i.join("|")}else a=t,i=r;return void 0===e&&(e=0),!(!indexes.hasOwnProperty(a)||!indexes[a].hasOwnProperty(i))&&(e?1<e?indexes[a][i].splice(0,e):indexes[a][i][0]:indexes[a][i])},array.clear=function(){indexes=!1,filterCount=0,this.length=0},array.unique=function(t,r,e){void 0===r&&(r=!0),void 0===e?e=[t]:Array.isArray(e)||(e=[e]);for(var a,i=this.get(),s=[],n=new OGX.List,o=0;o<i.length;o++)if(-1===s.indexOf(i[o][t])&&(s.push(i[o][t]),r)){a={};for(var h=0;h<e.length;h++)a[e[h]]=i[o][t];n.push(a)}return r?n:s},array.order=function(t,r){array.sort(dynamicSort(t,r))},array.group=function(t,r,e){if(Array.isArray(t))return array.groupm(t,r,e);for(var a,i={},s=0;s<this.length;s++)(a=extract(this[s],t,r,e))&&(a=a.split(".").pop(),i.hasOwnProperty(a)||(i[a]=new OGX.List),i[a].push(this[s]));return i},array.groupm=function(h,f,l){return function t(r,e){var a=new OGX.List(r),i=f,s=l;void 0!==f&&Array.isArray(f)&&(i=f[e]),void 0!==l&&Array.isArray(l)&&(s=l[e]);var n=a.group(h[e],i,s);if(e+1<=h.length-1)for(var o in n)n[o]=t(n[o],e+1);return n}(this,0)},array.filters={},array.addFilter=function(t,r,e){this.filters.hasOwnProperty(t)||(this.filters[t]=[]);var a={};return a[r]=e,this.filters[t].push(a),filterCount++,!0},array.removeFilter=function(t){return!!this.filters.hasOwnProperty(t)&&(filterCount-=this.filters[t].length,delete this.filters[t],!0)},array.getFilters=function(){return this.filters},array.resetFilters=function(){this.filters={},filterCount=0},array.setFilters=function(t){for(var r in this.resetFilters(),t)for(var e=0;e<t[r].length;e++)for(var a in t[r][e])array.addFilter(r,a,t[r][e][a])},array.setFilteringMode=function(t){filterMode=t},array.get=function(t,r,e,a,i){void 0===r&&(r=!1),void 0===e&&(e=!1),"number"==typeof e&&(a=e,e=!1),void 0===a&&(a=0),void 0===i&&(i=!1);var s=this.getFilters();for(var n in this.resetFilters(),t)for(var o in t[n])this.addFilter(n,o,t[n][o]);var h=this.filter(a,i);if(this.resetFilters(),this.setFilters(s),i)return h;if(1===a)return!!h.length&&h[0];if(r)for(var n in r){h.order(n,r[n]);break}return e?h.group.apply(null,e):h},array.unset=function(t,r){void 0===r&&(r=0);var e=new OGX.List,a=this.get(t,null,null,r,!0);if(a)for(var i=0;i<a.length;i++)e.push(this.delete(a[i]-e.length));return 1===r&&e.length?e[0]:e},array.filter=function(__limit,__as_position){void 0===__limit&&(__limit=0),void 0===__as_position&&(__as_position=!1);for(var ar=[],positions=[],isDate,isString,isArray,isObject,hasFilters=!1,reg=/[0-9]{4}\-[0-9]{2}\-[0-9]{2}( [0-9]{2}\:[0-9]{2}\:[0-9]{2})?/g,isMatch=!1,matches=0,str,o,err,counter,total,i=0;i<this.length;i++)for(var a in isMatch=!0,matches=0,this.filters){err=!1;try{o=null,str="this["+i+"]."+a,o=eval(str)}catch(t){err=!0}if(err||void 0===o)isMatch=!1;else{hasFilters=!0,isDate=!1,isString=!1,isArray=Array.isArray(o),isObject=!isArray&&"object"==typeof o,isArray?"string"==typeof o[0]&&(isString=!0,o[0].match(reg)&&(isDate=!0)):"string"==typeof o&&(isString=!0,o.match(reg)&&(isDate=!0));for(var j=0;j<this.filters[a].length;j++)for(var b in this.filters[a][j]){if(String(this.filters[a][j][b]).length)if("function"===b)isMatch=this.filters[a][j][b](o),isMatch&&matches++;else switch(b){case"eq":isDate?moment(o).format("YYYY-MM-DD")!==moment(this.filters[a][j][b]).format("YYYY-MM-DD")?isMatch=!1:matches++:isString?o.toLowerCase()!==String(this.filters[a][j][b]).toLowerCase()?isMatch=!1:matches++:o!==this.filters[a][j][b]?isMatch=!1:matches++;break;case"eqjson":JSON.stringify(o)!==JSON.stringify(this.filters[a][j][b])?isMatch=!1:matches++;break;case"neq":isDate?moment(o).format("YYYY-MM-DD")===moment(this.filters[a][j][b]).format("YYYY-MM-DD")?isMatch=!1:matches++:isString?o.toLowerCase()===this.filters[a][j][b].toLowerCase()?isMatch=!1:matches++:o===this.filters[a][j][b]?isMatch=!1:matches++;break;case"in":if(Array.isArray(this.filters[a][j][b])){for(var k=0;k<this.filters[a][j][b].length;k++)if(-1===o.indexOf(this.filters[a][j][b][k])){isMatch=!1;break}isMatch&&matches++}else if(isString)isArray?-1===o.indexOf(this.filters[a][j][b])?isMatch=!1:matches++:-1===o.toLowerCase().indexOf(this.filters[a][j][b].toLowerCase())?isMatch=!1:matches++;else if(isArray)-1===o.indexOf(this.filters[a][j][b])?isMatch=!1:matches++;else if(isObject){for(var p in counter=0,total=0,this.filters[a][j][b])total++,o.hasOwnProperty(p)&&-1!==String(o[p]).toLocaleLowerCase().indexOf(String(this.filters[a][j][b][p]).toLowerCase())&&counter++;isMatch=total===counter,isMatch&&matches++}break;case"nin":if(Array.isArray(this.filters[a][j][b])){for(var k=0;k<this.filters[a][j][b].length;k++)if(-1!==o.indexOf(this.filters[a][j][b][k])){isMatch=!1;break}isMatch&&matches++}else isString?-1!==o.toLowerCase().indexOf(this.filters[a][j][b].toLowerCase())?isMatch=!1:matches++:-1!==o.indexOf(this.filters[a][j][b])?isMatch=!1:matches++;break;case"gt":isDate?moment(o).unix()<=moment(this.filters[a][j][b]).unix()?isMatch=!1:matches++:o<=this.filters[a][j][b]?isMatch=!1:matches++;break;case"gte":isDate?moment(o).unix()<moment(this.filters[a][j][b]).unix()?isMatch=!1:matches++:o<this.filters[a][j][b]?isMatch=!1:matches++;break;case"lt":isDate?moment(o).unix()>=moment(this.filters[a][j][b]).unix()?isMatch=!1:matches++:o>=this.filters[a][j][b]?isMatch=!1:matches++;break;case"lte":isDate?moment(o).unix()>moment(this.filters[a][j][b]).unix()?isMatch=!1:matches++:o>this.filters[a][j][b]?isMatch=!0:matches++;break;case"btw":isDate?moment(this.filters[a][j][b][0]).unix()>moment(o).unix()||moment(this.filters[a][j][b][1]).unix()<moment(o).unix()?isMatch=!1:matches++:this.filters[a][j][b][0]>o||this.filters[a][j][b][1]<o?isMatch=!1:matches++;break;case"substr":o.toLowerCase().substr(this.filters[a][j][b][0],this.filters[a][j][b][1]).toLowerCase()!==this.filters[a][j][b][2].toLowerCase()?isMatch=!1:matches++;break;case"regex":o.toString().match(this.filters[a][j][b])?matches++:isMatch=!1}else isMatch=!0,matches++;if(!isMatch)break}}if("or"===filteringMode?isMatch&&(ar.push(this[i]),positions.push(i)):matches===filterCount&&(ar.push(this[i]),positions.push(i)),__limit&&ar.length===__limit)return __as_position?positions:OGX.List.apply(null,ar)}return __as_position?positions:hasFilters?OGX.List.apply(null,ar):array},array}function addToCache(t){var r;for(var e in indexes){if(-1!==e.indexOf("|")){e=e.split("|"),r=[];for(var a=0;a<e.length;a++)t.hasOwnProperty(e[a])&&r.push(t[e[a]]);r=r.join("|"),e=e.join("|")}else t.hasOwnProperty(e)&&(r=t[e]);indexes.hasOwnProperty(e)||(indexes[e]={}),indexes[e][r]=t}}function matchesCache(t){var r,e=[],a=[];for(var i in indexes){r=!0,e=-1!==i.indexOf("|")?i.split("|"):[i];for(var s=0;s<e.length;s++)if(!t.hasOwnProperty(e[s])){r=!1;break}r&&a.push(i)}return!!a.length&&a}function dynamicSort(e,a){return function(t,r){return t[e]<r[e]?-1*a:t[e]>r[e]?a:0}}function extract(__item,__by,__mode,__param){var data;try{data=eval("__item."+__by)}catch(t){}if(data)switch(__mode){case"substr":return data=data.substr(__param[0],__param[1]),data;case"numrange":return data=Number(data),data=Array.isArray(__param)?(data=Math.floor(data/__param[0]),"pre"===__param[2]?__param[1]+data*__param[0]+" - "+__param[1]+(data+1)*__param[0]:data*__param[0]+__param[1]+" - "+(data+1)*__param[0]+__param[1]):(data=Math.floor(data/__param),data*__param+" - "+(data+1)*__param),data;case"date":if(!Array.isArray(__param)){if("year"===__param)return data=data.substr(0,4),data;if("month"===__param)return data=data.substr(0,7),data;if("week"===__param)return data=data.substr(0,4)+" week "+moment(data).week(),data}return data=moment(data).unix(),data=Math.floor(data/(60*__param[0]*60*24)),data*=60*__param[0]*60*24,data=moment(1e3*data).format(__param[1])+" - "+moment(1e3*data+1e3*__param[0]*60*60*24).format(__param[1]),data;default:return data}return!1}console.log("Error: moment.js not found!")},void 0===OGX)var OGX={};OGX.Object=function(){"use strict";var n=new OGX.List,h=new OGX.List;function f(t){for(var r=t.split("."),e=OGX,a=0;a<r.length;a++)void 0!==e[r[a]]&&(e=e[r[a]]);return e}h.cache("_NAME_","id"),this.isRegistered=function(t,r){return typeof("undefined"!==this.register[t][r])},this.getExtend=function(t){var r=n.get({main:{eq:t}},null,1);return!!r&&r.extends},this.getExtends=function(t){var r=[],e=n.get({main:{eq:t}},null,1);if(e){var a;r=r.concat(e.extends);for(var i=0;i<e.extends.length;i++)(a=this.getExtends(e.extends[i]))&&(r=r.concat(a))}var s=[];for(i=0;i<r.length;i++)-1===s.indexOf(r[i])&&s.push(r[i]);return s},this.register=function(){var t=Array.prototype.slice.call(arguments),r=t.shift();n.push({main:r,extends:t})},this.create=function(t,r){void 0===r&&(r={});var e=this.getExtends(t),a=!1;if(e.length){var i=f(t);i.prototype=Object.create({});var s,n=[];n.push(i.prototype);for(var o=0;o<e.length;o++)void 0!==(s=f(e[o]))&&n.push(s.prototype);Object.assign.apply(null,n),a=new(i.prototype.constructor=i)(r)}else OGX.hasOwnProperty(t)&&(a=new OGX[t](r));return debug(5,"create",t,a.id),!!a&&(h.insert(a),a)},this.get=function(t,r,e){return h.get(t,r,e)},this.destroy=function(t){debug(5,"object destroy uxi",t._NAME_,t.id),t.blur(),"function"==typeof t.destroy&&t.destroy(),"function"==typeof t.__destroy&&t.__destroy(),t.clear(),t.floating&&t.el.remove(),h.findDelete("id",t.id,1)}},"function"!=typeof Object.assign&&Object.defineProperty(Object,"assign",{value:function(t){"use strict";if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var r=Object(t),e=1;e<arguments.length;e++){var a=arguments[e];if(null!=a)for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(r[i]=a[i])}return r},writable:!0,configurable:!0});if(void 0===OGX)var OGX={};function require(){OGX.Object.register.apply(null,arguments)}function construct(__that,__cls){var ext=OGX.Object.getExtend(__cls);for(var a in ext)eval("OGX."+ext[a]).call(__that,arguments.callee.caller.arguments[0])}OGX.Object=new OGX.Object;if(void 0===OGX)var OGX={};if(OGX.OML=function(){"use strict";var thread_object={},local_object={},binds;function createRecursive(e,i,v,w,X){binds=[];var t=(new Date).getTime();!function e(i,t){if(Array.isArray(i))for(var n=0;n<i.length;n++)e(i[n],t);else{var o,r,s,a,d,u,c,f,l,p,O,h,g;if(!X)for(f in i)-1!==f.indexOf(":Point")&&(i[f].el=f.split(":")[0],i[f].data=v,i[f].route_data=w,e((c=t.create("Point",i[f])).oml(),c),delete i[f]);for(f in i)if((g=/((?!:)[\S ]+):(\S+)/gi.exec(f))&&(o=g[1],void 0!==(r=s=g[2])&&-1===["Route","OML"].indexOf(r))){switch(0<s.indexOf(".")&&(s=s.substr(0,s.indexOf(".")-1)),u=i[f],a=d=!0,s){case"Fork":if("scope"===o){if(!(h=OGX.Scope.match(i[f])))return!1;e(h.node,t)}else(h=getForkChild(i[f]))&&e(h,l);d=a=!1;break;case"Html":u.el=o,u.html=i[f].html,(a=isRequired(u))||(u.template=!1);break;case"Template":u.template=r.split(".")[1],u.el=o,r="Html",a=isRequired(u);break;case"Ghost":u.el=o;break;case"Controller":u.id=o;break;default:-1!==[".","#"].indexOf(o.substr(0,1))?u.el=o:(u.id=o,u.el=t.el[0],u.parent=t)}d&&(u=runOseScripts(u,w)),p=l=!1,a?(X&&(O=X.find("id",u.id,1))&&(p=!0),c=p?(O.wake(u.el),O):OGX.Object.create(r,u),t.add(c),l=c):(l=t,"Html"===r&&OGX.HtmlRender(u)),l&&i[f].hasOwnProperty("node:OML")&&("string"==typeof i[f]["node:OML"]&&0===i[f]["node:OML"].indexOf("{{")&&(i[f]["node:OML"]=OGX.OSE.exec(i[f]["node:OML"])),e(i[f]["node:OML"],l)),a&&"function"==typeof c.construct&&(p||c.construct.apply(c,[v,w])),(a||p)&&(t.blured||c.focus()),convertBinds(c,i[f])}}}(i,e),binds.length&&execBinds(binds),OGX.OML.rendertime&&debug(3,"⏱ OML RENDER TIME "+((new Date).getTime()-t)+"ms ")}function execBinds(e){for(var i=0;i<e.length;i++)doBind(e[i])}function convertBinds(e,i){var t;for(var n in i)if(t=/^(\S*)\:Bind$/g.exec(n))if(Array.isArray(i[n]))for(var o=0;o<i[n].length;o++)i[n][o].property=t[1],binds.push({uxi:e,config:i[n][o]});else i[n].property=t[1],binds.push({uxi:e,config:i[n]})}function doBind(e){setTimeout(function(){runOseScripts(e.config),e.uxi.bind(e.config)},0)}function isRequired(e){return e.hasOwnProperty("instance")&&e.instance||e.hasOwnProperty("scroll")&&e.scroll}function getForkChild(__prop,__node){if(0===__prop.indexOf("#")&&(__prop=eval(__prop.substr(1))),__prop)for(var val in __node)if(-1!==__prop.indexOf(val))return __node[val];return!1}function runOseScripts(e,i){var t;for(var n in e)-1!==n.indexOf(":OSE")&&(e[t=n.split(":").shift()]=OGX.OSE.exec(e[n],{},thread_object,i,local_object),delete e[n],runOseScripts(e[t]));return e}this.rendertime=!0,this.get=function(e){return OGX.Cache.get("oml",e)},this.make=function(e,i,t){var n={};return n[e+":"+i]=t,n},this.parse=function(e){return"string"==typeof e&&("{"!==e.substr(0,1)&&(e="{"+e+"}"),e=JSON.parse(e)),e},this.replaceNodeName=function(e,i,t){var n={};for(var o in void 0===t&&(t="default"),e){n[o.replace(t,i)]=e[o];break}return e=n},this.replaceDataRecursive=function(e,r,s){function a(e){var i,t;for(var n in e)if(-1!==n.indexOf(":OSE"))i=n.split(":"),(t=u(e[n],r,s))&&(e[i[0]]=t,delete e[n],a(e[i[0]]));else if("node:OML"===n)if("string"==typeof e[n]&&0===e[n].indexOf("{{"))e[n]=OGX.OSE.exec(e[n]),d(e[n]);else if(Array.isArray(e[n]))for(var o=0;o<e[n].length;o++)d(e[n][o]);else d(e[n])}function d(e){var i;for(var t in e)-1!==t.indexOf("{{")&&(i=u(t,r,s))&&(e[i]=e[t],delete e[t],t=i),a(e[t])}function u(e,i,t){var n,o,r=/{{([\S ]+)}}/gi;thread_object[t]=i;for(var s=0;n=r.exec(e);){if(o=OGX.OSE.exec(n[0],{},thread_object),-1!==["string","number"].indexOf(typeof o))e=e.replace(n[0],o);else if(-1!==["boolean","object"].indexOf(typeof o))return o;if(r.lastIndex=0,100<++s)return}return e}d(e)},this.render=function(e,i,t,n,o){"string"==typeof t&&0===t.indexOf("{{")&&(t=OGX.OSE.exec(t,{},thread_object,n)),void 0===o&&(o=!1),createRecursive(e,i,t,n,o),e.blured||e.focusNodes()}},OGX.OML=new OGX.OML,void 0===OGX)var OGX={};OGX.Stages={},OGX.Views={},OGX.Controllers={},require("Core","Uxi","Touch"),OGX.Core=function(){construct(this,"Core");var u,c=this,i={scope:["public"],routing:{routes:{},options:{history:!0,bookmark:!0},errors:{403:!1,404:!1}},stages:{blured:!0,use:!1,closeable:!1,anim:!1},overlays:{delay:200,anim:"fade"},popups:{blured:!1,sleeping:!1},theater:!1,observe:!1,auto_exit:!1,chromeos:!1,rendertime:!1},f=!1,s=!1,t=!1,n=/(iPhone|iPod|iPad)/i.test(navigator.userAgent),o=matchMedia("(prefers-color-scheme: dark)").matches;function r(e,i){var t=e.join(" ");$("body").removeClass(t).addClass(i.join(" "))}function d(e){app.remove(OGX.Popup.NAME,e.id),e.cb&&e.cb(e.params)}function l(e){var i=e.matches;debug(3,"dark mode is",i)}function p(){if(f){var e=f.gather("");for(a in e)e[a]._NAME_!==OGX.Controller.NAME&&(-1===[OGX.Popup.NAME,OGX.Window.NAME].indexOf(e[a]._NAME_)?e[a].sleeping||(e[a].resize(),e[a].resizeNodes()):-1!==OGX.Popup.NAME.indexOf(e[a]._NAME_)?e[a].sleeping||(e[a].resize(),e[a].centered&&e[a].center(),e[a].resizeNodes()):-1!==OGX.Window.NAME.indexOf(e[a]._NAME_)&&(e[a].sleeping||(e[a].resize(),e[a].resizeNodes())))}}function O(){debug(3,"preload done"),u.routing&&(c.router=new OGX.Router(u.routing),c.router.start()),function(){(function(){debug(5,"init stages");var e,i,t,n,o,r,s,a=!1;for(var d in u.vapps)i=(e=d.split(":"))[0],t=e[1],(o=OGX.Data.merge(u.vapps[d],u.stages,!1,!0)).id=i,!0===o.use&&(n=(a=i)+"/"+o.home),r=c.addStage(t,o),!0===o.use&&(f=r);a&&(s=u.bookmark&&-1!==window.location.href.indexOf("#")?window.location.href.split("#").pop():n,setTimeout(function(){c.goto(s)},0),setTimeout(function(){$(document).trigger(OGX.App.READY)},100))})(),r([""],OGX.Data.clone(u.scope)),u.theater&&function(){for(var e=app.gather(OGX.Stage.NAME),i=[],t=0;t<e.length;t++)e[t].theater&&i.push(e[t]);u.theater.stages=i,u.theater.el="body",c.theater=c.create("Theater",u.theater)}();debug(3,"app ready")}()}this._NAME_=OGX.App.NAME,this.router=!1,this.isWebView=function(){return t},this.isTouch=function(){return this.touch.touchable()},this.getURL=function(){return f.url},this.isDarkMode=function(){return o},this.toggleTheme=function(){var e="(prefers-color-scheme: ";o?($("head").children('link[data="dark"]').attr("media",e+"light)"),$("head").children('link[data="light"]').attr("media",e+"dark)")):($("head").children('link[data="dark"]').attr("media",e+"dark)"),$("head").children('link[data="light"]').attr("media",e+"light)")),o=!o},this.scope=function(e){return void 0!==e&&Array.isArray(e)?(r(OGX.Data.clone(u.scope),OGX.Data.clone(e)),OGX.Scope.scope=e,!0):OGX.Scope.scope},this.addStage=function(e,i){if(OGX.Data.merge(i,u.stages),void 0===i)return!1;if(!i.hasOwnProperty("id"))return!1;i.el="body";var t=OGX.Object.create(e,i);return this.add(t),i.hasOwnProperty("node:OML")&&OGX.OML.render(t,i["node:OML"]),setTimeout(function(){t.construct(i),i.use?(t.el.css("display","block"),t.focus(),s=t):t.sleep()},0),t},this.removeStage=function(e){var i=this.cfind("Stage",e);i&&(i.destroy(),i.kill(),this.find("Stage",e,"remove"))},this.useStage=function(e){if(!f||f.id!==e){var i=this.cfind("Stage",e);return!!i&&(debug(3,"app now using stage",e),f=i,!0)}},this.getStage=function(e){if(void 0===e)return f||s;var i=this.find("Stage",e);return i||!1},this.showStage=function(e,i){if(!f||f.id!==e){var t=this.cfind(OGX.Stage.NAME,e);if(t){if(debug(3,"app now showing stage",e,i),void 0===i&&(i=t.anim?t.anim:!!s.anim&&s.anim),i){var n=$(window).height();switch(i){case OGX.Stage.SWAP:s&&(t.wake(),s.el.on("transitionend",function(){s.el.off("transitionend"),s.el.css("top",-n+"px"),t.el.css("top","0px"),t.el.on("transitionend",function(){t.el.off("transitionend"),t.el.css("transform","scale(1)"),s.el.removeClass("ogx_stage_anim"),s.el.css({top:"0px",transform:"scale(1)"}),s.sleep(),c.el.trigger(OGX.Stage.SWAP,{old:s,new:t}),s=t})}),t.el.addClass("ogx_stage_anim"),s.el.addClass("ogx_stage_anim"),s.el.css("transform","scale(0.9)")),t.el.css("top",n+"px"),t.el.css("display","block"),t.el.css("transform","scale(0.9)"),t.el.addClass("ogx_stage_anim");break;case OGX.Stage.FLIP:s&&(t.wake(),s.el.on("transitionend",function(){s.el.off("transitionend"),s.el.removeClass("ogx_stage_anim"),s.el.css("transform","scaleX(1)"),s.sleep(),t.el.css("transform","scaleX(1)"),c.el.trigger(OGX.Stage.SWAP,{old:s,new:t}),s=t}),t.el.addClass("ogx_stage_anim"),t.el.css("transform","scaleX(0)"),s.el.addClass("ogx_stage_anim"),s.el.css("transform","scaleX(0)")),t.el.css("display","block")}}else s&&s.id!==t.id&&s.sleep(),t.sleeping&&t.wake(),t.el.css("display","block"),s=t;c.useStage(e)}}},this.getWindow=function(e){return this.cfind(OGX.Window.NAME,e)},this.getWindows=function(){return this.gather(OGX.Window.NAME)},this.windowExists=function(e){return!1!==this.cfind(OGX.Window.NAME,e)},this.addWindow=function(e,i){if(debug(4,"app adding window",e.id),e=OGX.Data.merge(e,u.windows),void 0===i){if(!s)return!1;i=s}var t;return!!i&&(e.el=i.el,e.parent=i,e.hasOwnProperty("node:OML")?(t=OGX.Object.create(OGX.Window.NAME,e),i.add(t),t.focus(),OGX.OML.render(t,e["node:OML"])):t=i.create(OGX.Window.NAME,e),t)},this.windowOpen=function(e){return this.cfind(OGX.Window.NAME,e).status===OGX.Window.OPEN},this.showWindow=function(e,i,t,n){debug(4,"app showing window",e),!0===i&&(i=u.anim);var o=this.cfind(OGX.Window.NAME,e);return!!o&&(o.sleeping&&attachWindow(e),o.blured&&o.focus(),o.show(i,t,n),!0)},this.hideWindow=function(e,i,t,n){debug(4,"app hiding window",e),!0===i&&(i=u.anim),"string"!=typeof e&&(e=this.findWindow(e).id),this.cfind(OGX.Window.NAME,e).hide(i,t,n)},this.swapWindows=function(e,i){var t,n,o,r;return debug(4,"app swapping window",e,i),!(!this.windowExists(e)||!this.windowExists(i))&&(t=this.getWindow(e),n=this.getWindow(i),o=t.el.css("z-index"),r=n.el.css("z-index"),t.el.css("z-index",r),n.el.css("z-index",o),!0)},this.sleepWindow=function(e){debug(4,"app sleep window",e),this.cfind(OGX.Window.NAME,e).sleep()},this.blurWindow=function(e){debug(4,"app blur window",e),this.cfind(OGX.Window.NAME,e).blur()},this.focusWindow=function(e){debug(4,"app focus window",e),this.cfind(OGX.Window.NAME,e).focus()},this.removeWindow=function(e){return debug(4,"app remove window",e),this.find(OGX.Window.NAME,e,"remove")},this.removeWindows=function(e){for(var i in e)this.removeWindow(i);return!0},this.removeAllWindows=function(e){void 0===e&&(e=[]);var i=this.gather(OGX.Window.NAME);for(var t in i)-1!==e.indexOf(t.id)&&this.removeWindow(t.id)},this.findWindow=function(e){var i=e.el.parents(".ogx_window");if(i.length){var t=$(i[0]).data("ogx-id");return this.cfind(OGX.Window.NAME,t)}return!1},this.addPopup=function(e,i){var t;return debug(4,"app add popup",e.id),void 0!==i&&i||(i=f),e.el=i.el[0],e.parent=i,e.chromeos=u.chromeos,e.hasOwnProperty("node:OML")?(t=OGX.Object.create(OGX.Popup.NAME,e),i.add(t),t.focus(),OGX.OML.render(t,e["node:OML"])):t=i.create(OGX.Popup.NAME,e),setTimeout(function(){t.show()},0),t},this.removePopup=function(e,i,t,n,o){if(debug(4,"app remove popup",e),void 0===o&&(o=s),void 0===t&&(t=!1),void 0===n&&(n=!1),void 0===i&&(i=!0),o){var r=o.find(OGX.Popup.NAME,e);if(r)return r.hide(i,d,{id:e,cb:t,params:n}),!0}return!1},this.findPopup=function(e){var i;i=e instanceof HTMLElement?e:e.el;var t=$(i).parents(".ogx_popup");if(t.length){var n=$(t[0]).data("ogx-id");return this.cfind(OGX.Popup.NAME,n)}return!1},this.getVisiblePopups=function(){var e=this.gather(OGX.Popup.NAME),i=[];for(var t in e)"visible"===e[t].el.css("visibility")&&i.push(e[t]);return i},this.popupExists=function(e){return!1!==this.cfind(OGX.Popup.NAME,e)},this.addOverlay=function(e,i){return debug(4,"app add overlay"),void 0===i&&(i=s),!!i&&(i.addOverlay(e),!0)},this.removeOverlay=function(e,i){debug(4,"app remove overlay"),void 0===i&&(i=s),i&&i.removeOverlay(e)},this.theater=!1,this.getJSON=function(e){return OGX.Cache.get("json",e)},this.goto=function(e,i){return void 0===i&&(i={}),i=OGX.Data.merge(i,{history:!0,data:null},!1),this.router.goto(e,i)},this.getDefaults=function(e){return u[e]},(void 0===OGX.Data?(debug(1,"OGX.Data not found!"),0):void 0===OGX.Net?(debug(1,"OGX.Net not found!"),0):void 0===OGX.Templater?(debug(1,"OGX.Templater not found!"),0):void 0===OGX.Display?(debug(1,"OGX.Display not found!"),0):void 0===OGX.View?(debug(1,"OGX.View not found!"),0):void 0===OGX.Controller?(debug(1,"OGX.Controller not found!"),0):void 0===OGX.Stage?(debug(1,"OGX.Stage not found!"),0):void 0===OGX.Window?(debug(1,"OGX.Window not found!"),0):void 0===OGX.Popup?(debug(1,"OGX.Popup not found!"),0):void 0!==OGX.Container||(debug(1,"OGX.Container not found!"),0))&&(OGX.Net=new OGX.Net({ios:n}),OGX.Net.load("app.json",function(e){debug(3,"init"),u=e,t=void 0!==window.ontouchstart,n&&$("body").addClass("ios"),u=OGX.Data.weld(u,i,!1,!1),c.el=$(document),OGX.OML.rendertime=u.rendertime,OGX.Net.preload(u.preload,O),function(e){e?window.addEventListener("resize",p):window.removeEventListener("resize",p)}(!0),function(e){if(e){var i=window.matchMedia("(prefers-color-scheme: dark)");i.addListener(l)}else i.removeListener(l)}(!0)}))},OGX.App=function(e){"use strict";return OGX.Object.create("Core",e)},OGX.App.NAME="App",OGX.App.LOADING="AppLoading",OGX.App.READY="AppReady";