/* globules.io OGX.JS 1.1.9.1 */ 
if(void 0===OGX)var OGX={};OGX.List=function(){var filteringMode="and",filterCount=0,indexes=!1;1===arguments.length&&arguments[0]instanceof Array&&(arguments=arguments[0]);var array=Object.create(Array.prototype);for(var method in array=Array.apply(array,arguments)||array,OGX.List.prototype)OGX.List.prototype.hasOwnProperty(method)&&(array[method]=OGX.List.prototype[method]);function addToCache(t){var r;for(var e in indexes){if(-1!==e.indexOf("|")){e=e.split("|"),r=[];for(var a=0;a<e.length;a++)t.hasOwnProperty(e[a])&&r.push(t[e[a]]);r=r.join("|"),e=e.join("|")}else t.hasOwnProperty(e)&&(r=t[e]);indexes.hasOwnProperty(e)||(indexes[e]={}),indexes[e][r]=t}}function matchesCache(t){var r,e=[],a=[];for(var i in indexes){r=!0,e=-1!==i.indexOf("|")?i.split("|"):[i];for(var s=0;s<e.length;s++)if(!t.hasOwnProperty(e[s])){r=!1;break}r&&a.push(i)}return!!a.length&&a}function dynamicSort(e,a){return function(t,r){return t[e]<r[e]?-1*a:t[e]>r[e]?a:0}}function extract(__item,__by,__mode,__param){var data;try{data=eval("__item."+__by)}catch(t){}if(data)switch(__mode){case"substr":return data=data.substr(__param[0],__param[1]),data;case"numrange":return data=Number(data),data=Array.isArray(__param)?(data=Math.floor(data/__param[0]),"pre"===__param[2]?__param[1]+data*__param[0]+" - "+__param[1]+(data+1)*__param[0]:data*__param[0]+__param[1]+" - "+(data+1)*__param[0]+__param[1]):(data=Math.floor(data/__param),data*__param+" - "+(data+1)*__param),data;case"date":if(!Array.isArray(__param)){if("year"===__param)return data=data.substr(0,4),data;if("month"===__param)return data=data.substr(0,7),data;if("week"===__param)return data=data.substr(0,4)+" week "+moment(data).week(),data}return data=moment(data).unix(),data=Math.floor(data/(60*__param[0]*60*24)),data*=60*__param[0]*60*24,data=moment(1e3*data).format(__param[1])+" - "+moment(1e3*data+1e3*__param[0]*60*60*24).format(__param[1]),data;default:return data}return!1}return array.insert=function(t,r){return void 0===r?array.push(t):array.splice(r,0,t),indexes&&addToCache(t),!0},array.delete=function(t){var r=this,e=array.splice(t,1);if(e.length){if(indexes){var a=matchesCache(e[0]);a&&setTimeout(function(){r.rebuild(a)},0)}return e[0]}return!1},array.last=function(){if(this.length)return this[this.length-1]},array.findDelete=function(t,r,e){var a=0;void 0===e&&(e=0);for(var i=new OGX.List,s=0;s<this.length;s++)if(this[s][t]===r){if(i.push(this.splice(s,1)[0]),indexes){var n=matchesCache(i.last());n&&this.rebuild(n)}if(a++,0<e&&e===a)return 1===e?i[0]:i;s--}return i},array.findReplace=function(t,r,e,a){var i=0;void 0===a&&(a=0);for(var s=new OGX.List,n=0;n<this.length;n++)if(this[n][t]===r&&(s.push(this[n]),i++,this[n]=e,0<a&&a===i))return 1===a?s[0]:s;return!!s.length&&s},array.findUpdate=function(t,r,e,a,i){var s=0;void 0===a&&(a=!1),void 0===i&&(i=0);for(var n,o=new OGX.List,h=0;h<this.length;h++)if(this[h][t]===r){for(var f in n=!1,e)a?this[h].hasOwnProperty(f)&&(this[h][f]=e[f],n=!0,s++):(this[h][f]=e[f],n=!0,s++);if(n&&(o.push(this[h]),0<i&&i===s))return 1===i?o[0]:o}return!!o.length&&o},array.findIndex=function(t,r){var e=!1;r instanceof RegExp&&(e=!0);for(var a=0;a<this.length;a++)if(e){if(this[a][t].match(r))return{index:a}}else if(this[a][t]===r)return{index:a};return!1},array.find=function(t,r,e){var a=0,i=new OGX.List,s=!1;r instanceof RegExp&&(s=!0),void 0===e&&(e=0);for(var n=0;n<this.length;n++)if(s?this[n][t].match(r)&&(i.push(this[n]),a++):this[n][t]===r&&(i.push(this[n]),a++),0<e&&a===e)return 1===e?i[0]:i;return!!i.length&&i},array.swap=function(t,r){var e=this[t];this[t]=this[r],this[r]=e},array.cache=function(){indexes=indexes||{};var t=[],r=[];if(1<arguments.length){for(var e=0;e<arguments.length;e++)t.push(arguments[e]);t=t.join("|")}else t=arguments[0];indexes.hasOwnProperty(t)||(indexes[t]={});for(var a=0;a<this.length;a++){r=[];for(e=0;e<arguments.length;e++)r.push(this[a][arguments[e]]);r=r.join("|"),indexes[t].hasOwnProperty(r)||(indexes[t][r]=[]),indexes[t][r].push(this[a])}return!0},array.uncache=function(t){if(!indexes)return!1;var r=t;return 1<arguments.length&&(r=arguments.join("|")),!!indexes.hasOwnProperty(r)&&(delete indexes[r],!0)},array.rebuild=function(t){for(var r=0;r<t.length;r++)delete indexes[t[r]],this.cache(t[r])},array.read=function(t,r,e){var a,i,s=arguments;if(!indexes)return!1;if(!s.length)return indexes;if("object"==typeof t){for(var n in e=s[1],a=[],i=[],t)a.push(n),i.push(t[n]);a=a.join("|"),i=i.join("|")}else a=t,i=r;return void 0===e&&(e=0),!(!indexes.hasOwnProperty(a)||!indexes[a].hasOwnProperty(i))&&(e?1<e?indexes[a][i].splice(0,e):indexes[a][i][0]:indexes[a][i])},array.clear=function(){indexes=!1,filterCount=0,this.length=0},array.unique=function(t,r,e){void 0===r&&(r=!0),void 0===e?e=[t]:Array.isArray(e)||(e=[e]);for(var a,i=this.get(),s=[],n=new OGX.List,o=0;o<i.length;o++)if(-1===s.indexOf(i[o][t])&&(s.push(i[o][t]),r)){a={};for(var h=0;h<e.length;h++)a[e[h]]=i[o][t];n.push(a)}return r?n:s},array.order=function(t,r){array.sort(dynamicSort(t,r))},array.group=function(t,r,e){if(Array.isArray(t))return array.groupm(t,r,e);for(var a,i={},s=0;s<this.length;s++)(a=extract(this[s],t,r,e))&&(a=a.split(".").pop(),i.hasOwnProperty(a)||(i[a]=new OGX.List),i[a].push(this[s]));return i},array.groupm=function(h,f,l){return function t(r,e){var a=new OGX.List(r),i=f,s=l;void 0!==f&&Array.isArray(f)&&(i=f[e]),void 0!==l&&Array.isArray(l)&&(s=l[e]);var n=a.group(h[e],i,s);if(e+1<=h.length-1)for(var o in n)n[o]=t(n[o],e+1);return n}(this,0)},array.filters={},array.addFilter=function(t,r,e){this.filters.hasOwnProperty(t)||(this.filters[t]=[]);var a={};return a[r]=e,this.filters[t].push(a),filterCount++,!0},array.removeFilter=function(t){return!!this.filters.hasOwnProperty(t)&&(filterCount-=this.filters[t].length,delete this.filters[t],!0)},array.getFilters=function(){return this.filters},array.resetFilters=function(){this.filters={},filterCount=0},array.setFilters=function(t){for(var r in this.resetFilters(),t)for(var e=0;e<t[r].length;e++)for(var a in t[r][e])array.addFilter(r,a,t[r][e][a])},array.setFilteringMode=function(t){filterMode=t},array.get=function(t,r,e,a,i){void 0===r&&(r=!1),void 0===e&&(e=!1),"number"==typeof e&&(a=e,e=!1),void 0===a&&(a=0),void 0===i&&(i=!1);var s=this.getFilters();for(var n in this.resetFilters(),t)for(var o in t[n])this.addFilter(n,o,t[n][o]);var h=this.filter(a,i);if(this.resetFilters(),this.setFilters(s),i)return h;if(1===a)return!!h.length&&h[0];if(r)for(var n in r){h.order(n,r[n]);break}return e?h.group.apply(null,e):h},array.unset=function(t,r){void 0===r&&(r=0);var e=new OGX.List,a=this.get(t,null,null,r,!0);if(a)for(var i=0;i<a.length;i++)e.push(this.delete(a[i]-e.length));return 1===r&&e.length?e[0]:e},array.filter=function(__limit,__as_position){void 0===__limit&&(__limit=0),void 0===__as_position&&(__as_position=!1);for(var ar=[],positions=[],isDate,isString,isArray,isObject,hasFilters=!1,reg=/[0-9]{4}\-[0-9]{2}\-[0-9]{2}( [0-9]{2}\:[0-9]{2}\:[0-9]{2})?/g,isMatch=!1,matches=0,str,o,err,counter,total,i=0;i<this.length;i++)for(var a in isMatch=!0,matches=0,this.filters){err=!1;try{o=null,str="this["+i+"]."+a,o=eval(str)}catch(t){err=!0}if(err||void 0===o)isMatch=!1;else{hasFilters=!0,isDate=!1,isString=!1,isArray=Array.isArray(o),isObject=!isArray&&"object"==typeof o,isArray?"string"==typeof o[0]&&(isString=!0,o[0].match(reg)&&(isDate=!0)):"string"==typeof o&&(isString=!0,o.match(reg)&&(isDate=!0));for(var j=0;j<this.filters[a].length;j++)for(var b in this.filters[a][j]){if(String(this.filters[a][j][b]).length)if("function"===b)isMatch=this.filters[a][j][b](o),isMatch&&matches++;else switch(b){case"eq":isDate?moment(o).format("YYYY-MM-DD")!==moment(this.filters[a][j][b]).format("YYYY-MM-DD")?isMatch=!1:matches++:isString?o.toLowerCase()!==String(this.filters[a][j][b]).toLowerCase()?isMatch=!1:matches++:o!==this.filters[a][j][b]?isMatch=!1:matches++;break;case"eqjson":JSON.stringify(o)!==JSON.stringify(this.filters[a][j][b])?isMatch=!1:matches++;break;case"neq":isDate?moment(o).format("YYYY-MM-DD")===moment(this.filters[a][j][b]).format("YYYY-MM-DD")?isMatch=!1:matches++:isString?o.toLowerCase()===this.filters[a][j][b].toLowerCase()?isMatch=!1:matches++:o===this.filters[a][j][b]?isMatch=!1:matches++;break;case"in":if(Array.isArray(this.filters[a][j][b])){for(var k=0;k<this.filters[a][j][b].length;k++)if(-1===o.indexOf(this.filters[a][j][b][k])){isMatch=!1;break}isMatch&&matches++}else if(isString)isArray?-1===o.indexOf(this.filters[a][j][b])?isMatch=!1:matches++:-1===o.toLowerCase().indexOf(this.filters[a][j][b].toLowerCase())?isMatch=!1:matches++;else if(isArray)-1===o.indexOf(this.filters[a][j][b])?isMatch=!1:matches++;else if(isObject){for(var p in counter=0,total=0,this.filters[a][j][b])total++,o.hasOwnProperty(p)&&-1!==String(o[p]).toLocaleLowerCase().indexOf(String(this.filters[a][j][b][p]).toLowerCase())&&counter++;isMatch=total===counter,isMatch&&matches++}break;case"nin":if(Array.isArray(this.filters[a][j][b])){for(var k=0;k<this.filters[a][j][b].length;k++)if(-1!==o.indexOf(this.filters[a][j][b][k])){isMatch=!1;break}isMatch&&matches++}else isString?-1!==o.toLowerCase().indexOf(this.filters[a][j][b].toLowerCase())?isMatch=!1:matches++:-1!==o.indexOf(this.filters[a][j][b])?isMatch=!1:matches++;break;case"gt":isDate?moment(o).unix()<=moment(this.filters[a][j][b]).unix()?isMatch=!1:matches++:o<=this.filters[a][j][b]?isMatch=!1:matches++;break;case"gte":isDate?moment(o).unix()<moment(this.filters[a][j][b]).unix()?isMatch=!1:matches++:o<this.filters[a][j][b]?isMatch=!1:matches++;break;case"lt":isDate?moment(o).unix()>=moment(this.filters[a][j][b]).unix()?isMatch=!1:matches++:o>=this.filters[a][j][b]?isMatch=!1:matches++;break;case"lte":isDate?moment(o).unix()>moment(this.filters[a][j][b]).unix()?isMatch=!1:matches++:o>this.filters[a][j][b]?isMatch=!0:matches++;break;case"btw":isDate?moment(this.filters[a][j][b][0]).unix()>moment(o).unix()||moment(this.filters[a][j][b][1]).unix()<moment(o).unix()?isMatch=!1:matches++:this.filters[a][j][b][0]>o||this.filters[a][j][b][1]<o?isMatch=!1:matches++;break;case"substr":o.toLowerCase().substr(this.filters[a][j][b][0],this.filters[a][j][b][1]).toLowerCase()!==this.filters[a][j][b][2].toLowerCase()?isMatch=!1:matches++;break;case"regex":o.toString().match(this.filters[a][j][b])?matches++:isMatch=!1}else isMatch=!0,matches++;if(!isMatch)break}}if("or"===filteringMode?isMatch&&(ar.push(this[i]),positions.push(i)):matches===filterCount&&(ar.push(this[i]),positions.push(i)),__limit&&ar.length===__limit)return __as_position?positions:OGX.List.apply(null,ar)}return __as_position?positions:hasFilters?OGX.List.apply(null,ar):array},array},OGX.Object=function(){"use strict";var n=new OGX.List,h=new OGX.List;function f(t){for(var r=t.split("."),e=OGX,a=0;a<r.length;a++)void 0!==e[r[a]]&&(e=e[r[a]]);return e}h.cache("_NAME_","id"),this.isRegistered=function(t,r){return typeof("undefined"!==this.register[t][r])},this.getExtend=function(t){var r=n.get({main:{eq:t}},null,1);return!!r&&r.extends},this.getExtends=function(t){var r=[],e=n.get({main:{eq:t}},null,1);if(e){var a;r=r.concat(e.extends);for(var i=0;i<e.extends.length;i++)(a=this.getExtends(e.extends[i]))&&(r=r.concat(a))}var s=[];for(i=0;i<r.length;i++)-1===s.indexOf(r[i])&&s.push(r[i]);return s},this.register=function(){var t=Array.prototype.slice.call(arguments),r=t.shift();n.push({main:r,extends:t})},this.create=function(t,r){void 0===r&&(r={});var e=this.getExtends(t),a=!1;if(e.length){var i=f(t);i.prototype=Object.create({});var s,n=[];n.push(i.prototype);for(var o=0;o<e.length;o++)void 0!==(s=f(e[o]))&&n.push(s.prototype);Object.assign.apply(null,n),a=new(i.prototype.constructor=i)(r)}else OGX.hasOwnProperty(t)&&(a=new OGX[t](r));return!!a&&(h.insert(a),a)},this.get=function(t,r,e){return h.get(t,r,e)},this.destroy=function(t){t.blur(),"function"==typeof t.destroy&&t.destroy(),"function"==typeof t.__destroy&&t.__destroy(),t.clear(),t.floating&&t.el.remove(),h.findDelete("id",t.id,1)}},"function"!=typeof Object.assign&&Object.defineProperty(Object,"assign",{value:function(t){"use strict";if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var r=Object(t),e=1;e<arguments.length;e++){var a=arguments[e];if(null!=a)for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(r[i]=a[i])}return r},writable:!0,configurable:!0});if(void 0===OGX)var OGX={};function require(){OGX.Object.register.apply(null,arguments)}function construct(__that,__cls){var ext=OGX.Object.getExtend(__cls);for(var a in ext)eval("OGX."+ext[a]).call(__that,arguments.callee.caller.arguments[0])}OGX.Object=new OGX.Object;if(OGX.OML=function(){"use strict";var thread_object={},local_object={},binds;function createRecursive(e,t,v,m,w){binds=[];(new Date).getTime();!function e(t,i){if(Array.isArray(t))for(var n=0;n<t.length;n++)e(t[n],i);else{var r,o,s,a,d,c,u,l,f,h,p,O,g;if(!w)for(l in t)-1!==l.indexOf(":Point")&&(t[l].el=l.split(":")[0],t[l].data=v,t[l].route_data=m,e((u=i.create("Point",t[l])).oml(),u),delete t[l]);for(l in t)if((g=/((?!:)[\S ]+):(\S+)/gi.exec(l))&&(r=g[1],void 0!==(o=s=g[2])&&-1===["Route","OML"].indexOf(o))){switch(0<s.indexOf(".")&&(s=s.substr(0,s.indexOf(".")-1)),c=t[l],a=d=!0,s){case"Fork":if("scope"===r){if(!(O=OGX.Scope.match(t[l])))return!1;e(O.node,i)}else(O=getForkChild(t[l]))&&e(O,f);d=a=!1;break;case"Html":c.el=r,c.html=t[l].html,(a=isRequired(c))||(c.template=!1);break;case"Template":c.template=o.split(".")[1],c.el=r,o="Html",a=isRequired(c);break;case"Ghost":c.el=r;break;case"Controller":c.id=r;break;default:-1!==[".","#"].indexOf(r.substr(0,1))?c.el=r:(c.id=r,c.el=i.el[0],c.parent=i)}d&&(c=runOseScripts(c,m)),h=f=!1,a?(w&&(p=w.find("id",c.id,1))&&(h=!0),u=h?(p.wake(c.el),p):OGX.Object.create(o,c),i.add(u),f=u):(f=i,"Html"===o&&OGX.HtmlRender(c)),f&&t[l].hasOwnProperty("node:OML")&&("string"==typeof t[l]["node:OML"]&&0===t[l]["node:OML"].indexOf("{{")&&(t[l]["node:OML"]=OGX.OSE.exec(t[l]["node:OML"])),e(t[l]["node:OML"],f)),a&&"function"==typeof u.construct&&(h||u.construct.apply(u,[v,m])),(a||h)&&(i.blured||u.focus()),convertBinds(u,t[l])}}}(t,e),binds.length&&execBinds(binds)}function execBinds(e){for(var t=0;t<e.length;t++)doBind(e[t])}function convertBinds(e,t){var i;for(var n in t)if(i=/^(\S*)\:Bind$/g.exec(n))if(Array.isArray(t[n]))for(var r=0;r<t[n].length;r++)t[n][r].property=i[1],binds.push({uxi:e,config:t[n][r]});else t[n].property=i[1],binds.push({uxi:e,config:t[n]})}function doBind(e){setTimeout(function(){runOseScripts(e.config),e.uxi.bind(e.config)},0)}function isRequired(e){return e.hasOwnProperty("instance")&&e.instance||e.hasOwnProperty("scroll")&&e.scroll}function getForkChild(__prop,__node){if(0===__prop.indexOf("#")&&(__prop=eval(__prop.substr(1))),__prop)for(var val in __node)if(-1!==__prop.indexOf(val))return __node[val];return!1}function runOseScripts(e,t){var i;for(var n in e)-1!==n.indexOf(":OSE")&&(e[i=n.split(":").shift()]=OGX.OSE.exec(e[n],{},thread_object,t,local_object),delete e[n],runOseScripts(e[i]));return e}this.rendertime=!0,this.get=function(e){return OGX.Cache.get("oml",e)},this.make=function(e,t,i){var n={};return n[e+":"+t]=i,n},this.parse=function(e){return"string"==typeof e&&("{"!==e.substr(0,1)&&(e="{"+e+"}"),e=JSON.parse(e)),e},this.replaceNodeName=function(e,t,i){var n={};for(var r in void 0===i&&(i="default"),e){n[r.replace(i,t)]=e[r];break}return e=n},this.replaceDataRecursive=function(e,o,s){function a(e){var t,i;for(var n in e)if(-1!==n.indexOf(":OSE"))t=n.split(":"),(i=c(e[n],o,s))&&(e[t[0]]=i,delete e[n],a(e[t[0]]));else if("node:OML"===n)if("string"==typeof e[n]&&0===e[n].indexOf("{{"))e[n]=OGX.OSE.exec(e[n]),d(e[n]);else if(Array.isArray(e[n]))for(var r=0;r<e[n].length;r++)d(e[n][r]);else d(e[n])}function d(e){var t;for(var i in e)-1!==i.indexOf("{{")&&(t=c(i,o,s))&&(e[t]=e[i],delete e[i],i=t),a(e[i])}function c(e,t,i){var n,r,o=/{{([\S ]+)}}/gi;for(thread_object[i]=t;n=o.exec(e);){if(r=OGX.OSE.exec(n[0],{},thread_object),-1!==["string","number"].indexOf(typeof r))e=e.replace(n[0],r);else if(-1!==["boolean","object"].indexOf(typeof r))return r;o.lastIndex=0}return e}d(e)},this.render=function(e,t,i,n,r){"string"==typeof i&&0===i.indexOf("{{")&&(i=OGX.OSE.exec(i,{},thread_object,n)),void 0===r&&(r=!1),createRecursive(e,t,i,n,r),e.blured||e.focusNodes()}},OGX.OML=new OGX.OML,void 0===OGX)var OGX={};OGX.Stages={},OGX.Views={},OGX.Controllers={},require("Core","Uxi","Touch"),OGX.Core=function(){construct(this,"Core");var c,u=this,t={scope:["public"],routing:{routes:{},options:{history:!0,bookmark:!0},errors:{403:!1,404:!1}},stages:{blured:!0,use:!1,closeable:!1,anim:!1},overlays:{delay:200,anim:"fade"},popups:{blured:!1,sleeping:!1},theater:!1,observe:!1,auto_exit:!1,chromeos:!1,rendertime:!1},l=!1,s=!1,i=!1,n=/(iPhone|iPod|iPad)/i.test(navigator.userAgent),r=matchMedia("(prefers-color-scheme: dark)").matches;function o(e,t){var i=e.join(" ");$("body").removeClass(i).addClass(t.join(" "))}function d(e){app.remove(OGX.Popup.NAME,e.id),e.cb&&e.cb(e.params)}function f(e){e.matches}function h(){if(l){var e=l.gather("");for(a in e)e[a]._NAME_!==OGX.Controller.NAME&&(-1===[OGX.Popup.NAME,OGX.Window.NAME].indexOf(e[a]._NAME_)?e[a].sleeping||(e[a].resize(),e[a].resizeNodes()):-1!==OGX.Popup.NAME.indexOf(e[a]._NAME_)?e[a].sleeping||(e[a].resize(),e[a].centered&&e[a].center(),e[a].resizeNodes()):-1!==OGX.Window.NAME.indexOf(e[a]._NAME_)&&(e[a].sleeping||(e[a].resize(),e[a].resizeNodes())))}}function p(){c.routing&&(u.router=new OGX.Router(c.routing),u.router.start()),function(){var e,t,i,n,r,o,s,a=!1;for(var d in c.vapps)t=(e=d.split(":"))[0],i=e[1],(r=OGX.Data.merge(c.vapps[d],c.stages,!1,!0)).id=t,!0===r.use&&(n=(a=t)+"/"+r.home),o=u.addStage(i,r),!0===r.use&&(l=o);a&&(s=c.bookmark&&-1!==window.location.href.indexOf("#")?window.location.href.split("#").pop():n,setTimeout(function(){u.goto(s)},0),setTimeout(function(){$(document).trigger(OGX.App.READY)},100))}(),o([""],OGX.Data.clone(c.scope)),c.theater&&function(){for(var e=app.gather(OGX.Stage.NAME),t=[],i=0;i<e.length;i++)e[i].theater&&t.push(e[i]);c.theater.stages=t,c.theater.el="body",u.theater=u.create("Theater",c.theater)}()}this._NAME_=OGX.App.NAME,this.router=!1,this.isWebView=function(){return i},this.isTouch=function(){return this.touch.touchable()},this.getURL=function(){return l.url},this.isDarkMode=function(){return r},this.toggleTheme=function(){var e="(prefers-color-scheme: ";r?($("head").children('link[data="dark"]').attr("media",e+"light)"),$("head").children('link[data="light"]').attr("media",e+"dark)")):($("head").children('link[data="dark"]').attr("media",e+"dark)"),$("head").children('link[data="light"]').attr("media",e+"light)")),r=!r},this.scope=function(e){return void 0!==e&&Array.isArray(e)?(o(OGX.Data.clone(c.scope),OGX.Data.clone(e)),OGX.Scope.scope=e,!0):OGX.Scope.scope},this.addStage=function(e,t){OGX.Data.merge(t,c.stages),t.el="body";var i=OGX.Object.create(e,t);return this.add(i),t.hasOwnProperty("node:OML")&&OGX.OML.render(i,t["node:OML"]),setTimeout(function(){i.construct(t),t.use?(i.el.css("display","block"),i.focus(),s=i):i.sleep()},0),i},this.removeStage=function(e){var t=this.cfind("Stage",e);t&&(t.destroy(),t.kill(),this.find("Stage",e,"remove"))},this.useStage=function(e){if(!l||l.id!==e){var t=this.cfind("Stage",e);return!!t&&(l=t,!0)}},this.getStage=function(e){if(void 0===e)return l||s;var t=this.find("Stage",e);return t||!1},this.showStage=function(e,t){if(!l||l.id!==e){var i=this.cfind(OGX.Stage.NAME,e);if(i){if(void 0===t&&(t=i.anim?i.anim:!!s.anim&&s.anim),t){var n=$(window).height();switch(t){case OGX.Stage.SWAP:s&&(i.wake(),s.el.on("transitionend",function(){s.el.off("transitionend"),s.el.css("top",-n+"px"),i.el.css("top","0px"),i.el.on("transitionend",function(){i.el.off("transitionend"),i.el.css("transform","scale(1)"),s.el.removeClass("ogx_stage_anim"),s.el.css({top:"0px",transform:"scale(1)"}),s.sleep(),u.el.trigger(OGX.Stage.SWAP,{old:s,new:i}),s=i})}),i.el.addClass("ogx_stage_anim"),s.el.addClass("ogx_stage_anim"),s.el.css("transform","scale(0.9)")),i.el.css("top",n+"px"),i.el.css("display","block"),i.el.css("transform","scale(0.9)"),i.el.addClass("ogx_stage_anim");break;case OGX.Stage.FLIP:s&&(i.wake(),s.el.on("transitionend",function(){s.el.off("transitionend"),s.el.removeClass("ogx_stage_anim"),s.el.css("transform","scaleX(1)"),s.sleep(),i.el.css("transform","scaleX(1)"),u.el.trigger(OGX.Stage.SWAP,{old:s,new:i}),s=i}),i.el.addClass("ogx_stage_anim"),i.el.css("transform","scaleX(0)"),s.el.addClass("ogx_stage_anim"),s.el.css("transform","scaleX(0)")),i.el.css("display","block")}}else s&&s.id!==i.id&&s.sleep(),i.sleeping&&i.wake(),i.el.css("display","block"),s=i;u.useStage(e)}}},this.getWindow=function(e){return this.cfind(OGX.Window.NAME,e)},this.getWindows=function(){return this.gather(OGX.Window.NAME)},this.windowExists=function(e){return!1!==this.cfind(OGX.Window.NAME,e)},this.addWindow=function(e,t){if(e=OGX.Data.merge(e,c.windows),void 0===t){if(!s)return!1;t=s}var i;return!!t&&(e.el=t.el,e.parent=t,e.hasOwnProperty("node:OML")?(i=OGX.Object.create(OGX.Window.NAME,e),t.add(i),i.focus(),OGX.OML.render(i,e["node:OML"])):i=t.create(OGX.Window.NAME,e),i)},this.windowOpen=function(e){return this.cfind(OGX.Window.NAME,e).status===OGX.Window.OPEN},this.showWindow=function(e,t,i,n){!0===t&&(t=c.anim);var r=this.cfind(OGX.Window.NAME,e);return!!r&&(r.sleeping&&attachWindow(e),r.blured&&r.focus(),r.show(t,i,n),!0)},this.hideWindow=function(e,t,i,n){!0===t&&(t=c.anim),"string"!=typeof e&&(e=this.findWindow(e).id),this.cfind(OGX.Window.NAME,e).hide(t,i,n)},this.swapWindows=function(e,t){var i,n,r,o;return!(!this.windowExists(e)||!this.windowExists(t))&&(i=this.getWindow(e),n=this.getWindow(t),r=i.el.css("z-index"),o=n.el.css("z-index"),i.el.css("z-index",o),n.el.css("z-index",r),!0)},this.sleepWindow=function(e){this.cfind(OGX.Window.NAME,e).sleep()},this.blurWindow=function(e){this.cfind(OGX.Window.NAME,e).blur()},this.focusWindow=function(e){this.cfind(OGX.Window.NAME,e).focus()},this.removeWindow=function(e){return this.find(OGX.Window.NAME,e,"remove")},this.removeWindows=function(e){for(var t in e)this.removeWindow(t);return!0},this.removeAllWindows=function(e){void 0===e&&(e=[]);var t=this.gather(OGX.Window.NAME);for(var i in t)-1!==e.indexOf(i.id)&&this.removeWindow(i.id)},this.findWindow=function(e){var t=e.el.parents(".ogx_window");if(t.length){var i=$(t[0]).data("ogx-id");return this.cfind(OGX.Window.NAME,i)}return!1},this.addPopup=function(e,t){var i;return void 0!==t&&t||(t=l),e.el=t.el[0],e.parent=t,e.chromeos=c.chromeos,e.hasOwnProperty("node:OML")?(i=OGX.Object.create(OGX.Popup.NAME,e),t.add(i),i.focus(),OGX.OML.render(i,e["node:OML"])):i=t.create(OGX.Popup.NAME,e),setTimeout(function(){i.show()},0),i},this.removePopup=function(e,t,i,n,r){if(void 0===r&&(r=s),void 0===i&&(i=!1),void 0===n&&(n=!1),void 0===t&&(t=!0),r){var o=r.find(OGX.Popup.NAME,e);if(o)return o.hide(t,d,{id:e,cb:i,params:n}),!0}return!1},this.findPopup=function(e){var t;t=e instanceof HTMLElement?e:e.el;var i=$(t).parents(".ogx_popup");if(i.length){var n=$(i[0]).data("ogx-id");return this.cfind(OGX.Popup.NAME,n)}return!1},this.getVisiblePopups=function(){var e=this.gather(OGX.Popup.NAME),t=[];for(var i in e)"visible"===e[i].el.css("visibility")&&t.push(e[i]);return t},this.popupExists=function(e){return!1!==this.cfind(OGX.Popup.NAME,e)},this.addOverlay=function(e,t){return void 0===t&&(t=s),!!t&&(t.addOverlay(e),!0)},this.removeOverlay=function(e,t){void 0===t&&(t=s),t&&t.removeOverlay(e)},this.theater=!1,this.getJSON=function(e){return OGX.Cache.get("json",e)},this.goto=function(e,t){return void 0===t&&(t={}),t=OGX.Data.merge(t,{history:!0,data:null},!1),this.router.goto(e,t)},this.getDefaults=function(e){return c[e]},OGX.Net=new OGX.Net({ios:n}),OGX.Net.load("app.json",function(e){c=e,i=void 0!==window.ontouchstart,n&&$("body").addClass("ios"),c=OGX.Data.weld(c,t,!1,!1),u.el=$(document),OGX.OML.rendertime=c.rendertime,OGX.Net.preload(c.preload,p),function(e){e?window.addEventListener("resize",h):window.removeEventListener("resize",h)}(!0),function(e){if(e){var t=window.matchMedia("(prefers-color-scheme: dark)");t.addListener(f)}else t.removeListener(f)}(!0)})},OGX.App=function(e){"use strict";return OGX.Object.create("Core",e)},OGX.App.NAME="App",OGX.App.LOADING="AppLoading",OGX.App.READY="AppReady";